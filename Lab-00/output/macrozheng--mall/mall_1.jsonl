{"dataset_split": "train", "id": "mall@370eb4b:mall-portal/src/main/java/com/macro/mall/portal/service/HomeService.java#19-19", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "370eb4b7045b22dc05cf5a6cdde2fe4dfc79c3aa", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/HomeService.java", "language": "Java"}, "method": {"name": "content", "qualified_name": "com.macro.mall.portal.service.HomeService#content", "start_line": 19, "end_line": 19, "signature": "content()", "original_code": "HomeContentResult content();", "doc_comment": "/**\n     * \u83b7\u53d6\u9996\u9875\u5185\u5bb9\n     */"}, "code_tokens": ["HomeContentResult", "content", ";", "(", ")"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 8, "ast_depth": 4, "n_identifiers": 1, "vocab_size": 5, "n_whitespaces": 1, "n_words": 2, "nloc": 1, "token_counts": 5}}
{"dataset_split": "train", "id": "mall@370eb4b:mall-portal/src/main/java/com/macro/mall/portal/service/HomeService.java#24-24", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "370eb4b7045b22dc05cf5a6cdde2fe4dfc79c3aa", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/HomeService.java", "language": "Java"}, "method": {"name": "recommendProductList", "qualified_name": "com.macro.mall.portal.service.HomeService#recommendProductList", "start_line": 24, "end_line": 24, "signature": "recommendProductList(Integer pageSize, Integer pageNum)", "original_code": "List<PmsProduct> recommendProductList(Integer pageSize, Integer pageNum);", "doc_comment": "/**\n     * \u9996\u9875\u5546\u54c1\u63a8\u8350\n     */"}, "code_tokens": ["recommendProductList", ";", "List", "(", ",", ")", "<", "PmsProduct", ">", "Integer", "pageSize", "Integer", "pageNum"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 20, "ast_depth": 5, "n_identifiers": 3, "vocab_size": 12, "n_whitespaces": 4, "n_words": 7, "nloc": 1, "token_counts": 13}}
{"dataset_split": "train", "id": "mall@370eb4b:mall-portal/src/main/java/com/macro/mall/portal/service/HomeService.java#30-30", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "370eb4b7045b22dc05cf5a6cdde2fe4dfc79c3aa", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/HomeService.java", "language": "Java"}, "method": {"name": "getProductCateList", "qualified_name": "com.macro.mall.portal.service.HomeService#getProductCateList", "start_line": 30, "end_line": 30, "signature": "getProductCateList(Long parentId)", "original_code": "List<PmsProductCategory> getProductCateList(Long parentId);", "doc_comment": "/**\n     * \u83b7\u53d6\u5546\u54c1\u5206\u7c7b\n     * @param parentId 0:\u83b7\u53d6\u4e00\u7ea7\u5206\u7c7b\uff1b\u5176\u4ed6\uff1a\u83b7\u53d6\u6307\u5b9a\u4e8c\u7ea7\u5206\u7c7b\n     */"}, "code_tokens": ["getProductCateList", ";", "List", "(", ")", "<", "PmsProductCategory", ">", "Long", "parentId"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 16, "ast_depth": 5, "n_identifiers": 2, "vocab_size": 10, "n_whitespaces": 2, "n_words": 5, "nloc": 1, "token_counts": 10}}
{"dataset_split": "train", "id": "mall@370eb4b:mall-portal/src/main/java/com/macro/mall/portal/service/HomeService.java#36-36", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "370eb4b7045b22dc05cf5a6cdde2fe4dfc79c3aa", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/HomeService.java", "language": "Java"}, "method": {"name": "getSubjectList", "qualified_name": "com.macro.mall.portal.service.HomeService#getSubjectList", "start_line": 36, "end_line": 36, "signature": "getSubjectList(Long cateId, Integer pageSize, Integer pageNum)", "original_code": "List<CmsSubject> getSubjectList(Long cateId, Integer pageSize, Integer pageNum);", "doc_comment": "/**\n     * \u6839\u636e\u4e13\u9898\u5206\u7c7bid\u5206\u9875\u83b7\u53d6\u4e13\u9898\n     * @param cateId \u4e13\u9898\u5206\u7c7bid\n     */"}, "code_tokens": ["getSubjectList", ";", "List", "(", ",", ",", ")", "<", "CmsSubject", ">", "Long", "cateId", "Integer", "pageSize", "Integer", "pageNum"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 24, "ast_depth": 5, "n_identifiers": 4, "vocab_size": 14, "n_whitespaces": 6, "n_words": 9, "nloc": 1, "token_counts": 16}}
{"dataset_split": "train", "id": "mall@370eb4b:mall-portal/src/main/java/com/macro/mall/portal/service/HomeService.java#41-41", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "370eb4b7045b22dc05cf5a6cdde2fe4dfc79c3aa", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/HomeService.java", "language": "Java"}, "method": {"name": "hotProductList", "qualified_name": "com.macro.mall.portal.service.HomeService#hotProductList", "start_line": 41, "end_line": 41, "signature": "hotProductList(Integer pageNum, Integer pageSize)", "original_code": "List<PmsProduct> hotProductList(Integer pageNum, Integer pageSize);", "doc_comment": "/**\n     * \u5206\u9875\u83b7\u53d6\u4eba\u6c14\u63a8\u8350\u5546\u54c1\n     */"}, "code_tokens": ["hotProductList", ";", "List", "(", ",", ")", "<", "PmsProduct", ">", "Integer", "pageNum", "Integer", "pageSize"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 20, "ast_depth": 5, "n_identifiers": 3, "vocab_size": 12, "n_whitespaces": 4, "n_words": 7, "nloc": 1, "token_counts": 13}}
{"dataset_split": "train", "id": "mall@370eb4b:mall-portal/src/main/java/com/macro/mall/portal/service/HomeService.java#46-46", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "370eb4b7045b22dc05cf5a6cdde2fe4dfc79c3aa", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/HomeService.java", "language": "Java"}, "method": {"name": "newProductList", "qualified_name": "com.macro.mall.portal.service.HomeService#newProductList", "start_line": 46, "end_line": 46, "signature": "newProductList(Integer pageNum, Integer pageSize)", "original_code": "List<PmsProduct> newProductList(Integer pageNum, Integer pageSize);", "doc_comment": "/**\n     * \u5206\u9875\u83b7\u53d6\u65b0\u54c1\u63a8\u8350\u5546\u54c1\n     */"}, "code_tokens": ["newProductList", ";", "List", "(", ",", ")", "<", "PmsProduct", ">", "Integer", "pageNum", "Integer", "pageSize"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 20, "ast_depth": 5, "n_identifiers": 3, "vocab_size": 12, "n_whitespaces": 4, "n_words": 7, "nloc": 1, "token_counts": 13}}
{"dataset_split": "train", "id": "mall@fcfb799:mall-portal/src/main/java/com/macro/mall/portal/service/MemberAttentionService.java#14-14", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "fcfb799886d5ad598e0ba079bf8ed0ecaf901734", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/MemberAttentionService.java", "language": "Java"}, "method": {"name": "add", "qualified_name": "com.macro.mall.portal.service.MemberAttentionService#add", "start_line": 14, "end_line": 14, "signature": "add(MemberBrandAttention memberBrandAttention)", "original_code": "int add(MemberBrandAttention memberBrandAttention);", "doc_comment": "/**\n     * \u6dfb\u52a0\u5173\u6ce8\n     */"}, "code_tokens": ["add", ";", "int", "(", ")", "MemberBrandAttention", "memberBrandAttention"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 12, "ast_depth": 5, "n_identifiers": 2, "vocab_size": 7, "n_whitespaces": 2, "n_words": 4, "nloc": 1, "token_counts": 7}}
{"dataset_split": "train", "id": "mall@fcfb799:mall-portal/src/main/java/com/macro/mall/portal/service/MemberAttentionService.java#19-19", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "fcfb799886d5ad598e0ba079bf8ed0ecaf901734", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/MemberAttentionService.java", "language": "Java"}, "method": {"name": "delete", "qualified_name": "com.macro.mall.portal.service.MemberAttentionService#delete", "start_line": 19, "end_line": 19, "signature": "delete(Long brandId)", "original_code": "int delete(Long brandId);", "doc_comment": "/**\n     * \u53d6\u6d88\u5173\u6ce8\n     */"}, "code_tokens": ["delete", ";", "int", "(", ")", "Long", "brandId"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 12, "ast_depth": 5, "n_identifiers": 2, "vocab_size": 7, "n_whitespaces": 2, "n_words": 4, "nloc": 1, "token_counts": 7}}
{"dataset_split": "train", "id": "mall@fcfb799:mall-portal/src/main/java/com/macro/mall/portal/service/MemberAttentionService.java#24-24", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "fcfb799886d5ad598e0ba079bf8ed0ecaf901734", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/MemberAttentionService.java", "language": "Java"}, "method": {"name": "list", "qualified_name": "com.macro.mall.portal.service.MemberAttentionService#list", "start_line": 24, "end_line": 24, "signature": "list(Integer pageNum, Integer pageSize)", "original_code": "Page<MemberBrandAttention> list(Integer pageNum, Integer pageSize);", "doc_comment": "/**\n     * \u5206\u9875\u83b7\u53d6\u4f1a\u5458\u5173\u6ce8\u5217\u8868\n     */"}, "code_tokens": ["list", ";", "Page", "(", ",", ")", "<", "MemberBrandAttention", ">", "Integer", "pageNum", "Integer", "pageSize"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 20, "ast_depth": 5, "n_identifiers": 3, "vocab_size": 12, "n_whitespaces": 4, "n_words": 7, "nloc": 1, "token_counts": 13}}
{"dataset_split": "train", "id": "mall@fcfb799:mall-portal/src/main/java/com/macro/mall/portal/service/MemberAttentionService.java#29-29", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "fcfb799886d5ad598e0ba079bf8ed0ecaf901734", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/MemberAttentionService.java", "language": "Java"}, "method": {"name": "detail", "qualified_name": "com.macro.mall.portal.service.MemberAttentionService#detail", "start_line": 29, "end_line": 29, "signature": "detail(Long brandId)", "original_code": "MemberBrandAttention detail(Long brandId);", "doc_comment": "/**\n     * \u83b7\u53d6\u4f1a\u5458\u5173\u6ce8\u8be6\u60c5\n     */"}, "code_tokens": ["MemberBrandAttention", "detail", ";", "(", ")", "Long", "brandId"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 11, "ast_depth": 5, "n_identifiers": 2, "vocab_size": 7, "n_whitespaces": 2, "n_words": 4, "nloc": 1, "token_counts": 7}}
{"dataset_split": "train", "id": "mall@fcfb799:mall-portal/src/main/java/com/macro/mall/portal/service/MemberAttentionService.java#34-34", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "fcfb799886d5ad598e0ba079bf8ed0ecaf901734", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/MemberAttentionService.java", "language": "Java"}, "method": {"name": "clear", "qualified_name": "com.macro.mall.portal.service.MemberAttentionService#clear", "start_line": 34, "end_line": 34, "signature": "clear()", "original_code": "void clear();", "doc_comment": "/**\n     * \u6e05\u7a7a\u5173\u6ce8\u5217\u8868\n     */"}, "code_tokens": ["void", "clear", ";", "(", ")"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 8, "ast_depth": 4, "n_identifiers": 1, "vocab_size": 5, "n_whitespaces": 1, "n_words": 2, "nloc": 1, "token_counts": 5}}
{"dataset_split": "train", "id": "mall@72f4759:mall-portal/src/main/java/com/macro/mall/portal/controller/MemberAttentionController.java#26-36", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "72f47591b05e877a91eb089810f6400d32fc06f9", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/controller/MemberAttentionController.java", "language": "Java"}, "method": {"name": "add", "qualified_name": "com.macro.mall.portal.controller.MemberAttentionController#add", "start_line": 26, "end_line": 36, "signature": "add(@RequestBody MemberBrandAttention memberBrandAttention)", "original_code": "@ApiOperation(\"\u6dfb\u52a0\u54c1\u724c\u5173\u6ce8\")\n    @RequestMapping(value = \"/add\", method = RequestMethod.POST)\n    @ResponseBody\n    public CommonResult add(@RequestBody MemberBrandAttention memberBrandAttention) {\n        int count = memberAttentionService.add(memberBrandAttention);\n        if(count>0){\n            return CommonResult.success(count);\n        }else{\n            return CommonResult.failed();\n        }\n    }", "doc_comment": ""}, "code_tokens": ["CommonResult", "add", "public", "(", ")", "{", "}", "@", "ApiOperation", "@", "RequestMapping", "@", "ResponseBody", "MemberBrandAttention", "memberBrandAttention", ";", "if", "else", "(", ")", "(", ",", ")", "int", "count", "=", "(", ")", "{", "}", "{", "}", "\"", "\u6dfb\u52a0\u54c1\u724c\u5173\u6ce8", "\"", "value", "=", "method", "=", "@", "RequestBody", "memberAttentionService", ".", "add", "count", ">", "0", "return", ";", "return", ";", "\"", "/add", "\"", "RequestMethod", ".", "POST", "(", "memberBrandAttention", ")", "CommonResult", ".", "success", "CommonResult", ".", "failed", "(", "count", ")", "(", ")"], "metrics": {"cyclomatic_complexity": 2, "n_ast_nodes": 105, "ast_depth": 9, "n_identifiers": 15, "vocab_size": 35, "n_whitespaces": 97, "n_words": 31, "nloc": 11, "token_counts": 71}}
{"dataset_split": "train", "id": "mall@72f4759:mall-portal/src/main/java/com/macro/mall/portal/controller/MemberAttentionController.java#38-48", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "72f47591b05e877a91eb089810f6400d32fc06f9", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/controller/MemberAttentionController.java", "language": "Java"}, "method": {"name": "delete", "qualified_name": "com.macro.mall.portal.controller.MemberAttentionController#delete", "start_line": 38, "end_line": 48, "signature": "delete(Long brandId)", "original_code": "@ApiOperation(\"\u53d6\u6d88\u54c1\u724c\u5173\u6ce8\")\n    @RequestMapping(value = \"/delete\", method = RequestMethod.POST)\n    @ResponseBody\n    public CommonResult delete(Long brandId) {\n        int count = memberAttentionService.delete(brandId);\n        if(count>0){\n            return CommonResult.success(count);\n        }else{\n            return CommonResult.failed();\n        }\n    }", "doc_comment": ""}, "code_tokens": ["CommonResult", "delete", "public", "(", ")", "{", "}", "@", "ApiOperation", "@", "RequestMapping", "@", "ResponseBody", "Long", "brandId", ";", "if", "else", "(", ")", "(", ",", ")", "int", "count", "=", "(", ")", "{", "}", "{", "}", "\"", "\u53d6\u6d88\u54c1\u724c\u5173\u6ce8", "\"", "value", "=", "method", "=", "memberAttentionService", ".", "delete", "count", ">", "0", "return", ";", "return", ";", "\"", "/delete", "\"", "RequestMethod", ".", "POST", "(", "brandId", ")", "CommonResult", ".", "success", "CommonResult", ".", "failed", "(", "count", ")", "(", ")"], "metrics": {"cyclomatic_complexity": 2, "n_ast_nodes": 101, "ast_depth": 9, "n_identifiers": 14, "vocab_size": 34, "n_whitespaces": 96, "n_words": 30, "nloc": 11, "token_counts": 69}}
{"dataset_split": "train", "id": "mall@72f4759:mall-portal/src/main/java/com/macro/mall/portal/controller/MemberAttentionController.java#50-57", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "72f47591b05e877a91eb089810f6400d32fc06f9", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/controller/MemberAttentionController.java", "language": "Java"}, "method": {"name": "list", "qualified_name": "com.macro.mall.portal.controller.MemberAttentionController#list", "start_line": 50, "end_line": 57, "signature": "list(@RequestParam(value = \"pageNum\", defaultValue = \"1\") Integer pageNum,\n                                                               @RequestParam(value = \"pageSize\", defaultValue = \"5\") Integer pageSize)", "original_code": "@ApiOperation(\"\u5206\u9875\u67e5\u8be2\u5f53\u524d\u7528\u6237\u54c1\u724c\u5173\u6ce8\u5217\u8868\")\n    @RequestMapping(value = \"/list\", method = RequestMethod.GET)\n    @ResponseBody\n    public CommonResult<CommonPage<MemberBrandAttention>> list(@RequestParam(value = \"pageNum\", defaultValue = \"1\") Integer pageNum,\n                                                               @RequestParam(value = \"pageSize\", defaultValue = \"5\") Integer pageSize) {\n        Page<MemberBrandAttention> page = memberAttentionService.list(pageNum,pageSize);\n        return CommonResult.success(CommonPage.restPage(page));\n    }", "doc_comment": ""}, "code_tokens": ["list", "public", "CommonResult", "(", ",", ")", "{", "}", "@", "ApiOperation", "@", "RequestMapping", "@", "ResponseBody", "<", ">", "Integer", "pageNum", "Integer", "pageSize", ";", "return", ";", "(", ")", "(", ",", ")", "CommonPage", "Page", "page", "=", "CommonResult", ".", "success", "\"", "\u5206\u9875\u67e5\u8be2\u5f53\u524d\u7528\u6237\u54c1\u724c\u5173\u6ce8\u5217\u8868", "\"", "value", "=", "method", "=", "<", "MemberBrandAttention", ">", "@", "RequestParam", "@", "RequestParam", "<", "MemberBrandAttention", ">", "memberAttentionService", ".", "list", "(", ")", "\"", "/list", "\"", "RequestMethod", ".", "GET", "(", ",", ")", "(", ",", ")", "(", "pageNum", ",", "pageSize", ")", "CommonPage", ".", "restPage", "value", "=", "defaultValue", "=", "value", "=", "defaultValue", "=", "(", "page", ")", "\"", "pageNum", "\"", "\"", "1", "\"", "\"", "pageSize", "\"", "\"", "5", "\""], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 146, "ast_depth": 10, "n_identifiers": 18, "vocab_size": 39, "n_whitespaces": 128, "n_words": 41, "nloc": 8, "token_counts": 100}}
{"dataset_split": "train", "id": "mall@72f4759:mall-portal/src/main/java/com/macro/mall/portal/controller/MemberAttentionController.java#59-65", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "72f47591b05e877a91eb089810f6400d32fc06f9", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/controller/MemberAttentionController.java", "language": "Java"}, "method": {"name": "detail", "qualified_name": "com.macro.mall.portal.controller.MemberAttentionController#detail", "start_line": 59, "end_line": 65, "signature": "detail(@RequestParam Long brandId)", "original_code": "@ApiOperation(\"\u6839\u636e\u54c1\u724cID\u83b7\u53d6\u54c1\u724c\u5173\u6ce8\u8be6\u60c5\")\n    @RequestMapping(value = \"/detail\", method = RequestMethod.GET)\n    @ResponseBody\n    public CommonResult<MemberBrandAttention> detail(@RequestParam Long brandId) {\n        MemberBrandAttention memberBrandAttention = memberAttentionService.detail(brandId);\n        return CommonResult.success(memberBrandAttention);\n    }", "doc_comment": ""}, "code_tokens": ["detail", "public", "CommonResult", "(", ")", "{", "}", "@", "ApiOperation", "@", "RequestMapping", "@", "ResponseBody", "<", "MemberBrandAttention", ">", "Long", "brandId", "MemberBrandAttention", ";", "return", ";", "(", ")", "(", ",", ")", "memberBrandAttention", "=", "CommonResult", ".", "success", "\"", "\u6839\u636e\u54c1\u724cID\u83b7\u53d6\u54c1\u724c\u5173\u6ce8\u8be6\u60c5", "\"", "value", "=", "method", "=", "@", "RequestParam", "memberAttentionService", ".", "detail", "(", "memberBrandAttention", ")", "\"", "/detail", "\"", "RequestMethod", ".", "GET", "(", "brandId", ")"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 83, "ast_depth": 8, "n_identifiers": 14, "vocab_size": 32, "n_whitespaces": 52, "n_words": 25, "nloc": 7, "token_counts": 56}}
{"dataset_split": "train", "id": "mall@72f4759:mall-portal/src/main/java/com/macro/mall/portal/controller/MemberAttentionController.java#67-73", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "72f47591b05e877a91eb089810f6400d32fc06f9", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/controller/MemberAttentionController.java", "language": "Java"}, "method": {"name": "clear", "qualified_name": "com.macro.mall.portal.controller.MemberAttentionController#clear", "start_line": 67, "end_line": 73, "signature": "clear()", "original_code": "@ApiOperation(\"\u6e05\u7a7a\u5f53\u524d\u7528\u6237\u54c1\u724c\u5173\u6ce8\u5217\u8868\")\n    @RequestMapping(value = \"/clear\", method = RequestMethod.POST)\n    @ResponseBody\n    public CommonResult clear() {\n        memberAttentionService.clear();\n        return CommonResult.success(null);\n    }", "doc_comment": ""}, "code_tokens": ["CommonResult", "clear", "public", "(", ")", "{", "}", "@", "ApiOperation", "@", "RequestMapping", "@", "ResponseBody", ";", "return", ";", "(", ")", "(", ",", ")", "memberAttentionService", ".", "clear", "CommonResult", ".", "success", "\"", "\u6e05\u7a7a\u5f53\u524d\u7528\u6237\u54c1\u724c\u5173\u6ce8\u5217\u8868", "\"", "value", "=", "method", "=", "(", ")", "(", "null", ")", "\"", "/clear", "\"", "RequestMethod", ".", "POST"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 66, "ast_depth": 8, "n_identifiers": 11, "vocab_size": 26, "n_whitespaces": 47, "n_words": 18, "nloc": 7, "token_counts": 45}}
{"dataset_split": "train", "id": "mall@c824eac:mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java#71-93", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "c824eacdb7758fe19ce801b5bd18a2bd2f275991", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java", "language": "Java"}, "method": {"name": "generateConfirmOrder", "qualified_name": "com.macro.mall.portal.service.impl.OmsPortalOrderServiceImpl#generateConfirmOrder", "start_line": 71, "end_line": 93, "signature": "generateConfirmOrder(List<Long> cartIds)", "original_code": "@Override\n    public ConfirmOrderResult generateConfirmOrder(List<Long> cartIds) {\n        ConfirmOrderResult result = new ConfirmOrderResult();\n        //\u83b7\u53d6\u8d2d\u7269\u8f66\u4fe1\u606f\n        UmsMember currentMember = memberService.getCurrentMember();\n        List<CartPromotionItem> cartPromotionItemList = cartItemService.listPromotion(currentMember.getId(),cartIds);\n        result.setCartPromotionItemList(cartPromotionItemList);\n        //\u83b7\u53d6\u7528\u6237\u6536\u8d27\u5730\u5740\u5217\u8868\n        List<UmsMemberReceiveAddress> memberReceiveAddressList = memberReceiveAddressService.list();\n        result.setMemberReceiveAddressList(memberReceiveAddressList);\n        //\u83b7\u53d6\u7528\u6237\u53ef\u7528\u4f18\u60e0\u5238\u5217\u8868\n        List<SmsCouponHistoryDetail> couponHistoryDetailList = memberCouponService.listCart(cartPromotionItemList, 1);\n        result.setCouponHistoryDetailList(couponHistoryDetailList);\n        //\u83b7\u53d6\u7528\u6237\u79ef\u5206\n        result.setMemberIntegration(currentMember.getIntegration());\n        //\u83b7\u53d6\u79ef\u5206\u4f7f\u7528\u89c4\u5219\n        UmsIntegrationConsumeSetting integrationConsumeSetting = integrationConsumeSettingMapper.selectByPrimaryKey(1L);\n        result.setIntegrationConsumeSetting(integrationConsumeSetting);\n        //\u8ba1\u7b97\u603b\u91d1\u989d\u3001\u6d3b\u52a8\u4f18\u60e0\u3001\u5e94\u4ed8\u91d1\u989d\n        ConfirmOrderResult.CalcAmount calcAmount = calcCartAmount(cartPromotionItemList);\n        result.setCalcAmount(calcAmount);\n        return result;\n    }", "doc_comment": ""}, "code_tokens": ["ConfirmOrderResult", "generateConfirmOrder", "public", "(", ")", "{", "//\u83b7\u53d6\u8d2d\u7269\u8f66\u4fe1\u606f", "//\u83b7\u53d6\u7528\u6237\u6536\u8d27\u5730\u5740\u5217\u8868", "//\u83b7\u53d6\u7528\u6237\u53ef\u7528\u4f18\u60e0\u5238\u5217\u8868", "//\u83b7\u53d6\u7528\u6237\u79ef\u5206", "//\u83b7\u53d6\u79ef\u5206\u4f7f\u7528\u89c4\u5219", "//\u8ba1\u7b97\u603b\u91d1\u989d\u3001\u6d3b\u52a8\u4f18\u60e0\u3001\u5e94\u4ed8\u91d1\u989d", "}", "@", "Override", "cartIds", "ConfirmOrderResult", ";", "UmsMember", ";", ";", ";", ";", ";", ";", ";", ";", "UmsIntegrationConsumeSetting", ";", ";", ";", ";", "return", "result", ";", "List", "result", "=", "currentMember", "=", "List", "cartPromotionItemList", "=", "result", ".", "setCartPromotionItemList", "List", "memberReceiveAddressList", "=", "result", ".", "setMemberReceiveAddressList", "List", "couponHistoryDetailList", "=", "result", ".", "setCouponHistoryDetailList", "result", ".", "setMemberIntegration", "integrationConsumeSetting", "=", "result", ".", "setIntegrationConsumeSetting", "ConfirmOrderResult", ".", "CalcAmount", "calcAmount", "=", "result", ".", "setCalcAmount", "<", "Long", ">", "new", "ConfirmOrderResult", "memberService", ".", "getCurrentMember", "<", "CartPromotionItem", ">", "cartItemService", ".", "listPromotion", "(", "cartPromotionItemList", ")", "<", "UmsMemberReceiveAddress", ">", "memberReceiveAddressService", ".", "list", "(", "memberReceiveAddressList", ")", "<", "SmsCouponHistoryDetail", ">", "memberCouponService", ".", "listCart", "(", "couponHistoryDetailList", ")", "(", ")", "integrationConsumeSettingMapper", ".", "selectByPrimaryKey", "(", "integrationConsumeSetting", ")", "calcCartAmount", "(", "calcAmount", ")", "(", ")", "(", ")", "(", ",", "cartIds", ")", "(", ")", "(", "cartPromotionItemList", ",", "1", ")", "currentMember", ".", "getIntegration", "(", "1L", ")", "(", "cartPromotionItemList", ")", "currentMember", ".", "getId", "(", ")", "(", ")"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 219, "ast_depth": 10, "n_identifiers": 29, "vocab_size": 60, "n_whitespaces": 218, "n_words": 74, "nloc": 23, "token_counts": 152}}
{"dataset_split": "train", "id": "mall@c824eac:mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java#95-252", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "c824eacdb7758fe19ce801b5bd18a2bd2f275991", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java", "language": "Java"}, "method": {"name": "generateOrder", "qualified_name": "com.macro.mall.portal.service.impl.OmsPortalOrderServiceImpl#generateOrder", "start_line": 95, "end_line": 252, "signature": "generateOrder(OrderParam orderParam)", "original_code": "@Override\n    public Map<String, Object> generateOrder(OrderParam orderParam) {\n        List<OmsOrderItem> orderItemList = new ArrayList<>();\n        //\u6821\u9a8c\u6536\u8d27\u5730\u5740\n        if(orderParam.getMemberReceiveAddressId()==null){\n            Asserts.fail(\"\u8bf7\u9009\u62e9\u6536\u8d27\u5730\u5740\uff01\");\n        }\n        //\u83b7\u53d6\u8d2d\u7269\u8f66\u53ca\u4f18\u60e0\u4fe1\u606f\n        UmsMember currentMember = memberService.getCurrentMember();\n        List<CartPromotionItem> cartPromotionItemList = cartItemService.listPromotion(currentMember.getId(), orderParam.getCartIds());\n        for (CartPromotionItem cartPromotionItem : cartPromotionItemList) {\n            //\u751f\u6210\u4e0b\u5355\u5546\u54c1\u4fe1\u606f\n            OmsOrderItem orderItem = new OmsOrderItem();\n            orderItem.setProductId(cartPromotionItem.getProductId());\n            orderItem.setProductName(cartPromotionItem.getProductName());\n            orderItem.setProductPic(cartPromotionItem.getProductPic());\n            orderItem.setProductAttr(cartPromotionItem.getProductAttr());\n            orderItem.setProductBrand(cartPromotionItem.getProductBrand());\n            orderItem.setProductSn(cartPromotionItem.getProductSn());\n            orderItem.setProductPrice(cartPromotionItem.getPrice());\n            orderItem.setProductQuantity(cartPromotionItem.getQuantity());\n            orderItem.setProductSkuId(cartPromotionItem.getProductSkuId());\n            orderItem.setProductSkuCode(cartPromotionItem.getProductSkuCode());\n            orderItem.setProductCategoryId(cartPromotionItem.getProductCategoryId());\n            orderItem.setPromotionAmount(cartPromotionItem.getReduceAmount());\n            orderItem.setPromotionName(cartPromotionItem.getPromotionMessage());\n            orderItem.setGiftIntegration(cartPromotionItem.getIntegration());\n            orderItem.setGiftGrowth(cartPromotionItem.getGrowth());\n            orderItemList.add(orderItem);\n        }\n        //\u5224\u65ad\u8d2d\u7269\u8f66\u4e2d\u5546\u54c1\u662f\u5426\u90fd\u6709\u5e93\u5b58\n        if (!hasStock(cartPromotionItemList)) {\n            Asserts.fail(\"\u5e93\u5b58\u4e0d\u8db3\uff0c\u65e0\u6cd5\u4e0b\u5355\");\n        }\n        //\u5224\u65ad\u4f7f\u7528\u4f7f\u7528\u4e86\u4f18\u60e0\u5238\n        if (orderParam.getCouponId() == null) {\n            //\u4e0d\u7528\u4f18\u60e0\u5238\n            for (OmsOrderItem orderItem : orderItemList) {\n                orderItem.setCouponAmount(new BigDecimal(0));\n            }\n        } else {\n            //\u4f7f\u7528\u4f18\u60e0\u5238\n            SmsCouponHistoryDetail couponHistoryDetail = getUseCoupon(cartPromotionItemList, orderParam.getCouponId());\n            if (couponHistoryDetail == null) {\n                Asserts.fail(\"\u8be5\u4f18\u60e0\u5238\u4e0d\u53ef\u7528\");\n            }\n            //\u5bf9\u4e0b\u5355\u5546\u54c1\u7684\u4f18\u60e0\u5238\u8fdb\u884c\u5904\u7406\n            handleCouponAmount(orderItemList, couponHistoryDetail);\n        }\n        //\u5224\u65ad\u662f\u5426\u4f7f\u7528\u79ef\u5206\n        if (orderParam.getUseIntegration() == null||orderParam.getUseIntegration().equals(0)) {\n            //\u4e0d\u4f7f\u7528\u79ef\u5206\n            for (OmsOrderItem orderItem : orderItemList) {\n                orderItem.setIntegrationAmount(new BigDecimal(0));\n            }\n        } else {\n            //\u4f7f\u7528\u79ef\u5206\n            BigDecimal totalAmount = calcTotalAmount(orderItemList);\n            BigDecimal integrationAmount = getUseIntegrationAmount(orderParam.getUseIntegration(), totalAmount, currentMember, orderParam.getCouponId() != null);\n            if (integrationAmount.compareTo(new BigDecimal(0)) == 0) {\n                Asserts.fail(\"\u79ef\u5206\u4e0d\u53ef\u7528\");\n            } else {\n                //\u53ef\u7528\u60c5\u51b5\u4e0b\u5206\u644a\u5230\u53ef\u7528\u5546\u54c1\u4e2d\n                for (OmsOrderItem orderItem : orderItemList) {\n                    BigDecimal perAmount = orderItem.getProductPrice().divide(totalAmount, 3, RoundingMode.HALF_EVEN).multiply(integrationAmount);\n                    orderItem.setIntegrationAmount(perAmount);\n                }\n            }\n        }\n        //\u8ba1\u7b97order_item\u7684\u5b9e\u4ed8\u91d1\u989d\n        handleRealAmount(orderItemList);\n        //\u8fdb\u884c\u5e93\u5b58\u9501\u5b9a\n        lockStock(cartPromotionItemList);\n        //\u6839\u636e\u5546\u54c1\u5408\u8ba1\u3001\u8fd0\u8d39\u3001\u6d3b\u52a8\u4f18\u60e0\u3001\u4f18\u60e0\u5238\u3001\u79ef\u5206\u8ba1\u7b97\u5e94\u4ed8\u91d1\u989d\n        OmsOrder order = new OmsOrder();\n        order.setDiscountAmount(new BigDecimal(0));\n        order.setTotalAmount(calcTotalAmount(orderItemList));\n        order.setFreightAmount(new BigDecimal(0));\n        order.setPromotionAmount(calcPromotionAmount(orderItemList));\n        order.setPromotionInfo(getOrderPromotionInfo(orderItemList));\n        if (orderParam.getCouponId() == null) {\n            order.setCouponAmount(new BigDecimal(0));\n        } else {\n            order.setCouponId(orderParam.getCouponId());\n            order.setCouponAmount(calcCouponAmount(orderItemList));\n        }\n        if (orderParam.getUseIntegration() == null) {\n            order.setIntegration(0);\n            order.setIntegrationAmount(new BigDecimal(0));\n        } else {\n            order.setIntegration(orderParam.getUseIntegration());\n            order.setIntegrationAmount(calcIntegrationAmount(orderItemList));\n        }\n        order.setPayAmount(calcPayAmount(order));\n        //\u8f6c\u5316\u4e3a\u8ba2\u5355\u4fe1\u606f\u5e76\u63d2\u5165\u6570\u636e\u5e93\n        order.setMemberId(currentMember.getId());\n        order.setCreateTime(new Date());\n        order.setMemberUsername(currentMember.getUsername());\n        //\u652f\u4ed8\u65b9\u5f0f\uff1a0->\u672a\u652f\u4ed8\uff1b1->\u652f\u4ed8\u5b9d\uff1b2->\u5fae\u4fe1\n        order.setPayType(orderParam.getPayType());\n        //\u8ba2\u5355\u6765\u6e90\uff1a0->PC\u8ba2\u5355\uff1b1->app\u8ba2\u5355\n        order.setSourceType(1);\n        //\u8ba2\u5355\u72b6\u6001\uff1a0->\u5f85\u4ed8\u6b3e\uff1b1->\u5f85\u53d1\u8d27\uff1b2->\u5df2\u53d1\u8d27\uff1b3->\u5df2\u5b8c\u6210\uff1b4->\u5df2\u5173\u95ed\uff1b5->\u65e0\u6548\u8ba2\u5355\n        order.setStatus(0);\n        //\u8ba2\u5355\u7c7b\u578b\uff1a0->\u6b63\u5e38\u8ba2\u5355\uff1b1->\u79d2\u6740\u8ba2\u5355\n        order.setOrderType(0);\n        //\u6536\u8d27\u4eba\u4fe1\u606f\uff1a\u59d3\u540d\u3001\u7535\u8bdd\u3001\u90ae\u7f16\u3001\u5730\u5740\n        UmsMemberReceiveAddress address = memberReceiveAddressService.getItem(orderParam.getMemberReceiveAddressId());\n        order.setReceiverName(address.getName());\n        order.setReceiverPhone(address.getPhoneNumber());\n        order.setReceiverPostCode(address.getPostCode());\n        order.setReceiverProvince(address.getProvince());\n        order.setReceiverCity(address.getCity());\n        order.setReceiverRegion(address.getRegion());\n        order.setReceiverDetailAddress(address.getDetailAddress());\n        //0->\u672a\u786e\u8ba4\uff1b1->\u5df2\u786e\u8ba4\n        order.setConfirmStatus(0);\n        order.setDeleteStatus(0);\n        //\u8ba1\u7b97\u8d60\u9001\u79ef\u5206\n        order.setIntegration(calcGifIntegration(orderItemList));\n        //\u8ba1\u7b97\u8d60\u9001\u6210\u957f\u503c\n        order.setGrowth(calcGiftGrowth(orderItemList));\n        //\u751f\u6210\u8ba2\u5355\u53f7\n        order.setOrderSn(generateOrderSn(order));\n        //\u8bbe\u7f6e\u81ea\u52a8\u6536\u8d27\u5929\u6570\n        List<OmsOrderSetting> orderSettings = orderSettingMapper.selectByExample(new OmsOrderSettingExample());\n        if(CollUtil.isNotEmpty(orderSettings)){\n            order.setAutoConfirmDay(orderSettings.get(0).getConfirmOvertime());\n        }\n        // TODO: 2018/9/3 bill_*,delivery_*\n        //\u63d2\u5165order\u8868\u548corder_item\u8868\n        orderMapper.insert(order);\n        for (OmsOrderItem orderItem : orderItemList) {\n            orderItem.setOrderId(order.getId());\n            orderItem.setOrderSn(order.getOrderSn());\n        }\n        orderItemDao.insertList(orderItemList);\n        //\u5982\u4f7f\u7528\u4f18\u60e0\u5238\u66f4\u65b0\u4f18\u60e0\u5238\u4f7f\u7528\u72b6\u6001\n        if (orderParam.getCouponId() != null) {\n            updateCouponStatus(orderParam.getCouponId(), currentMember.getId(), 1);\n        }\n        //\u5982\u4f7f\u7528\u79ef\u5206\u9700\u8981\u6263\u9664\u79ef\u5206\n        if (orderParam.getUseIntegration() != null) {\n            order.setUseIntegration(orderParam.getUseIntegration());\n            if(currentMember.getIntegration()==null){\n                currentMember.setIntegration(0);\n            }\n            memberService.updateIntegration(currentMember.getId(), currentMember.getIntegration() - orderParam.getUseIntegration());\n        }\n        //\u5220\u9664\u8d2d\u7269\u8f66\u4e2d\u7684\u4e0b\u5355\u5546\u54c1\n        deleteCartItemList(cartPromotionItemList, currentMember);\n        //\u53d1\u9001\u5ef6\u8fdf\u6d88\u606f\u53d6\u6d88\u8ba2\u5355\n        sendDelayMessageCancelOrder(order.getId());\n        Map<String, Object> result = new HashMap<>();\n        result.put(\"order\", order);\n        result.put(\"orderItemList\", orderItemList);\n        return result;\n    }", "doc_comment": ""}, "code_tokens": ["generateOrder", "public", "Map", "(", ")", "{", "//\u6821\u9a8c\u6536\u8d27\u5730\u5740", "//\u83b7\u53d6\u8d2d\u7269\u8f66\u53ca\u4f18\u60e0\u4fe1\u606f", "//\u5224\u65ad\u8d2d\u7269\u8f66\u4e2d\u5546\u54c1\u662f\u5426\u90fd\u6709\u5e93\u5b58", "//\u5224\u65ad\u4f7f\u7528\u4f7f\u7528\u4e86\u4f18\u60e0\u5238", "//\u5224\u65ad\u662f\u5426\u4f7f\u7528\u79ef\u5206", "//\u8ba1\u7b97order_item\u7684\u5b9e\u4ed8\u91d1\u989d", "//\u8fdb\u884c\u5e93\u5b58\u9501\u5b9a", "//\u6839\u636e\u5546\u54c1\u5408\u8ba1\u3001\u8fd0\u8d39\u3001\u6d3b\u52a8\u4f18\u60e0\u3001\u4f18\u60e0\u5238\u3001\u79ef\u5206\u8ba1\u7b97\u5e94\u4ed8\u91d1\u989d", "//\u8f6c\u5316\u4e3a\u8ba2\u5355\u4fe1\u606f\u5e76\u63d2\u5165\u6570\u636e\u5e93", "//\u652f\u4ed8\u65b9\u5f0f\uff1a0->\u672a\u652f\u4ed8\uff1b1->\u652f\u4ed8\u5b9d\uff1b2->\u5fae\u4fe1", "//\u8ba2\u5355\u6765\u6e90\uff1a0->PC\u8ba2\u5355\uff1b1->app\u8ba2\u5355", "//\u8ba2\u5355\u72b6\u6001\uff1a0->\u5f85\u4ed8\u6b3e\uff1b1->\u5f85\u53d1\u8d27\uff1b2->\u5df2\u53d1\u8d27\uff1b3->\u5df2\u5b8c\u6210\uff1b4->\u5df2\u5173\u95ed\uff1b5->\u65e0\u6548\u8ba2\u5355", "//\u8ba2\u5355\u7c7b\u578b\uff1a0->\u6b63\u5e38\u8ba2\u5355\uff1b1->\u79d2\u6740\u8ba2\u5355", "//\u6536\u8d27\u4eba\u4fe1\u606f\uff1a\u59d3\u540d\u3001\u7535\u8bdd\u3001\u90ae\u7f16\u3001\u5730\u5740", "//0->\u672a\u786e\u8ba4\uff1b1->\u5df2\u786e\u8ba4", "//\u8ba1\u7b97\u8d60\u9001\u79ef\u5206", "//\u8ba1\u7b97\u8d60\u9001\u6210\u957f\u503c", "//\u751f\u6210\u8ba2\u5355\u53f7", "//\u8bbe\u7f6e\u81ea\u52a8\u6536\u8d27\u5929\u6570", "// TODO: 2018/9/3 bill_*,delivery_*", "//\u63d2\u5165order\u8868\u548corder_item\u8868", "//\u5982\u4f7f\u7528\u4f18\u60e0\u5238\u66f4\u65b0\u4f18\u60e0\u5238\u4f7f\u7528\u72b6\u6001", "//\u5982\u4f7f\u7528\u79ef\u5206\u9700\u8981\u6263\u9664\u79ef\u5206", "//\u5220\u9664\u8d2d\u7269\u8f66\u4e2d\u7684\u4e0b\u5355\u5546\u54c1", "//\u53d1\u9001\u5ef6\u8fdf\u6d88\u606f\u53d6\u6d88\u8ba2\u5355", "}", "@", "Override", "<", "String", ",", "Object", ">", "OrderParam", "orderParam", ";", "if", "UmsMember", ";", ";", "for", "(", "CartPromotionItem", "cartPromotionItem", ":", "cartPromotionItemList", ")", "if", "if", "else", "if", "else", ";", ";", "OmsOrder", ";", ";", ";", ";", ";", ";", "if", "else", "if", "else", ";", ";", ";", ";", ";", ";", ";", ";", "UmsMemberReceiveAddress", ";", ";", ";", ";", ";", ";", ";", ";", ";", ";", ";", ";", ";", ";", "if", ";", "for", "(", "OmsOrderItem", "orderItem", ":", "orderItemList", ")", ";", "if", "if", ";", ";", ";", ";", ";", "return", "result", ";", "List", "orderItemList", "=", "(", ")", "{", "}", "currentMember", "=", "List", "cartPromotionItemList", "=", "{", "//\u751f\u6210\u4e0b\u5355\u5546\u54c1\u4fe1\u606f", "}", "(", ")", "{", "}", "(", ")", "{", "//\u4e0d\u7528\u4f18\u60e0\u5238", "}", "{", "//\u4f7f\u7528\u4f18\u60e0\u5238", "//\u5bf9\u4e0b\u5355\u5546\u54c1\u7684\u4f18\u60e0\u5238\u8fdb\u884c\u5904\u7406", "}", "(", ")", "{", "//\u4e0d\u4f7f\u7528\u79ef\u5206", "}", "{", "//\u4f7f\u7528\u79ef\u5206", "}", "handleRealAmount", "lockStock", "order", "=", "order", ".", "setDiscountAmount", "order", ".", "setTotalAmount", "order", ".", "setFreightAmount", "order", ".", "setPromotionAmount", "order", ".", "setPromotionInfo", "(", ")", "{", "}", "{", "}", "(", ")", "{", "}", "{", "}", "order", ".", "setPayAmount", "order", ".", "setMemberId", "order", ".", "setCreateTime", "order", ".", "setMemberUsername", "order", ".", "setPayType", "order", ".", "setSourceType", "order", ".", "setStatus", "order", ".", "setOrderType", "address", "=", "order", ".", "setReceiverName", "order", ".", "setReceiverPhone", "order", ".", "setReceiverPostCode", "order", ".", "setReceiverProvince", "order", ".", "setReceiverCity", "order", ".", "setReceiverRegion", "order", ".", "setReceiverDetailAddress", "order", ".", "setConfirmStatus", "order", ".", "setDeleteStatus", "order", ".", "setIntegration", "order", ".", "setGrowth", "order", ".", "setOrderSn", "List", "orderSettings", "=", "(", ")", "{", "}", "orderMapper", ".", "insert", "{", "}", "orderItemDao", ".", "insertList", "(", ")", "{", "}", "(", ")", "{", "}", "deleteCartItemList", "sendDelayMessageCancelOrder", "Map", "result", "=", "result", ".", "put", "result", ".", "put", "<", "OmsOrderItem", ">", "new", "==", "null", ";", "memberService", ".", "getCurrentMember", "<", "CartPromotionItem", ">", "cartItemService", ".", "listPromotion", "OmsOrderItem", ";", ";", ";", ";", ";", ";", ";", ";", ";", ";", ";", ";", ";", ";", ";", ";", ";", "!", ";", "==", "null", "for", "(", "OmsOrderItem", "orderItem", ":", "orderItemList", ")", "SmsCouponHistoryDetail", ";", "if", ";", "||", "for", "(", "OmsOrderItem", "orderItem", ":", "orderItemList", ")", "BigDecimal", ";", "BigDecimal", ";", "if", "else", "(", "orderItemList", ")", "(", "cartPromotionItemList", ")", "new", "OmsOrder", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "==", "null", ";", ";", ";", "==", "null", ";", ";", ";", ";", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", "1", ")", "(", "0", ")", "(", "0", ")", "memberReceiveAddressService", ".", "getItem", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", "0", ")", "(", "0", ")", "(", ")", "(", ")", "(", ")", "<", "OmsOrderSetting", ">", "orderSettingMapper", ".", "selectByExample", "CollUtil", ".", "isNotEmpty", ";", "(", "order", ")", ";", ";", "(", "orderItemList", ")", "!=", "null", ";", "!=", "null", ";", "if", ";", "(", "cartPromotionItemList", ",", "currentMember", ")", "(", ")", "<", "String", ",", "Object", ">", "new", "(", ",", "order", ")", "(", ",", "orderItemList", ")", "ArrayList", "(", ")", "orderParam", ".", "getMemberReceiveAddressId", "Asserts", ".", "fail", "(", ")", "(", ",", ")", "orderItem", "=", "orderItem", ".", "setProductId", "orderItem", ".", "setProductName", "orderItem", ".", "setProductPic", "orderItem", ".", "setProductAttr", "orderItem", ".", "setProductBrand", "orderItem", ".", "setProductSn", "orderItem", ".", "setProductPrice", "orderItem", ".", "setProductQuantity", "orderItem", ".", "setProductSkuId", "orderItem", ".", "setProductSkuCode", "orderItem", ".", "setProductCategoryId", "orderItem", ".", "setPromotionAmount", "orderItem", ".", "setPromotionName", "orderItem", ".", "setGiftIntegration", "orderItem", ".", "setGiftGrowth", "orderItemList", ".", "add", "hasStock", "Asserts", ".", "fail", "orderParam", ".", "getCouponId", "{", "}", "couponHistoryDetail", "=", "(", ")", "{", "}", "handleCouponAmount", "==", "null", ".", "equals", "{", "}", "totalAmount", "=", "integrationAmount", "=", "(", ")", "{", "}", "{", "//\u53ef\u7528\u60c5\u51b5\u4e0b\u5206\u644a\u5230\u53ef\u7528\u5546\u54c1\u4e2d", "}", "(", ")", "new", "BigDecimal", "calcTotalAmount", "new", "BigDecimal", "calcPromotionAmount", "getOrderPromotionInfo", "orderParam", ".", "getCouponId", "order", ".", "setCouponAmount", "order", ".", "setCouponId", "order", ".", "setCouponAmount", "orderParam", ".", "getUseIntegration", "order", ".", "setIntegration", "order", ".", "setIntegrationAmount", "order", ".", "setIntegration", "order", ".", "setIntegrationAmount", "calcPayAmount", "currentMember", ".", "getId", "new", "Date", "currentMember", ".", "getUsername", "orderParam", ".", "getPayType", "(", ")", "address", ".", "getName", "address", ".", "getPhoneNumber", "address", ".", "getPostCode", "address", ".", "getProvince", "address", ".", "getCity", "address", ".", "getRegion", "address", ".", "getDetailAddress", "calcGifIntegration", "calcGiftGrowth", "generateOrderSn", "(", ")", "(", "orderSettings", ")", "order", ".", "setAutoConfirmDay", "orderItem", ".", "setOrderId", "orderItem", ".", "setOrderSn", "orderParam", ".", "getCouponId", "updateCouponStatus", "orderParam", ".", "getUseIntegration", "order", ".", "setUseIntegration", "(", ")", "{", "}", "memberService", ".", "updateIntegration", "order", ".", "getId", "HashMap", "(", ")", "\"", "order", "\"", "\"", "orderItemList", "\"", "<", ">", "(", ")", "(", ")", "currentMember", ".", "getId", "orderParam", ".", "getCartIds", "new", "OmsOrderItem", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", "orderItem", ")", "(", "cartPromotionItemList", ")", "(", ")", "(", ")", ";", "getUseCoupon", "couponHistoryDetail", "==", "null", ";", "(", "orderItemList", ",", "couponHistoryDetail", ")", "orderParam", ".", "getUseIntegration", "orderParam", ".", "getUseIntegration", "(", "0", ")", ";", "calcTotalAmount", "getUseIntegrationAmount", "==", "0", ";", "for", "(", "OmsOrderItem", "orderItem", ":", "orderItemList", ")", "(", "0", ")", "(", "orderItemList", ")", "(", "0", ")", "(", "orderItemList", ")", "(", "orderItemList", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", "0", ")", "(", ")", "(", ")", "(", ")", "(", "order", ")", "(", ")", "(", ")", "(", ")", "(", ")", "orderParam", ".", "getMemberReceiveAddressId", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", "orderItemList", ")", "(", "orderItemList", ")", "(", "order", ")", "new", "OmsOrderSettingExample", "(", ")", "(", ")", "(", ")", "(", ")", "(", ",", ",", "1", ")", "(", ")", "(", ")", "==", "null", ";", "(", ",", ")", "(", ")", "<", ">", "\"", "\u8bf7\u9009\u62e9\u6536\u8d27\u5730\u5740\uff01", "\"", "(", ")", "(", ")", "(", ")", "cartPromotionItem", ".", "getProductId", "cartPromotionItem", ".", "getProductName", "cartPromotionItem", ".", "getProductPic", "cartPromotionItem", ".", "getProductAttr", "cartPromotionItem", ".", "getProductBrand", "cartPromotionItem", ".", "getProductSn", "cartPromotionItem", ".", "getPrice", "cartPromotionItem", ".", "getQuantity", "cartPromotionItem", ".", "getProductSkuId", "cartPromotionItem", ".", "getProductSkuCode", "cartPromotionItem", ".", "getProductCategoryId", "cartPromotionItem", ".", "getReduceAmount", "cartPromotionItem", ".", "getPromotionMessage", "cartPromotionItem", ".", "getIntegration", "cartPromotionItem", ".", "getGrowth", "\"", "\u5e93\u5b58\u4e0d\u8db3\uff0c\u65e0\u6cd5\u4e0b\u5355", "\"", "orderItem", ".", "setCouponAmount", "(", "cartPromotionItemList", ",", ")", "Asserts", ".", "fail", "(", ")", "(", ")", "orderItem", ".", "setIntegrationAmount", "(", "orderItemList", ")", "(", ",", "totalAmount", ",", "currentMember", ",", ")", "integrationAmount", ".", "compareTo", "Asserts", ".", "fail", "{", "}", "new", "BigDecimal", "orderParam", ".", "getCouponId", "calcCouponAmount", "new", "BigDecimal", "orderParam", ".", "getUseIntegration", "calcIntegrationAmount", "(", ")", "(", ")", ".", "getConfirmOvertime", "order", ".", "getId", "order", ".", "getOrderSn", "orderParam", ".", "getCouponId", "currentMember", ".", "getId", "orderParam", ".", "getUseIntegration", "currentMember", ".", "getIntegration", "currentMember", ".", "setIntegration", "currentMember", ".", "getId", "-", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "orderParam", ".", "getCouponId", "(", ")", "(", ")", "orderParam", ".", "getUseIntegration", "!=", "null", "(", ")", "(", ")", "BigDecimal", ";", ";", "(", "0", ")", "(", ")", "(", "orderItemList", ")", "(", "0", ")", "(", ")", "(", "orderItemList", ")", "orderSettings", ".", "get", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", "0", ")", "(", ")", "currentMember", ".", "getIntegration", "orderParam", ".", "getUseIntegration", "new", "BigDecimal", "(", ")", "\"", "\u8be5\u4f18\u60e0\u5238\u4e0d\u53ef\u7528", "\"", "new", "BigDecimal", "(", ")", "orderParam", ".", "getCouponId", "new", "BigDecimal", "\"", "\u79ef\u5206\u4e0d\u53ef\u7528", "\"", "perAmount", "=", "orderItem", ".", "setIntegrationAmount", "(", "0", ")", "(", ")", "(", ")", "(", "0", ")", "(", "0", ")", "(", ")", "(", "0", ")", ".", "multiply", "(", "perAmount", ")", ".", "divide", "(", "integrationAmount", ")", "orderItem", ".", "getProductPrice", "(", "totalAmount", ",", "3", ",", ")", "(", ")", "RoundingMode", ".", "HALF_EVEN"], "metrics": {"cyclomatic_complexity": 19, "n_ast_nodes": 1670, "ast_depth": 16, "n_identifiers": 137, "vocab_size": 218, "n_whitespaces": 1851, "n_words": 515, "nloc": 158, "token_counts": 1161}}
{"dataset_split": "train", "id": "mall@c824eac:mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java#254-283", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "c824eacdb7758fe19ce801b5bd18a2bd2f275991", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java", "language": "Java"}, "method": {"name": "paySuccess", "qualified_name": "com.macro.mall.portal.service.impl.OmsPortalOrderServiceImpl#paySuccess", "start_line": 254, "end_line": 283, "signature": "paySuccess(Long orderId, Integer payType)", "original_code": "@Override\n    public Integer paySuccess(Long orderId, Integer payType) {\n        //\u4fee\u6539\u8ba2\u5355\u652f\u4ed8\u72b6\u6001\n        OmsOrder order = new OmsOrder();\n        order.setId(orderId);\n        order.setStatus(1);\n        order.setPaymentTime(new Date());\n        order.setPayType(payType);\n        OmsOrderExample orderExample = new OmsOrderExample();\n        orderExample.createCriteria()\n                .andIdEqualTo(order.getId())\n                .andDeleteStatusEqualTo(0)\n                .andStatusEqualTo(0);\n        //\u53ea\u4fee\u6539\u672a\u4ed8\u6b3e\u72b6\u6001\u7684\u8ba2\u5355\n        int updateCount = orderMapper.updateByExampleSelective(order, orderExample);\n        if(updateCount==0){\n            Asserts.fail(\"\u8ba2\u5355\u4e0d\u5b58\u5728\u6216\u8ba2\u5355\u72b6\u6001\u4e0d\u662f\u672a\u652f\u4ed8\uff01\");\n        }\n        //\u6062\u590d\u6240\u6709\u4e0b\u5355\u5546\u54c1\u7684\u9501\u5b9a\u5e93\u5b58\uff0c\u6263\u51cf\u771f\u5b9e\u5e93\u5b58\n        OmsOrderDetail orderDetail = portalOrderDao.getDetail(orderId);\n        int totalCount = 0;\n        for (OmsOrderItem orderItem : orderDetail.getOrderItemList()) {\n            int count = portalOrderDao.reduceSkuStock(orderItem.getProductSkuId(),orderItem.getProductQuantity());\n            if(count==0){\n                Asserts.fail(\"\u5e93\u5b58\u4e0d\u8db3\uff0c\u65e0\u6cd5\u6263\u51cf\uff01\");\n            }\n            totalCount+=count;\n        }\n        return totalCount;\n    }", "doc_comment": ""}, "code_tokens": ["Integer", "paySuccess", "public", "(", ",", ")", "{", "//\u4fee\u6539\u8ba2\u5355\u652f\u4ed8\u72b6\u6001", "//\u53ea\u4fee\u6539\u672a\u4ed8\u6b3e\u72b6\u6001\u7684\u8ba2\u5355", "//\u6062\u590d\u6240\u6709\u4e0b\u5355\u5546\u54c1\u7684\u9501\u5b9a\u5e93\u5b58\uff0c\u6263\u51cf\u771f\u5b9e\u5e93\u5b58", "}", "@", "Override", "Long", "orderId", "Integer", "payType", "OmsOrder", ";", ";", ";", ";", ";", "OmsOrderExample", ";", ";", ";", "if", "OmsOrderDetail", ";", ";", "for", "(", "OmsOrderItem", "orderItem", ":", ")", "return", "totalCount", ";", "order", "=", "order", ".", "setId", "order", ".", "setStatus", "order", ".", "setPaymentTime", "order", ".", "setPayType", "orderExample", "=", ".", "andStatusEqualTo", "int", "updateCount", "=", "(", ")", "{", "}", "orderDetail", "=", "int", "totalCount", "=", "0", "orderDetail", ".", "getOrderItemList", "{", "}", "new", "OmsOrder", "(", "orderId", ")", "(", "1", ")", "(", ")", "(", "payType", ")", "new", "OmsOrderExample", ".", "andDeleteStatusEqualTo", "(", "0", ")", "orderMapper", ".", "updateByExampleSelective", "updateCount", "==", "0", ";", "portalOrderDao", ".", "getDetail", "(", ")", ";", "if", ";", "(", ")", "new", "Date", "(", ")", ".", "andIdEqualTo", "(", "0", ")", "(", "order", ",", "orderExample", ")", "Asserts", ".", "fail", "(", "orderId", ")", "int", "count", "=", "(", ")", "{", "}", "totalCount", "+=", "count", "(", ")", "orderExample", ".", "createCriteria", "(", ")", "(", ")", "portalOrderDao", ".", "reduceSkuStock", "count", "==", "0", ";", "(", ")", "order", ".", "getId", "\"", "\u8ba2\u5355\u4e0d\u5b58\u5728\u6216\u8ba2\u5355\u72b6\u6001\u4e0d\u662f\u672a\u652f\u4ed8\uff01", "\"", "(", ",", ")", "Asserts", ".", "fail", "(", ")", "orderItem", ".", "getProductSkuId", "orderItem", ".", "getProductQuantity", "(", ")", "(", ")", "(", ")", "\"", "\u5e93\u5b58\u4e0d\u8db3\uff0c\u65e0\u6cd5\u6263\u51cf\uff01", "\""], "metrics": {"cyclomatic_complexity": 4, "n_ast_nodes": 275, "ast_depth": 12, "n_identifiers": 30, "vocab_size": 63, "n_whitespaces": 339, "n_words": 86, "nloc": 30, "token_counts": 190}}
{"dataset_split": "train", "id": "mall@c824eac:mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java#285-312", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "c824eacdb7758fe19ce801b5bd18a2bd2f275991", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java", "language": "Java"}, "method": {"name": "cancelTimeOutOrder", "qualified_name": "com.macro.mall.portal.service.impl.OmsPortalOrderServiceImpl#cancelTimeOutOrder", "start_line": 285, "end_line": 312, "signature": "cancelTimeOutOrder()", "original_code": "@Override\n    public Integer cancelTimeOutOrder() {\n        Integer count=0;\n        OmsOrderSetting orderSetting = orderSettingMapper.selectByPrimaryKey(1L);\n        //\u67e5\u8be2\u8d85\u65f6\u3001\u672a\u652f\u4ed8\u7684\u8ba2\u5355\u53ca\u8ba2\u5355\u8be6\u60c5\n        List<OmsOrderDetail> timeOutOrders = portalOrderDao.getTimeOutOrders(orderSetting.getNormalOrderOvertime());\n        if (CollectionUtils.isEmpty(timeOutOrders)) {\n            return count;\n        }\n        //\u4fee\u6539\u8ba2\u5355\u72b6\u6001\u4e3a\u4ea4\u6613\u53d6\u6d88\n        List<Long> ids = new ArrayList<>();\n        for (OmsOrderDetail timeOutOrder : timeOutOrders) {\n            ids.add(timeOutOrder.getId());\n        }\n        portalOrderDao.updateOrderStatus(ids, 4);\n        for (OmsOrderDetail timeOutOrder : timeOutOrders) {\n            //\u89e3\u9664\u8ba2\u5355\u5546\u54c1\u5e93\u5b58\u9501\u5b9a\n            portalOrderDao.releaseSkuStockLock(timeOutOrder.getOrderItemList());\n            //\u4fee\u6539\u4f18\u60e0\u5238\u4f7f\u7528\u72b6\u6001\n            updateCouponStatus(timeOutOrder.getCouponId(), timeOutOrder.getMemberId(), 0);\n            //\u8fd4\u8fd8\u4f7f\u7528\u79ef\u5206\n            if (timeOutOrder.getUseIntegration() != null) {\n                UmsMember member = memberService.getById(timeOutOrder.getMemberId());\n                memberService.updateIntegration(timeOutOrder.getMemberId(), member.getIntegration() + timeOutOrder.getUseIntegration());\n            }\n        }\n        return timeOutOrders.size();\n    }", "doc_comment": ""}, "code_tokens": ["Integer", "cancelTimeOutOrder", "public", "(", ")", "{", "//\u67e5\u8be2\u8d85\u65f6\u3001\u672a\u652f\u4ed8\u7684\u8ba2\u5355\u53ca\u8ba2\u5355\u8be6\u60c5", "//\u4fee\u6539\u8ba2\u5355\u72b6\u6001\u4e3a\u4ea4\u6613\u53d6\u6d88", "}", "@", "Override", "Integer", ";", "OmsOrderSetting", ";", ";", "if", ";", "for", "(", "OmsOrderDetail", "timeOutOrder", ":", "timeOutOrders", ")", ";", "for", "(", "OmsOrderDetail", "timeOutOrder", ":", "timeOutOrders", ")", "return", ";", "count", "=", "0", "orderSetting", "=", "List", "timeOutOrders", "=", "(", ")", "{", "}", "List", "ids", "=", "{", "}", "portalOrderDao", ".", "updateOrderStatus", "{", "//\u89e3\u9664\u8ba2\u5355\u5546\u54c1\u5e93\u5b58\u9501\u5b9a", "//\u4fee\u6539\u4f18\u60e0\u5238\u4f7f\u7528\u72b6\u6001", "//\u8fd4\u8fd8\u4f7f\u7528\u79ef\u5206", "}", "timeOutOrders", ".", "size", "orderSettingMapper", ".", "selectByPrimaryKey", "<", "OmsOrderDetail", ">", "portalOrderDao", ".", "getTimeOutOrders", "CollectionUtils", ".", "isEmpty", "return", "count", ";", "<", "Long", ">", "new", ";", "(", "ids", ",", "4", ")", ";", ";", "if", "(", ")", "(", "1L", ")", "(", ")", "(", "timeOutOrders", ")", "ArrayList", "(", ")", "ids", ".", "add", "portalOrderDao", ".", "releaseSkuStockLock", "updateCouponStatus", "(", ")", "{", "}", "orderSetting", ".", "getNormalOrderOvertime", "<", ">", "(", ")", "(", ")", "(", ",", ",", "0", ")", "!=", "null", "UmsMember", ";", ";", "(", ")", "timeOutOrder", ".", "getId", "timeOutOrder", ".", "getOrderItemList", "timeOutOrder", ".", "getCouponId", "timeOutOrder", ".", "getMemberId", "timeOutOrder", ".", "getUseIntegration", "member", "=", "memberService", ".", "updateIntegration", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "memberService", ".", "getById", "(", ",", ")", "(", ")", "timeOutOrder", ".", "getMemberId", "+", "timeOutOrder", ".", "getMemberId", "(", ")", "member", ".", "getIntegration", "timeOutOrder", ".", "getUseIntegration", "(", ")", "(", ")", "(", ")"], "metrics": {"cyclomatic_complexity": 5, "n_ast_nodes": 278, "ast_depth": 14, "n_identifiers": 29, "vocab_size": 64, "n_whitespaces": 328, "n_words": 83, "nloc": 28, "token_counts": 195}}
{"dataset_split": "train", "id": "mall@c824eac:mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java#314-348", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "c824eacdb7758fe19ce801b5bd18a2bd2f275991", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java", "language": "Java"}, "method": {"name": "cancelOrder", "qualified_name": "com.macro.mall.portal.service.impl.OmsPortalOrderServiceImpl#cancelOrder", "start_line": 314, "end_line": 348, "signature": "cancelOrder(Long orderId)", "original_code": "@Override\n    public void cancelOrder(Long orderId) {\n        //\u67e5\u8be2\u672a\u4ed8\u6b3e\u7684\u53d6\u6d88\u8ba2\u5355\n        OmsOrderExample example = new OmsOrderExample();\n        example.createCriteria().andIdEqualTo(orderId).andStatusEqualTo(0).andDeleteStatusEqualTo(0);\n        List<OmsOrder> cancelOrderList = orderMapper.selectByExample(example);\n        if (CollectionUtils.isEmpty(cancelOrderList)) {\n            return;\n        }\n        OmsOrder cancelOrder = cancelOrderList.get(0);\n        if (cancelOrder != null) {\n            //\u4fee\u6539\u8ba2\u5355\u72b6\u6001\u4e3a\u53d6\u6d88\n            cancelOrder.setStatus(4);\n            orderMapper.updateByPrimaryKeySelective(cancelOrder);\n            OmsOrderItemExample orderItemExample = new OmsOrderItemExample();\n            orderItemExample.createCriteria().andOrderIdEqualTo(orderId);\n            List<OmsOrderItem> orderItemList = orderItemMapper.selectByExample(orderItemExample);\n            //\u89e3\u9664\u8ba2\u5355\u5546\u54c1\u5e93\u5b58\u9501\u5b9a\n            if (!CollectionUtils.isEmpty(orderItemList)) {\n                for (OmsOrderItem orderItem : orderItemList) {\n                    int count = portalOrderDao.releaseStockBySkuId(orderItem.getProductSkuId(),orderItem.getProductQuantity());\n                    if(count==0){\n                        Asserts.fail(\"\u5e93\u5b58\u4e0d\u8db3\uff0c\u65e0\u6cd5\u91ca\u653e\uff01\");\n                    }\n                }\n            }\n            //\u4fee\u6539\u4f18\u60e0\u5238\u4f7f\u7528\u72b6\u6001\n            updateCouponStatus(cancelOrder.getCouponId(), cancelOrder.getMemberId(), 0);\n            //\u8fd4\u8fd8\u4f7f\u7528\u79ef\u5206\n            if (cancelOrder.getUseIntegration() != null) {\n                UmsMember member = memberService.getById(cancelOrder.getMemberId());\n                memberService.updateIntegration(cancelOrder.getMemberId(), member.getIntegration() + cancelOrder.getUseIntegration());\n            }\n        }\n    }", "doc_comment": ""}, "code_tokens": ["void", "cancelOrder", "public", "(", ")", "{", "//\u67e5\u8be2\u672a\u4ed8\u6b3e\u7684\u53d6\u6d88\u8ba2\u5355", "}", "@", "Override", "Long", "orderId", "OmsOrderExample", ";", ";", ";", "if", "OmsOrder", ";", "if", "example", "=", ".", "andDeleteStatusEqualTo", "List", "cancelOrderList", "=", "(", ")", "{", "}", "cancelOrder", "=", "(", ")", "{", "//\u4fee\u6539\u8ba2\u5355\u72b6\u6001\u4e3a\u53d6\u6d88", "//\u89e3\u9664\u8ba2\u5355\u5546\u54c1\u5e93\u5b58\u9501\u5b9a", "//\u4fee\u6539\u4f18\u60e0\u5238\u4f7f\u7528\u72b6\u6001", "//\u8fd4\u8fd8\u4f7f\u7528\u79ef\u5206", "}", "new", "OmsOrderExample", ".", "andStatusEqualTo", "(", "0", ")", "<", "OmsOrder", ">", "orderMapper", ".", "selectByExample", "CollectionUtils", ".", "isEmpty", "return", ";", "cancelOrderList", ".", "get", "cancelOrder", "!=", "null", ";", ";", "OmsOrderItemExample", ";", ";", ";", "if", ";", "if", "(", ")", ".", "andIdEqualTo", "(", "0", ")", "(", "example", ")", "(", "cancelOrderList", ")", "(", "0", ")", "cancelOrder", ".", "setStatus", "orderMapper", ".", "updateByPrimaryKeySelective", "orderItemExample", "=", ".", "andOrderIdEqualTo", "List", "orderItemList", "=", "(", ")", "{", "}", "updateCouponStatus", "(", ")", "{", "}", "example", ".", "createCriteria", "(", "orderId", ")", "(", "4", ")", "(", "cancelOrder", ")", "new", "OmsOrderItemExample", "orderItemExample", ".", "createCriteria", "(", "orderId", ")", "<", "OmsOrderItem", ">", "orderItemMapper", ".", "selectByExample", "!", "for", "(", "OmsOrderItem", "orderItem", ":", "orderItemList", ")", "(", ",", ",", "0", ")", "!=", "null", "UmsMember", ";", ";", "(", ")", "(", ")", "(", ")", "(", "orderItemExample", ")", "CollectionUtils", ".", "isEmpty", "{", "}", "cancelOrder", ".", "getCouponId", "cancelOrder", ".", "getMemberId", "cancelOrder", ".", "getUseIntegration", "member", "=", "memberService", ".", "updateIntegration", "(", "orderItemList", ")", ";", "if", "(", ")", "(", ")", "(", ")", "memberService", ".", "getById", "(", ",", ")", "int", "count", "=", "(", ")", "{", "}", "(", ")", "cancelOrder", ".", "getMemberId", "+", "portalOrderDao", ".", "releaseStockBySkuId", "count", "==", "0", ";", "cancelOrder", ".", "getMemberId", "(", ")", "member", ".", "getIntegration", "cancelOrder", ".", "getUseIntegration", "(", ",", ")", "Asserts", ".", "fail", "(", ")", "(", ")", "(", ")", "orderItem", ".", "getProductSkuId", "orderItem", ".", "getProductQuantity", "(", ")", "(", ")", "(", ")", "\"", "\u5e93\u5b58\u4e0d\u8db3\uff0c\u65e0\u6cd5\u91ca\u653e\uff01", "\""], "metrics": {"cyclomatic_complexity": 7, "n_ast_nodes": 374, "ast_depth": 16, "n_identifiers": 37, "vocab_size": 77, "n_whitespaces": 491, "n_words": 109, "nloc": 35, "token_counts": 259}}
{"dataset_split": "train", "id": "mall@c824eac:mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java#350-357", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "c824eacdb7758fe19ce801b5bd18a2bd2f275991", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java", "language": "Java"}, "method": {"name": "sendDelayMessageCancelOrder", "qualified_name": "com.macro.mall.portal.service.impl.OmsPortalOrderServiceImpl#sendDelayMessageCancelOrder", "start_line": 350, "end_line": 357, "signature": "sendDelayMessageCancelOrder(Long orderId)", "original_code": "@Override\n    public void sendDelayMessageCancelOrder(Long orderId) {\n        //\u83b7\u53d6\u8ba2\u5355\u8d85\u65f6\u65f6\u95f4\n        OmsOrderSetting orderSetting = orderSettingMapper.selectByPrimaryKey(1L);\n        long delayTimes = orderSetting.getNormalOrderOvertime() * 60 * 1000;\n        //\u53d1\u9001\u5ef6\u8fdf\u6d88\u606f\n        cancelOrderSender.sendMessage(orderId, delayTimes);\n    }", "doc_comment": ""}, "code_tokens": ["void", "sendDelayMessageCancelOrder", "public", "(", ")", "{", "//\u83b7\u53d6\u8ba2\u5355\u8d85\u65f6\u65f6\u95f4", "//\u53d1\u9001\u5ef6\u8fdf\u6d88\u606f", "}", "@", "Override", "Long", "orderId", "OmsOrderSetting", ";", ";", ";", "orderSetting", "=", "long", "delayTimes", "=", "cancelOrderSender", ".", "sendMessage", "orderSettingMapper", ".", "selectByPrimaryKey", "*", "1000", "(", "orderId", ",", "delayTimes", ")", "(", "1L", ")", "*", "60", "orderSetting", ".", "getNormalOrderOvertime", "(", ")"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 66, "ast_depth": 10, "n_identifiers": 10, "vocab_size": 30, "n_whitespaces": 70, "n_words": 23, "nloc": 8, "token_counts": 45}}
{"dataset_split": "train", "id": "mall@c824eac:mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java#359-373", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "c824eacdb7758fe19ce801b5bd18a2bd2f275991", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java", "language": "Java"}, "method": {"name": "confirmReceiveOrder", "qualified_name": "com.macro.mall.portal.service.impl.OmsPortalOrderServiceImpl#confirmReceiveOrder", "start_line": 359, "end_line": 373, "signature": "confirmReceiveOrder(Long orderId)", "original_code": "@Override\n    public void confirmReceiveOrder(Long orderId) {\n        UmsMember member = memberService.getCurrentMember();\n        OmsOrder order = orderMapper.selectByPrimaryKey(orderId);\n        if(!member.getId().equals(order.getMemberId())){\n            Asserts.fail(\"\u4e0d\u80fd\u786e\u8ba4\u4ed6\u4eba\u8ba2\u5355\uff01\");\n        }\n        if(order.getStatus()!=2){\n            Asserts.fail(\"\u8be5\u8ba2\u5355\u8fd8\u672a\u53d1\u8d27\uff01\");\n        }\n        order.setStatus(3);\n        order.setConfirmStatus(1);\n        order.setReceiveTime(new Date());\n        orderMapper.updateByPrimaryKey(order);\n    }", "doc_comment": ""}, "code_tokens": ["void", "confirmReceiveOrder", "public", "(", ")", "{", "}", "@", "Override", "Long", "orderId", "UmsMember", ";", "OmsOrder", ";", "if", "if", ";", ";", ";", ";", "member", "=", "order", "=", "(", ")", "{", "}", "(", ")", "{", "}", "order", ".", "setStatus", "order", ".", "setConfirmStatus", "order", ".", "setReceiveTime", "orderMapper", ".", "updateByPrimaryKey", "memberService", ".", "getCurrentMember", "orderMapper", ".", "selectByPrimaryKey", "!", ";", "!=", "2", ";", "(", "3", ")", "(", "1", ")", "(", ")", "(", "order", ")", "(", ")", "(", "orderId", ")", ".", "equals", "Asserts", ".", "fail", "order", ".", "getStatus", "Asserts", ".", "fail", "new", "Date", "member", ".", "getId", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "order", ".", "getMemberId", "\"", "\u4e0d\u80fd\u786e\u8ba4\u4ed6\u4eba\u8ba2\u5355\uff01", "\"", "\"", "\u8be5\u8ba2\u5355\u8fd8\u672a\u53d1\u8d27\uff01", "\"", "(", ")"], "metrics": {"cyclomatic_complexity": 3, "n_ast_nodes": 164, "ast_depth": 11, "n_identifiers": 19, "vocab_size": 43, "n_whitespaces": 137, "n_words": 44, "nloc": 15, "token_counts": 111}}
{"dataset_split": "train", "id": "mall@c824eac:mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java#375-416", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "c824eacdb7758fe19ce801b5bd18a2bd2f275991", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java", "language": "Java"}, "method": {"name": "list", "qualified_name": "com.macro.mall.portal.service.impl.OmsPortalOrderServiceImpl#list", "start_line": 375, "end_line": 416, "signature": "list(Integer status, Integer pageNum, Integer pageSize)", "original_code": "@Override\n    public CommonPage<OmsOrderDetail> list(Integer status, Integer pageNum, Integer pageSize) {\n        if(status==-1){\n            status = null;\n        }\n        UmsMember member = memberService.getCurrentMember();\n        PageHelper.startPage(pageNum,pageSize);\n        OmsOrderExample orderExample = new OmsOrderExample();\n        OmsOrderExample.Criteria criteria = orderExample.createCriteria();\n        criteria.andDeleteStatusEqualTo(0)\n                .andMemberIdEqualTo(member.getId());\n        if(status!=null){\n            criteria.andStatusEqualTo(status);\n        }\n        orderExample.setOrderByClause(\"create_time desc\");\n        List<OmsOrder> orderList = orderMapper.selectByExample(orderExample);\n        CommonPage<OmsOrder> orderPage = CommonPage.restPage(orderList);\n        //\u8bbe\u7f6e\u5206\u9875\u4fe1\u606f\n        CommonPage<OmsOrderDetail> resultPage = new CommonPage<>();\n        resultPage.setPageNum(orderPage.getPageNum());\n        resultPage.setPageSize(orderPage.getPageSize());\n        resultPage.setTotal(orderPage.getTotal());\n        resultPage.setTotalPage(orderPage.getTotalPage());\n        if(CollUtil.isEmpty(orderList)){\n            return resultPage;\n        }\n        //\u8bbe\u7f6e\u6570\u636e\u4fe1\u606f\n        List<Long> orderIds = orderList.stream().map(OmsOrder::getId).collect(Collectors.toList());\n        OmsOrderItemExample orderItemExample = new OmsOrderItemExample();\n        orderItemExample.createCriteria().andOrderIdIn(orderIds);\n        List<OmsOrderItem> orderItemList = orderItemMapper.selectByExample(orderItemExample);\n        List<OmsOrderDetail> orderDetailList = new ArrayList<>();\n        for (OmsOrder omsOrder : orderList) {\n            OmsOrderDetail orderDetail = new OmsOrderDetail();\n            BeanUtil.copyProperties(omsOrder,orderDetail);\n            List<OmsOrderItem> relatedItemList = orderItemList.stream().filter(item -> item.getOrderId().equals(orderDetail.getId())).collect(Collectors.toList());\n            orderDetail.setOrderItemList(relatedItemList);\n            orderDetailList.add(orderDetail);\n        }\n        resultPage.setList(orderDetailList);\n        return resultPage;\n    }", "doc_comment": ""}, "code_tokens": ["list", "public", "CommonPage", "(", ",", ",", ")", "{", "//\u8bbe\u7f6e\u5206\u9875\u4fe1\u606f", "//\u8bbe\u7f6e\u6570\u636e\u4fe1\u606f", "}", "@", "Override", "<", "OmsOrderDetail", ">", "Integer", "status", "Integer", "pageNum", "Integer", "pageSize", "if", "UmsMember", ";", ";", "OmsOrderExample", ";", ";", ";", "if", ";", ";", ";", ";", ";", ";", ";", ";", "if", ";", "OmsOrderItemExample", ";", ";", ";", ";", "for", "(", "OmsOrder", "omsOrder", ":", "orderList", ")", ";", "return", "resultPage", ";", "(", ")", "{", "}", "member", "=", "PageHelper", ".", "startPage", "orderExample", "=", "OmsOrderExample", ".", "Criteria", "criteria", "=", ".", "andMemberIdEqualTo", "(", ")", "{", "}", "orderExample", ".", "setOrderByClause", "List", "orderList", "=", "CommonPage", "orderPage", "=", "CommonPage", "resultPage", "=", "resultPage", ".", "setPageNum", "resultPage", ".", "setPageSize", "resultPage", ".", "setTotal", "resultPage", ".", "setTotalPage", "(", ")", "{", "}", "List", "orderIds", "=", "orderItemExample", "=", ".", "andOrderIdIn", "List", "orderItemList", "=", "List", "orderDetailList", "=", "{", "}", "resultPage", ".", "setList", "status", "==", ";", "memberService", ".", "getCurrentMember", "(", "pageNum", ",", "pageSize", ")", "new", "OmsOrderExample", "orderExample", ".", "createCriteria", "criteria", ".", "andDeleteStatusEqualTo", "(", ")", "status", "!=", "null", ";", "(", ")", "<", "OmsOrder", ">", "orderMapper", ".", "selectByExample", "<", "OmsOrder", ">", "CommonPage", ".", "restPage", "<", "OmsOrderDetail", ">", "new", "(", ")", "(", ")", "(", ")", "(", ")", "CollUtil", ".", "isEmpty", "return", "resultPage", ";", "<", "Long", ">", ".", "collect", "new", "OmsOrderItemExample", "orderItemExample", ".", "createCriteria", "(", "orderIds", ")", "<", "OmsOrderItem", ">", "orderItemMapper", ".", "selectByExample", "<", "OmsOrderDetail", ">", "new", "OmsOrderDetail", ";", ";", ";", ";", ";", "(", "orderDetailList", ")", "-", "1", "status", "=", "null", "(", ")", "(", ")", "(", ")", "(", "0", ")", "member", ".", "getId", "criteria", ".", "andStatusEqualTo", "\"", "create_time desc", "\"", "(", "orderExample", ")", "(", "orderList", ")", "CommonPage", "(", ")", "orderPage", ".", "getPageNum", "orderPage", ".", "getPageSize", "orderPage", ".", "getTotal", "orderPage", ".", "getTotalPage", "(", "orderList", ")", ".", "map", "(", ")", "(", ")", "(", ")", "(", "orderItemExample", ")", "ArrayList", "(", ")", "orderDetail", "=", "BeanUtil", ".", "copyProperties", "List", "relatedItemList", "=", "orderDetail", ".", "setOrderItemList", "orderDetailList", ".", "add", "(", ")", "(", "status", ")", "<", ">", "(", ")", "(", ")", "(", ")", "(", ")", "orderList", ".", "stream", "(", ")", "Collectors", ".", "toList", "<", ">", "new", "OmsOrderDetail", "(", "omsOrder", ",", "orderDetail", ")", "<", "OmsOrderItem", ">", ".", "collect", "(", "relatedItemList", ")", "(", "orderDetail", ")", "(", ")", "OmsOrder", "::", "getId", "(", ")", "(", ")", ".", "filter", "(", ")", "orderItemList", ".", "stream", "(", ")", "Collectors", ".", "toList", "(", ")", "item", "->", "(", ")", ".", "equals", "item", ".", "getOrderId", "(", ")", "(", ")", "orderDetail", ".", "getId", "(", ")"], "metrics": {"cyclomatic_complexity": 5, "n_ast_nodes": 545, "ast_depth": 16, "n_identifiers": 59, "vocab_size": 98, "n_whitespaces": 462, "n_words": 158, "nloc": 42, "token_counts": 373}}
{"dataset_split": "train", "id": "mall@c824eac:mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java#418-428", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "c824eacdb7758fe19ce801b5bd18a2bd2f275991", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java", "language": "Java"}, "method": {"name": "detail", "qualified_name": "com.macro.mall.portal.service.impl.OmsPortalOrderServiceImpl#detail", "start_line": 418, "end_line": 428, "signature": "detail(Long orderId)", "original_code": "@Override\n    public OmsOrderDetail detail(Long orderId) {\n        OmsOrder omsOrder = orderMapper.selectByPrimaryKey(orderId);\n        OmsOrderItemExample example = new OmsOrderItemExample();\n        example.createCriteria().andOrderIdEqualTo(orderId);\n        List<OmsOrderItem> orderItemList = orderItemMapper.selectByExample(example);\n        OmsOrderDetail orderDetail = new OmsOrderDetail();\n        BeanUtil.copyProperties(omsOrder,orderDetail);\n        orderDetail.setOrderItemList(orderItemList);\n        return orderDetail;\n    }", "doc_comment": ""}, "code_tokens": ["OmsOrderDetail", "detail", "public", "(", ")", "{", "}", "@", "Override", "Long", "orderId", "OmsOrder", ";", "OmsOrderItemExample", ";", ";", ";", "OmsOrderDetail", ";", ";", ";", "return", "orderDetail", ";", "omsOrder", "=", "example", "=", ".", "andOrderIdEqualTo", "List", "orderItemList", "=", "orderDetail", "=", "BeanUtil", ".", "copyProperties", "orderDetail", ".", "setOrderItemList", "orderMapper", ".", "selectByPrimaryKey", "new", "OmsOrderItemExample", "example", ".", "createCriteria", "(", "orderId", ")", "<", "OmsOrderItem", ">", "orderItemMapper", ".", "selectByExample", "new", "OmsOrderDetail", "(", "omsOrder", ",", "orderDetail", ")", "(", "orderItemList", ")", "(", "orderId", ")", "(", ")", "(", ")", "(", "example", ")", "(", ")"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 117, "ast_depth": 8, "n_identifiers": 16, "vocab_size": 36, "n_whitespaces": 101, "n_words": 38, "nloc": 11, "token_counts": 80}}
{"dataset_split": "train", "id": "mall@c824eac:mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java#430-443", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "c824eacdb7758fe19ce801b5bd18a2bd2f275991", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java", "language": "Java"}, "method": {"name": "deleteOrder", "qualified_name": "com.macro.mall.portal.service.impl.OmsPortalOrderServiceImpl#deleteOrder", "start_line": 430, "end_line": 443, "signature": "deleteOrder(Long orderId)", "original_code": "@Override\n    public void deleteOrder(Long orderId) {\n        UmsMember member = memberService.getCurrentMember();\n        OmsOrder order = orderMapper.selectByPrimaryKey(orderId);\n        if(!member.getId().equals(order.getMemberId())){\n            Asserts.fail(\"\u4e0d\u80fd\u5220\u9664\u4ed6\u4eba\u8ba2\u5355\uff01\");\n        }\n        if(order.getStatus()==3||order.getStatus()==4){\n            order.setDeleteStatus(1);\n            orderMapper.updateByPrimaryKey(order);\n        }else{\n            Asserts.fail(\"\u53ea\u80fd\u5220\u9664\u5df2\u5b8c\u6210\u6216\u5df2\u5173\u95ed\u7684\u8ba2\u5355\uff01\");\n        }\n    }", "doc_comment": ""}, "code_tokens": ["void", "deleteOrder", "public", "(", ")", "{", "}", "@", "Override", "Long", "orderId", "UmsMember", ";", "OmsOrder", ";", "if", "if", "else", "member", "=", "order", "=", "(", ")", "{", "}", "(", ")", "{", "}", "{", "}", "memberService", ".", "getCurrentMember", "orderMapper", ".", "selectByPrimaryKey", "!", ";", "||", ";", ";", ";", "(", ")", "(", "orderId", ")", ".", "equals", "Asserts", ".", "fail", "==", "3", "==", "4", "order", ".", "setDeleteStatus", "orderMapper", ".", "updateByPrimaryKey", "Asserts", ".", "fail", "member", ".", "getId", "(", ")", "(", ")", "order", ".", "getStatus", "order", ".", "getStatus", "(", "1", ")", "(", "order", ")", "(", ")", "(", ")", "order", ".", "getMemberId", "\"", "\u4e0d\u80fd\u5220\u9664\u4ed6\u4eba\u8ba2\u5355\uff01", "\"", "(", ")", "(", ")", "\"", "\u53ea\u80fd\u5220\u9664\u5df2\u5b8c\u6210\u6216\u5df2\u5173\u95ed\u7684\u8ba2\u5355\uff01", "\"", "(", ")"], "metrics": {"cyclomatic_complexity": 4, "n_ast_nodes": 155, "ast_depth": 11, "n_identifiers": 17, "vocab_size": 41, "n_whitespaces": 135, "n_words": 41, "nloc": 14, "token_counts": 105}}
{"dataset_split": "train", "id": "mall@c824eac:mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java#445-457", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "c824eacdb7758fe19ce801b5bd18a2bd2f275991", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java", "language": "Java"}, "method": {"name": "paySuccessByOrderSn", "qualified_name": "com.macro.mall.portal.service.impl.OmsPortalOrderServiceImpl#paySuccessByOrderSn", "start_line": 445, "end_line": 457, "signature": "paySuccessByOrderSn(String orderSn, Integer payType)", "original_code": "@Override\n    public void paySuccessByOrderSn(String orderSn, Integer payType) {\n        OmsOrderExample example =  new OmsOrderExample();\n        example.createCriteria()\n                .andOrderSnEqualTo(orderSn)\n                .andStatusEqualTo(0)\n                .andDeleteStatusEqualTo(0);\n        List<OmsOrder> orderList = orderMapper.selectByExample(example);\n        if(CollUtil.isNotEmpty(orderList)){\n            OmsOrder order = orderList.get(0);\n            paySuccess(order.getId(),payType);\n        }\n    }", "doc_comment": ""}, "code_tokens": ["void", "paySuccessByOrderSn", "public", "(", ",", ")", "{", "}", "@", "Override", "String", "orderSn", "Integer", "payType", "OmsOrderExample", ";", ";", ";", "if", "example", "=", ".", "andDeleteStatusEqualTo", "List", "orderList", "=", "(", ")", "{", "}", "new", "OmsOrderExample", ".", "andStatusEqualTo", "(", "0", ")", "<", "OmsOrder", ">", "orderMapper", ".", "selectByExample", "CollUtil", ".", "isNotEmpty", "OmsOrder", ";", ";", "(", ")", ".", "andOrderSnEqualTo", "(", "0", ")", "(", "example", ")", "(", "orderList", ")", "order", "=", "paySuccess", "example", ".", "createCriteria", "(", "orderSn", ")", "orderList", ".", "get", "(", ",", "payType", ")", "(", ")", "(", "0", ")", "order", ".", "getId", "(", ")"], "metrics": {"cyclomatic_complexity": 2, "n_ast_nodes": 129, "ast_depth": 11, "n_identifiers": 18, "vocab_size": 39, "n_whitespaces": 149, "n_words": 39, "nloc": 13, "token_counts": 88}}
{"dataset_split": "train", "id": "mall@c824eac:mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java#462-477", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "c824eacdb7758fe19ce801b5bd18a2bd2f275991", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java", "language": "Java"}, "method": {"name": "generateOrderSn", "qualified_name": "com.macro.mall.portal.service.impl.OmsPortalOrderServiceImpl#generateOrderSn", "start_line": 462, "end_line": 477, "signature": "generateOrderSn(OmsOrder order)", "original_code": "private String generateOrderSn(OmsOrder order) {\n        StringBuilder sb = new StringBuilder();\n        String date = new SimpleDateFormat(\"yyyyMMdd\").format(new Date());\n        String key = REDIS_DATABASE+\":\"+ REDIS_KEY_ORDER_ID + date;\n        Long increment = redisService.incr(key, 1);\n        sb.append(date);\n        sb.append(String.format(\"%02d\", order.getSourceType()));\n        sb.append(String.format(\"%02d\", order.getPayType()));\n        String incrementStr = increment.toString();\n        if (incrementStr.length() <= 6) {\n            sb.append(String.format(\"%06d\", increment));\n        } else {\n            sb.append(incrementStr);\n        }\n        return sb.toString();\n    }", "doc_comment": "/**\n     * \u751f\u621018\u4f4d\u8ba2\u5355\u7f16\u53f7:8\u4f4d\u65e5\u671f+2\u4f4d\u5e73\u53f0\u53f7\u7801+2\u4f4d\u652f\u4ed8\u65b9\u5f0f+6\u4f4d\u4ee5\u4e0a\u81ea\u589eid\n     */"}, "code_tokens": ["String", "generateOrderSn", "private", "(", ")", "{", "}", "OmsOrder", "order", "StringBuilder", ";", "String", ";", "String", ";", "Long", ";", ";", ";", ";", "String", ";", "if", "else", "return", ";", "sb", "=", "date", "=", "key", "=", "increment", "=", "sb", ".", "append", "sb", ".", "append", "sb", ".", "append", "incrementStr", "=", "(", ")", "{", "}", "{", "}", "sb", ".", "toString", "new", "StringBuilder", ".", "format", "+", "date", "redisService", ".", "incr", "(", "date", ")", "(", ")", "(", ")", "increment", ".", "toString", "<=", "6", ";", ";", "(", ")", "(", ")", "new", "SimpleDateFormat", "(", ")", "+", "REDIS_KEY_ORDER_ID", "(", "key", ",", "1", ")", "String", ".", "format", "String", ".", "format", "(", ")", "incrementStr", ".", "length", "sb", ".", "append", "sb", ".", "append", "(", ")", "new", "Date", "REDIS_DATABASE", "+", "(", ",", ")", "(", ",", ")", "(", ")", "(", ")", "(", "incrementStr", ")", "\"", "yyyyMMdd", "\"", "(", ")", "\"", ":", "\"", "\"", "%02d", "\"", "order", ".", "getSourceType", "\"", "%02d", "\"", "order", ".", "getPayType", "String", ".", "format", "(", ")", "(", ")", "(", ",", "increment", ")", "\"", "%06d", "\""], "metrics": {"cyclomatic_complexity": 2, "n_ast_nodes": 233, "ast_depth": 12, "n_identifiers": 18, "vocab_size": 45, "n_whitespaces": 175, "n_words": 66, "nloc": 16, "token_counts": 162}}
{"dataset_split": "train", "id": "mall@c824eac:mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java#482-488", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "c824eacdb7758fe19ce801b5bd18a2bd2f275991", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java", "language": "Java"}, "method": {"name": "deleteCartItemList", "qualified_name": "com.macro.mall.portal.service.impl.OmsPortalOrderServiceImpl#deleteCartItemList", "start_line": 482, "end_line": 488, "signature": "deleteCartItemList(List<CartPromotionItem> cartPromotionItemList, UmsMember currentMember)", "original_code": "private void deleteCartItemList(List<CartPromotionItem> cartPromotionItemList, UmsMember currentMember) {\n        List<Long> ids = new ArrayList<>();\n        for (CartPromotionItem cartPromotionItem : cartPromotionItemList) {\n            ids.add(cartPromotionItem.getId());\n        }\n        cartItemService.delete(currentMember.getId(), ids);\n    }", "doc_comment": "/**\n     * \u4ece\u8d2d\u7269\u8f66\u4e2d\u5220\u9664\u5df2\u4e0b\u5355\u7684\u5546\u54c1\u4fe1\u606f\n     */"}, "code_tokens": ["void", "deleteCartItemList", "private", "(", ",", ")", "{", "}", "cartPromotionItemList", "UmsMember", "currentMember", ";", "for", "(", "CartPromotionItem", "cartPromotionItem", ":", "cartPromotionItemList", ")", ";", "List", "List", "ids", "=", "{", "}", "cartItemService", ".", "delete", "<", "CartPromotionItem", ">", "<", "Long", ">", "new", ";", "(", ",", "ids", ")", "ArrayList", "(", ")", "ids", ".", "add", "currentMember", ".", "getId", "<", ">", "(", ")", "(", ")", "cartPromotionItem", ".", "getId", "(", ")"], "metrics": {"cyclomatic_complexity": 2, "n_ast_nodes": 90, "ast_depth": 11, "n_identifiers": 9, "vocab_size": 29, "n_whitespaces": 70, "n_words": 26, "nloc": 7, "token_counts": 61}}
{"dataset_split": "train", "id": "mall@c824eac:mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java#493-499", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "c824eacdb7758fe19ce801b5bd18a2bd2f275991", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java", "language": "Java"}, "method": {"name": "calcGiftGrowth", "qualified_name": "com.macro.mall.portal.service.impl.OmsPortalOrderServiceImpl#calcGiftGrowth", "start_line": 493, "end_line": 499, "signature": "calcGiftGrowth(List<OmsOrderItem> orderItemList)", "original_code": "private Integer calcGiftGrowth(List<OmsOrderItem> orderItemList) {\n        Integer sum = 0;\n        for (OmsOrderItem orderItem : orderItemList) {\n            sum = sum + orderItem.getGiftGrowth() * orderItem.getProductQuantity();\n        }\n        return sum;\n    }", "doc_comment": "/**\n     * \u8ba1\u7b97\u8be5\u8ba2\u5355\u8d60\u9001\u7684\u6210\u957f\u503c\n     */"}, "code_tokens": ["Integer", "calcGiftGrowth", "private", "(", ")", "{", "}", "orderItemList", "Integer", ";", "for", "(", "OmsOrderItem", "orderItem", ":", "orderItemList", ")", "return", "sum", ";", "List", "sum", "=", "0", "{", "}", "<", "OmsOrderItem", ">", ";", "sum", "=", "sum", "+", "*", "orderItem", ".", "getGiftGrowth", "orderItem", ".", "getProductQuantity", "(", ")", "(", ")"], "metrics": {"cyclomatic_complexity": 2, "n_ast_nodes": 66, "ast_depth": 12, "n_identifiers": 6, "vocab_size": 25, "n_whitespaces": 73, "n_words": 21, "nloc": 7, "token_counts": 45}}
{"dataset_split": "train", "id": "mall@c824eac:mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java#504-510", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "c824eacdb7758fe19ce801b5bd18a2bd2f275991", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java", "language": "Java"}, "method": {"name": "calcGifIntegration", "qualified_name": "com.macro.mall.portal.service.impl.OmsPortalOrderServiceImpl#calcGifIntegration", "start_line": 504, "end_line": 510, "signature": "calcGifIntegration(List<OmsOrderItem> orderItemList)", "original_code": "private Integer calcGifIntegration(List<OmsOrderItem> orderItemList) {\n        int sum = 0;\n        for (OmsOrderItem orderItem : orderItemList) {\n            sum += orderItem.getGiftIntegration() * orderItem.getProductQuantity();\n        }\n        return sum;\n    }", "doc_comment": "/**\n     * \u8ba1\u7b97\u8be5\u8ba2\u5355\u8d60\u9001\u7684\u79ef\u5206\n     */"}, "code_tokens": ["Integer", "calcGifIntegration", "private", "(", ")", "{", "}", "orderItemList", ";", "for", "(", "OmsOrderItem", "orderItem", ":", "orderItemList", ")", "return", "sum", ";", "List", "int", "sum", "=", "0", "{", "}", "<", "OmsOrderItem", ">", ";", "sum", "+=", "*", "orderItem", ".", "getGiftIntegration", "orderItem", ".", "getProductQuantity", "(", ")", "(", ")"], "metrics": {"cyclomatic_complexity": 2, "n_ast_nodes": 64, "ast_depth": 11, "n_identifiers": 6, "vocab_size": 26, "n_whitespaces": 71, "n_words": 20, "nloc": 7, "token_counts": 43}}
{"dataset_split": "train", "id": "mall@c824eac:mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java#519-532", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "c824eacdb7758fe19ce801b5bd18a2bd2f275991", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java", "language": "Java"}, "method": {"name": "updateCouponStatus", "qualified_name": "com.macro.mall.portal.service.impl.OmsPortalOrderServiceImpl#updateCouponStatus", "start_line": 519, "end_line": 532, "signature": "updateCouponStatus(Long couponId, Long memberId, Integer useStatus)", "original_code": "private void updateCouponStatus(Long couponId, Long memberId, Integer useStatus) {\n        if (couponId == null) return;\n        //\u67e5\u8be2\u7b2c\u4e00\u5f20\u4f18\u60e0\u5238\n        SmsCouponHistoryExample example = new SmsCouponHistoryExample();\n        example.createCriteria().andMemberIdEqualTo(memberId)\n                .andCouponIdEqualTo(couponId).andUseStatusEqualTo(useStatus == 0 ? 1 : 0);\n        List<SmsCouponHistory> couponHistoryList = couponHistoryMapper.selectByExample(example);\n        if (!CollectionUtils.isEmpty(couponHistoryList)) {\n            SmsCouponHistory couponHistory = couponHistoryList.get(0);\n            couponHistory.setUseTime(new Date());\n            couponHistory.setUseStatus(useStatus);\n            couponHistoryMapper.updateByPrimaryKeySelective(couponHistory);\n        }\n    }", "doc_comment": "/**\n     * \u5c06\u4f18\u60e0\u5238\u4fe1\u606f\u66f4\u6539\u4e3a\u6307\u5b9a\u72b6\u6001\n     *\n     * @param couponId  \u4f18\u60e0\u5238id\n     * @param memberId  \u4f1a\u5458id\n     * @param useStatus 0->\u672a\u4f7f\u7528\uff1b1->\u5df2\u4f7f\u7528\n     */"}, "code_tokens": ["void", "updateCouponStatus", "private", "(", ",", ",", ")", "{", "//\u67e5\u8be2\u7b2c\u4e00\u5f20\u4f18\u60e0\u5238", "}", "Long", "couponId", "Long", "memberId", "Integer", "useStatus", "if", "SmsCouponHistoryExample", ";", ";", ";", "if", "(", ")", "return", ";", "example", "=", ".", "andUseStatusEqualTo", "List", "couponHistoryList", "=", "(", ")", "{", "}", "couponId", "==", "null", "new", "SmsCouponHistoryExample", ".", "andCouponIdEqualTo", "(", ")", "<", "SmsCouponHistory", ">", "couponHistoryMapper", ".", "selectByExample", "!", "SmsCouponHistory", ";", ";", ";", ";", "(", ")", ".", "andMemberIdEqualTo", "(", "couponId", ")", "?", "1", ":", "0", "(", "example", ")", "CollectionUtils", ".", "isEmpty", "couponHistory", "=", "couponHistory", ".", "setUseTime", "couponHistory", ".", "setUseStatus", "couponHistoryMapper", ".", "updateByPrimaryKeySelective", "example", ".", "createCriteria", "(", "memberId", ")", "useStatus", "==", "0", "(", "couponHistoryList", ")", "couponHistoryList", ".", "get", "(", ")", "(", "useStatus", ")", "(", "couponHistory", ")", "(", ")", "(", "0", ")", "new", "Date", "(", ")"], "metrics": {"cyclomatic_complexity": 3, "n_ast_nodes": 172, "ast_depth": 11, "n_identifiers": 19, "vocab_size": 48, "n_whitespaces": 168, "n_words": 54, "nloc": 14, "token_counts": 118}}
{"dataset_split": "train", "id": "mall@c824eac:mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java#534-543", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "c824eacdb7758fe19ce801b5bd18a2bd2f275991", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java", "language": "Java"}, "method": {"name": "handleRealAmount", "qualified_name": "com.macro.mall.portal.service.impl.OmsPortalOrderServiceImpl#handleRealAmount", "start_line": 534, "end_line": 543, "signature": "handleRealAmount(List<OmsOrderItem> orderItemList)", "original_code": "private void handleRealAmount(List<OmsOrderItem> orderItemList) {\n        for (OmsOrderItem orderItem : orderItemList) {\n            //\u539f\u4ef7-\u4fc3\u9500\u4f18\u60e0-\u4f18\u60e0\u5238\u62b5\u6263-\u79ef\u5206\u62b5\u6263\n            BigDecimal realAmount = orderItem.getProductPrice()\n                    .subtract(orderItem.getPromotionAmount())\n                    .subtract(orderItem.getCouponAmount())\n                    .subtract(orderItem.getIntegrationAmount());\n            orderItem.setRealAmount(realAmount);\n        }\n    }", "doc_comment": ""}, "code_tokens": ["void", "handleRealAmount", "private", "(", ")", "{", "}", "orderItemList", "for", "(", "OmsOrderItem", "orderItem", ":", "orderItemList", ")", "List", "{", "//\u539f\u4ef7-\u4fc3\u9500\u4f18\u60e0-\u4f18\u60e0\u5238\u62b5\u6263-\u79ef\u5206\u62b5\u6263", "}", "<", "OmsOrderItem", ">", "BigDecimal", ";", ";", "realAmount", "=", "orderItem", ".", "setRealAmount", ".", "subtract", "(", "realAmount", ")", ".", "subtract", "(", ")", ".", "subtract", "(", ")", "orderItem", ".", "getIntegrationAmount", "orderItem", ".", "getProductPrice", "(", ")", "orderItem", ".", "getCouponAmount", "(", ")", "(", ")", "orderItem", ".", "getPromotionAmount", "(", ")", "(", ")"], "metrics": {"cyclomatic_complexity": 2, "n_ast_nodes": 94, "ast_depth": 14, "n_identifiers": 10, "vocab_size": 27, "n_whitespaces": 137, "n_words": 30, "nloc": 10, "token_counts": 65}}
{"dataset_split": "train", "id": "mall@c824eac:mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java#548-559", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "c824eacdb7758fe19ce801b5bd18a2bd2f275991", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java", "language": "Java"}, "method": {"name": "getOrderPromotionInfo", "qualified_name": "com.macro.mall.portal.service.impl.OmsPortalOrderServiceImpl#getOrderPromotionInfo", "start_line": 548, "end_line": 559, "signature": "getOrderPromotionInfo(List<OmsOrderItem> orderItemList)", "original_code": "private String getOrderPromotionInfo(List<OmsOrderItem> orderItemList) {\n        StringBuilder sb = new StringBuilder();\n        for (OmsOrderItem orderItem : orderItemList) {\n            sb.append(orderItem.getPromotionName());\n            sb.append(\";\");\n        }\n        String result = sb.toString();\n        if (result.endsWith(\";\")) {\n            result = result.substring(0, result.length() - 1);\n        }\n        return result;\n    }", "doc_comment": "/**\n     * \u83b7\u53d6\u8ba2\u5355\u4fc3\u9500\u4fe1\u606f\n     */"}, "code_tokens": ["String", "getOrderPromotionInfo", "private", "(", ")", "{", "}", "orderItemList", "StringBuilder", ";", "for", "(", "OmsOrderItem", "orderItem", ":", "orderItemList", ")", "String", ";", "if", "return", "result", ";", "List", "sb", "=", "{", "}", "result", "=", "(", ")", "{", "}", "<", "OmsOrderItem", ">", "new", "StringBuilder", ";", ";", "sb", ".", "toString", "result", ".", "endsWith", ";", "(", ")", "sb", ".", "append", "sb", ".", "append", "(", ")", "(", ")", "result", "=", "(", ")", "(", ")", "\"", ";", "\"", "result", ".", "substring", "orderItem", ".", "getPromotionName", "\"", ";", "\"", "(", "0", ",", ")", "(", ")", "-", "1", "result", ".", "length", "(", ")"], "metrics": {"cyclomatic_complexity": 3, "n_ast_nodes": 132, "ast_depth": 13, "n_identifiers": 11, "vocab_size": 35, "n_whitespaces": 131, "n_words": 36, "nloc": 12, "token_counts": 91}}
{"dataset_split": "train", "id": "mall@c824eac:mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java#564-572", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "c824eacdb7758fe19ce801b5bd18a2bd2f275991", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java", "language": "Java"}, "method": {"name": "calcPayAmount", "qualified_name": "com.macro.mall.portal.service.impl.OmsPortalOrderServiceImpl#calcPayAmount", "start_line": 564, "end_line": 572, "signature": "calcPayAmount(OmsOrder order)", "original_code": "private BigDecimal calcPayAmount(OmsOrder order) {\n        //\u603b\u91d1\u989d+\u8fd0\u8d39-\u4fc3\u9500\u4f18\u60e0-\u4f18\u60e0\u5238\u4f18\u60e0-\u79ef\u5206\u62b5\u6263\n        BigDecimal payAmount = order.getTotalAmount()\n                .add(order.getFreightAmount())\n                .subtract(order.getPromotionAmount())\n                .subtract(order.getCouponAmount())\n                .subtract(order.getIntegrationAmount());\n        return payAmount;\n    }", "doc_comment": "/**\n     * \u8ba1\u7b97\u8ba2\u5355\u5e94\u4ed8\u91d1\u989d\n     */"}, "code_tokens": ["BigDecimal", "calcPayAmount", "private", "(", ")", "{", "//\u603b\u91d1\u989d+\u8fd0\u8d39-\u4fc3\u9500\u4f18\u60e0-\u4f18\u60e0\u5238\u4f18\u60e0-\u79ef\u5206\u62b5\u6263", "}", "OmsOrder", "order", "BigDecimal", ";", "return", "payAmount", ";", "payAmount", "=", ".", "subtract", ".", "subtract", "(", ")", ".", "subtract", "(", ")", "order", ".", "getIntegrationAmount", ".", "add", "(", ")", "order", ".", "getCouponAmount", "(", ")", "order", ".", "getTotalAmount", "(", ")", "order", ".", "getPromotionAmount", "(", ")", "(", ")", "order", ".", "getFreightAmount", "(", ")", "(", ")"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 85, "ast_depth": 13, "n_identifiers": 10, "vocab_size": 22, "n_whitespaces": 108, "n_words": 28, "nloc": 9, "token_counts": 58}}
{"dataset_split": "train", "id": "mall@c824eac:mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java#577-585", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "c824eacdb7758fe19ce801b5bd18a2bd2f275991", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java", "language": "Java"}, "method": {"name": "calcIntegrationAmount", "qualified_name": "com.macro.mall.portal.service.impl.OmsPortalOrderServiceImpl#calcIntegrationAmount", "start_line": 577, "end_line": 585, "signature": "calcIntegrationAmount(List<OmsOrderItem> orderItemList)", "original_code": "private BigDecimal calcIntegrationAmount(List<OmsOrderItem> orderItemList) {\n        BigDecimal integrationAmount = new BigDecimal(0);\n        for (OmsOrderItem orderItem : orderItemList) {\n            if (orderItem.getIntegrationAmount() != null) {\n                integrationAmount = integrationAmount.add(orderItem.getIntegrationAmount().multiply(new BigDecimal(orderItem.getProductQuantity())));\n            }\n        }\n        return integrationAmount;\n    }", "doc_comment": "/**\n     * \u8ba1\u7b97\u8ba2\u5355\u4f18\u60e0\u5238\u91d1\u989d\n     */"}, "code_tokens": ["BigDecimal", "calcIntegrationAmount", "private", "(", ")", "{", "}", "orderItemList", "BigDecimal", ";", "for", "(", "OmsOrderItem", "orderItem", ":", "orderItemList", ")", "return", "integrationAmount", ";", "List", "integrationAmount", "=", "{", "}", "<", "OmsOrderItem", ">", "new", "BigDecimal", "if", "(", "0", ")", "(", ")", "{", "}", "!=", "null", ";", "orderItem", ".", "getIntegrationAmount", "integrationAmount", "=", "(", ")", "integrationAmount", ".", "add", "(", ")", ".", "multiply", "orderItem", ".", "getIntegrationAmount", "(", ")", "(", ")", "new", "BigDecimal", "(", ")", "orderItem", ".", "getProductQuantity", "(", ")"], "metrics": {"cyclomatic_complexity": 3, "n_ast_nodes": 104, "ast_depth": 18, "n_identifiers": 8, "vocab_size": 29, "n_whitespaces": 105, "n_words": 31, "nloc": 9, "token_counts": 71}}
{"dataset_split": "train", "id": "mall@c824eac:mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java#590-598", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "c824eacdb7758fe19ce801b5bd18a2bd2f275991", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java", "language": "Java"}, "method": {"name": "calcCouponAmount", "qualified_name": "com.macro.mall.portal.service.impl.OmsPortalOrderServiceImpl#calcCouponAmount", "start_line": 590, "end_line": 598, "signature": "calcCouponAmount(List<OmsOrderItem> orderItemList)", "original_code": "private BigDecimal calcCouponAmount(List<OmsOrderItem> orderItemList) {\n        BigDecimal couponAmount = new BigDecimal(0);\n        for (OmsOrderItem orderItem : orderItemList) {\n            if (orderItem.getCouponAmount() != null) {\n                couponAmount = couponAmount.add(orderItem.getCouponAmount().multiply(new BigDecimal(orderItem.getProductQuantity())));\n            }\n        }\n        return couponAmount;\n    }", "doc_comment": "/**\n     * \u8ba1\u7b97\u8ba2\u5355\u4f18\u60e0\u5238\u91d1\u989d\n     */"}, "code_tokens": ["BigDecimal", "calcCouponAmount", "private", "(", ")", "{", "}", "orderItemList", "BigDecimal", ";", "for", "(", "OmsOrderItem", "orderItem", ":", "orderItemList", ")", "return", "couponAmount", ";", "List", "couponAmount", "=", "{", "}", "<", "OmsOrderItem", ">", "new", "BigDecimal", "if", "(", "0", ")", "(", ")", "{", "}", "!=", "null", ";", "orderItem", ".", "getCouponAmount", "couponAmount", "=", "(", ")", "couponAmount", ".", "add", "(", ")", ".", "multiply", "orderItem", ".", "getCouponAmount", "(", ")", "(", ")", "new", "BigDecimal", "(", ")", "orderItem", ".", "getProductQuantity", "(", ")"], "metrics": {"cyclomatic_complexity": 3, "n_ast_nodes": 104, "ast_depth": 18, "n_identifiers": 8, "vocab_size": 29, "n_whitespaces": 105, "n_words": 31, "nloc": 9, "token_counts": 71}}
{"dataset_split": "train", "id": "mall@c824eac:mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java#603-611", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "c824eacdb7758fe19ce801b5bd18a2bd2f275991", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java", "language": "Java"}, "method": {"name": "calcPromotionAmount", "qualified_name": "com.macro.mall.portal.service.impl.OmsPortalOrderServiceImpl#calcPromotionAmount", "start_line": 603, "end_line": 611, "signature": "calcPromotionAmount(List<OmsOrderItem> orderItemList)", "original_code": "private BigDecimal calcPromotionAmount(List<OmsOrderItem> orderItemList) {\n        BigDecimal promotionAmount = new BigDecimal(0);\n        for (OmsOrderItem orderItem : orderItemList) {\n            if (orderItem.getPromotionAmount() != null) {\n                promotionAmount = promotionAmount.add(orderItem.getPromotionAmount().multiply(new BigDecimal(orderItem.getProductQuantity())));\n            }\n        }\n        return promotionAmount;\n    }", "doc_comment": "/**\n     * \u8ba1\u7b97\u8ba2\u5355\u6d3b\u52a8\u4f18\u60e0\n     */"}, "code_tokens": ["BigDecimal", "calcPromotionAmount", "private", "(", ")", "{", "}", "orderItemList", "BigDecimal", ";", "for", "(", "OmsOrderItem", "orderItem", ":", "orderItemList", ")", "return", "promotionAmount", ";", "List", "promotionAmount", "=", "{", "}", "<", "OmsOrderItem", ">", "new", "BigDecimal", "if", "(", "0", ")", "(", ")", "{", "}", "!=", "null", ";", "orderItem", ".", "getPromotionAmount", "promotionAmount", "=", "(", ")", "promotionAmount", ".", "add", "(", ")", ".", "multiply", "orderItem", ".", "getPromotionAmount", "(", ")", "(", ")", "new", "BigDecimal", "(", ")", "orderItem", ".", "getProductQuantity", "(", ")"], "metrics": {"cyclomatic_complexity": 3, "n_ast_nodes": 104, "ast_depth": 18, "n_identifiers": 8, "vocab_size": 29, "n_whitespaces": 105, "n_words": 31, "nloc": 9, "token_counts": 71}}
{"dataset_split": "train", "id": "mall@c824eac:mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java#621-645", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "c824eacdb7758fe19ce801b5bd18a2bd2f275991", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java", "language": "Java"}, "method": {"name": "getUseIntegrationAmount", "qualified_name": "com.macro.mall.portal.service.impl.OmsPortalOrderServiceImpl#getUseIntegrationAmount", "start_line": 621, "end_line": 645, "signature": "getUseIntegrationAmount(Integer useIntegration, BigDecimal totalAmount, UmsMember currentMember, boolean hasCoupon)", "original_code": "private BigDecimal getUseIntegrationAmount(Integer useIntegration, BigDecimal totalAmount, UmsMember currentMember, boolean hasCoupon) {\n        BigDecimal zeroAmount = new BigDecimal(0);\n        //\u5224\u65ad\u7528\u6237\u662f\u5426\u6709\u8fd9\u4e48\u591a\u79ef\u5206\n        if (useIntegration.compareTo(currentMember.getIntegration()) > 0) {\n            return zeroAmount;\n        }\n        //\u6839\u636e\u79ef\u5206\u4f7f\u7528\u89c4\u5219\u5224\u65ad\u662f\u5426\u53ef\u7528\n        //\u662f\u5426\u53ef\u4e0e\u4f18\u60e0\u5238\u5171\u7528\n        UmsIntegrationConsumeSetting integrationConsumeSetting = integrationConsumeSettingMapper.selectByPrimaryKey(1L);\n        if (hasCoupon && integrationConsumeSetting.getCouponStatus().equals(0)) {\n            //\u4e0d\u53ef\u4e0e\u4f18\u60e0\u5238\u5171\u7528\n            return zeroAmount;\n        }\n        //\u662f\u5426\u8fbe\u5230\u6700\u4f4e\u4f7f\u7528\u79ef\u5206\u95e8\u69db\n        if (useIntegration.compareTo(integrationConsumeSetting.getUseUnit()) < 0) {\n            return zeroAmount;\n        }\n        //\u662f\u5426\u8d85\u8fc7\u8ba2\u5355\u62b5\u7528\u6700\u9ad8\u767e\u5206\u6bd4\n        BigDecimal integrationAmount = new BigDecimal(useIntegration).divide(new BigDecimal(integrationConsumeSetting.getUseUnit()), 2, RoundingMode.HALF_EVEN);\n        BigDecimal maxPercent = new BigDecimal(integrationConsumeSetting.getMaxPercentPerOrder()).divide(new BigDecimal(100), 2, RoundingMode.HALF_EVEN);\n        if (integrationAmount.compareTo(totalAmount.multiply(maxPercent)) > 0) {\n            return zeroAmount;\n        }\n        return integrationAmount;\n    }", "doc_comment": "/**\n     * \u83b7\u53d6\u53ef\u7528\u79ef\u5206\u62b5\u6263\u91d1\u989d\n     *\n     * @param useIntegration \u4f7f\u7528\u7684\u79ef\u5206\u6570\u91cf\n     * @param totalAmount    \u8ba2\u5355\u603b\u91d1\u989d\n     * @param currentMember  \u4f7f\u7528\u7684\u7528\u6237\n     * @param hasCoupon      \u662f\u5426\u5df2\u7ecf\u4f7f\u7528\u4f18\u60e0\u5238\n     */"}, "code_tokens": ["BigDecimal", "getUseIntegrationAmount", "private", "(", ",", ",", ",", ")", "{", "//\u5224\u65ad\u7528\u6237\u662f\u5426\u6709\u8fd9\u4e48\u591a\u79ef\u5206", "//\u6839\u636e\u79ef\u5206\u4f7f\u7528\u89c4\u5219\u5224\u65ad\u662f\u5426\u53ef\u7528", "//\u662f\u5426\u53ef\u4e0e\u4f18\u60e0\u5238\u5171\u7528", "//\u662f\u5426\u8fbe\u5230\u6700\u4f4e\u4f7f\u7528\u79ef\u5206\u95e8\u69db", "//\u662f\u5426\u8d85\u8fc7\u8ba2\u5355\u62b5\u7528\u6700\u9ad8\u767e\u5206\u6bd4", "}", "Integer", "useIntegration", "BigDecimal", "totalAmount", "UmsMember", "currentMember", "boolean", "hasCoupon", "BigDecimal", ";", "if", "UmsIntegrationConsumeSetting", ";", "if", "if", "BigDecimal", ";", "BigDecimal", ";", "if", "return", "integrationAmount", ";", "zeroAmount", "=", "(", ")", "{", "}", "integrationConsumeSetting", "=", "(", ")", "{", "//\u4e0d\u53ef\u4e0e\u4f18\u60e0\u5238\u5171\u7528", "}", "(", ")", "{", "}", "integrationAmount", "=", "maxPercent", "=", "(", ")", "{", "}", "new", "BigDecimal", ">", "0", "return", "zeroAmount", ";", "integrationConsumeSettingMapper", ".", "selectByPrimaryKey", "hasCoupon", "&&", "return", "zeroAmount", ";", "<", "0", "return", "zeroAmount", ";", ".", "divide", ".", "divide", ">", "0", "return", "zeroAmount", ";", "(", "0", ")", "useIntegration", ".", "compareTo", "(", "1L", ")", ".", "equals", "useIntegration", ".", "compareTo", "new", "BigDecimal", "(", ",", "2", ",", ")", "new", "BigDecimal", "(", ",", "2", ",", ")", "integrationAmount", ".", "compareTo", "(", ")", "integrationConsumeSetting", ".", "getCouponStatus", "(", "0", ")", "(", ")", "(", "useIntegration", ")", "new", "BigDecimal", "RoundingMode", ".", "HALF_EVEN", "(", ")", "new", "BigDecimal", "RoundingMode", ".", "HALF_EVEN", "(", ")", "currentMember", ".", "getIntegration", "(", ")", "integrationConsumeSetting", ".", "getUseUnit", "(", ")", "integrationConsumeSetting", ".", "getMaxPercentPerOrder", "(", "100", ")", "totalAmount", ".", "multiply", "(", ")", "(", ")", "integrationConsumeSetting", ".", "getUseUnit", "(", ")", "(", "maxPercent", ")", "(", ")"], "metrics": {"cyclomatic_complexity": 6, "n_ast_nodes": 259, "ast_depth": 12, "n_identifiers": 21, "vocab_size": 51, "n_whitespaces": 284, "n_words": 88, "nloc": 25, "token_counts": 183}}
{"dataset_split": "train", "id": "mall@c824eac:mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java#653-667", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "c824eacdb7758fe19ce801b5bd18a2bd2f275991", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java", "language": "Java"}, "method": {"name": "handleCouponAmount", "qualified_name": "com.macro.mall.portal.service.impl.OmsPortalOrderServiceImpl#handleCouponAmount", "start_line": 653, "end_line": 667, "signature": "handleCouponAmount(List<OmsOrderItem> orderItemList, SmsCouponHistoryDetail couponHistoryDetail)", "original_code": "private void handleCouponAmount(List<OmsOrderItem> orderItemList, SmsCouponHistoryDetail couponHistoryDetail) {\n        SmsCoupon coupon = couponHistoryDetail.getCoupon();\n        if (coupon.getUseType().equals(0)) {\n            //\u5168\u573a\u901a\u7528\n            calcPerCouponAmount(orderItemList, coupon);\n        } else if (coupon.getUseType().equals(1)) {\n            //\u6307\u5b9a\u5206\u7c7b\n            List<OmsOrderItem> couponOrderItemList = getCouponOrderItemByRelation(couponHistoryDetail, orderItemList, 0);\n            calcPerCouponAmount(couponOrderItemList, coupon);\n        } else if (coupon.getUseType().equals(2)) {\n            //\u6307\u5b9a\u5546\u54c1\n            List<OmsOrderItem> couponOrderItemList = getCouponOrderItemByRelation(couponHistoryDetail, orderItemList, 1);\n            calcPerCouponAmount(couponOrderItemList, coupon);\n        }\n    }", "doc_comment": "/**\n     * \u5bf9\u4f18\u60e0\u5238\u4f18\u60e0\u8fdb\u884c\u5904\u7406\n     *\n     * @param orderItemList       order_item\u5217\u8868\n     * @param couponHistoryDetail \u53ef\u7528\u4f18\u60e0\u5238\u8be6\u60c5\n     */"}, "code_tokens": ["void", "handleCouponAmount", "private", "(", ",", ")", "{", "}", "orderItemList", "SmsCouponHistoryDetail", "couponHistoryDetail", "SmsCoupon", ";", "if", "else", "List", "coupon", "=", "(", ")", "{", "//\u5168\u573a\u901a\u7528", "}", "if", "else", "<", "OmsOrderItem", ">", "couponHistoryDetail", ".", "getCoupon", ".", "equals", ";", "(", ")", "{", "//\u6307\u5b9a\u5206\u7c7b", "}", "if", "(", ")", "coupon", ".", "getUseType", "(", "0", ")", "calcPerCouponAmount", ".", "equals", ";", ";", "(", ")", "{", "//\u6307\u5b9a\u5546\u54c1", "}", "(", ")", "(", "orderItemList", ",", "coupon", ")", "coupon", ".", "getUseType", "(", "1", ")", "List", "couponOrderItemList", "=", "calcPerCouponAmount", ".", "equals", ";", ";", "(", ")", "<", "OmsOrderItem", ">", "getCouponOrderItemByRelation", "(", "couponOrderItemList", ",", "coupon", ")", "coupon", ".", "getUseType", "(", "2", ")", "List", "couponOrderItemList", "=", "calcPerCouponAmount", "(", "couponHistoryDetail", ",", "orderItemList", ",", "0", ")", "(", ")", "<", "OmsOrderItem", ">", "getCouponOrderItemByRelation", "(", "couponOrderItemList", ",", "coupon", ")", "(", "couponHistoryDetail", ",", "orderItemList", ",", "1", ")"], "metrics": {"cyclomatic_complexity": 4, "n_ast_nodes": 180, "ast_depth": 12, "n_identifiers": 10, "vocab_size": 34, "n_whitespaces": 186, "n_words": 55, "nloc": 15, "token_counts": 125}}
{"dataset_split": "train", "id": "mall@c824eac:mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java#674-681", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "c824eacdb7758fe19ce801b5bd18a2bd2f275991", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java", "language": "Java"}, "method": {"name": "calcPerCouponAmount", "qualified_name": "com.macro.mall.portal.service.impl.OmsPortalOrderServiceImpl#calcPerCouponAmount", "start_line": 674, "end_line": 681, "signature": "calcPerCouponAmount(List<OmsOrderItem> orderItemList, SmsCoupon coupon)", "original_code": "private void calcPerCouponAmount(List<OmsOrderItem> orderItemList, SmsCoupon coupon) {\n        BigDecimal totalAmount = calcTotalAmount(orderItemList);\n        for (OmsOrderItem orderItem : orderItemList) {\n            //(\u5546\u54c1\u4ef7\u683c/\u53ef\u7528\u5546\u54c1\u603b\u4ef7)*\u4f18\u60e0\u5238\u9762\u989d\n            BigDecimal couponAmount = orderItem.getProductPrice().divide(totalAmount, 3, RoundingMode.HALF_EVEN).multiply(coupon.getAmount());\n            orderItem.setCouponAmount(couponAmount);\n        }\n    }", "doc_comment": "/**\n     * \u5bf9\u6bcf\u4e2a\u4e0b\u5355\u5546\u54c1\u8fdb\u884c\u4f18\u60e0\u5238\u91d1\u989d\u5206\u644a\u7684\u8ba1\u7b97\n     *\n     * @param orderItemList \u53ef\u7528\u4f18\u60e0\u5238\u7684\u4e0b\u5355\u5546\u54c1\u5546\u54c1\n     */"}, "code_tokens": ["void", "calcPerCouponAmount", "private", "(", ",", ")", "{", "}", "orderItemList", "SmsCoupon", "coupon", "BigDecimal", ";", "for", "(", "OmsOrderItem", "orderItem", ":", "orderItemList", ")", "List", "totalAmount", "=", "{", "//(\u5546\u54c1\u4ef7\u683c/\u53ef\u7528\u5546\u54c1\u603b\u4ef7)*\u4f18\u60e0\u5238\u9762\u989d", "}", "<", "OmsOrderItem", ">", "calcTotalAmount", "BigDecimal", ";", ";", "(", "orderItemList", ")", "couponAmount", "=", "orderItem", ".", "setCouponAmount", ".", "multiply", "(", "couponAmount", ")", ".", "divide", "(", ")", "orderItem", ".", "getProductPrice", "(", "totalAmount", ",", "3", ",", ")", "coupon", ".", "getAmount", "(", ")", "RoundingMode", ".", "HALF_EVEN", "(", ")"], "metrics": {"cyclomatic_complexity": 2, "n_ast_nodes": 98, "ast_depth": 12, "n_identifiers": 14, "vocab_size": 34, "n_whitespaces": 90, "n_words": 34, "nloc": 8, "token_counts": 69}}
{"dataset_split": "train", "id": "mall@c824eac:mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java#690-718", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "c824eacdb7758fe19ce801b5bd18a2bd2f275991", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java", "language": "Java"}, "method": {"name": "getCouponOrderItemByRelation", "qualified_name": "com.macro.mall.portal.service.impl.OmsPortalOrderServiceImpl#getCouponOrderItemByRelation", "start_line": 690, "end_line": 718, "signature": "getCouponOrderItemByRelation(SmsCouponHistoryDetail couponHistoryDetail, List<OmsOrderItem> orderItemList, int type)", "original_code": "private List<OmsOrderItem> getCouponOrderItemByRelation(SmsCouponHistoryDetail couponHistoryDetail, List<OmsOrderItem> orderItemList, int type) {\n        List<OmsOrderItem> result = new ArrayList<>();\n        if (type == 0) {\n            List<Long> categoryIdList = new ArrayList<>();\n            for (SmsCouponProductCategoryRelation productCategoryRelation : couponHistoryDetail.getCategoryRelationList()) {\n                categoryIdList.add(productCategoryRelation.getProductCategoryId());\n            }\n            for (OmsOrderItem orderItem : orderItemList) {\n                if (categoryIdList.contains(orderItem.getProductCategoryId())) {\n                    result.add(orderItem);\n                } else {\n                    orderItem.setCouponAmount(new BigDecimal(0));\n                }\n            }\n        } else if (type == 1) {\n            List<Long> productIdList = new ArrayList<>();\n            for (SmsCouponProductRelation productRelation : couponHistoryDetail.getProductRelationList()) {\n                productIdList.add(productRelation.getProductId());\n            }\n            for (OmsOrderItem orderItem : orderItemList) {\n                if (productIdList.contains(orderItem.getProductId())) {\n                    result.add(orderItem);\n                } else {\n                    orderItem.setCouponAmount(new BigDecimal(0));\n                }\n            }\n        }\n        return result;\n    }", "doc_comment": "/**\n     * \u83b7\u53d6\u4e0e\u4f18\u60e0\u5238\u6709\u5173\u7cfb\u7684\u4e0b\u5355\u5546\u54c1\n     *\n     * @param couponHistoryDetail \u4f18\u60e0\u5238\u8be6\u60c5\n     * @param orderItemList       \u4e0b\u5355\u5546\u54c1\n     * @param type                \u4f7f\u7528\u5173\u7cfb\u7c7b\u578b\uff1a0->\u76f8\u5173\u5206\u7c7b\uff1b1->\u6307\u5b9a\u5546\u54c1\n     */"}, "code_tokens": ["getCouponOrderItemByRelation", "private", "List", "(", ",", ",", ")", "{", "}", "<", "OmsOrderItem", ">", "SmsCouponHistoryDetail", "couponHistoryDetail", "orderItemList", "type", ";", "if", "else", "return", "result", ";", "List", "int", "List", "result", "=", "(", ")", "{", "}", "if", "<", "OmsOrderItem", ">", "<", "OmsOrderItem", ">", "new", "type", "==", "0", ";", "for", "(", "SmsCouponProductCategoryRelation", "productCategoryRelation", ":", ")", "for", "(", "OmsOrderItem", "orderItem", ":", "orderItemList", ")", "(", ")", "{", "}", "ArrayList", "(", ")", "List", "categoryIdList", "=", "couponHistoryDetail", ".", "getCategoryRelationList", "{", "}", "{", "}", "type", "==", "1", ";", "for", "(", "SmsCouponProductRelation", "productRelation", ":", ")", "for", "(", "OmsOrderItem", "orderItem", ":", "orderItemList", ")", "<", ">", "<", "Long", ">", "new", "(", ")", ";", "if", "else", "List", "productIdList", "=", "couponHistoryDetail", ".", "getProductRelationList", "{", "}", "{", "}", "ArrayList", "(", ")", "categoryIdList", ".", "add", "(", ")", "{", "}", "{", "}", "<", "Long", ">", "new", "(", ")", ";", "if", "else", "<", ">", "(", ")", "categoryIdList", ".", "contains", ";", ";", "ArrayList", "(", ")", "productIdList", ".", "add", "(", ")", "{", "}", "{", "}", "productCategoryRelation", ".", "getProductCategoryId", "(", ")", "result", ".", "add", "orderItem", ".", "setCouponAmount", "<", ">", "(", ")", "productIdList", ".", "contains", ";", ";", "(", ")", "orderItem", ".", "getProductCategoryId", "(", "orderItem", ")", "(", ")", "productRelation", ".", "getProductId", "(", ")", "result", ".", "add", "orderItem", ".", "setCouponAmount", "(", ")", "new", "BigDecimal", "(", ")", "orderItem", ".", "getProductId", "(", "orderItem", ")", "(", ")", "(", "0", ")", "(", ")", "new", "BigDecimal", "(", "0", ")"], "metrics": {"cyclomatic_complexity": 9, "n_ast_nodes": 318, "ast_depth": 16, "n_identifiers": 17, "vocab_size": 46, "n_whitespaces": 461, "n_words": 89, "nloc": 29, "token_counts": 218}}
{"dataset_split": "train", "id": "mall@c824eac:mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java#726-734", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "c824eacdb7758fe19ce801b5bd18a2bd2f275991", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java", "language": "Java"}, "method": {"name": "getUseCoupon", "qualified_name": "com.macro.mall.portal.service.impl.OmsPortalOrderServiceImpl#getUseCoupon", "start_line": 726, "end_line": 734, "signature": "getUseCoupon(List<CartPromotionItem> cartPromotionItemList, Long couponId)", "original_code": "private SmsCouponHistoryDetail getUseCoupon(List<CartPromotionItem> cartPromotionItemList, Long couponId) {\n        List<SmsCouponHistoryDetail> couponHistoryDetailList = memberCouponService.listCart(cartPromotionItemList, 1);\n        for (SmsCouponHistoryDetail couponHistoryDetail : couponHistoryDetailList) {\n            if (couponHistoryDetail.getCoupon().getId().equals(couponId)) {\n                return couponHistoryDetail;\n            }\n        }\n        return null;\n    }", "doc_comment": "/**\n     * \u83b7\u53d6\u8be5\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u7684\u4f18\u60e0\u5238\n     *\n     * @param cartPromotionItemList \u8d2d\u7269\u8f66\u4f18\u60e0\u5217\u8868\n     * @param couponId              \u4f7f\u7528\u4f18\u60e0\u5238id\n     */"}, "code_tokens": ["SmsCouponHistoryDetail", "getUseCoupon", "private", "(", ",", ")", "{", "}", "cartPromotionItemList", "Long", "couponId", ";", "for", "(", "SmsCouponHistoryDetail", "couponHistoryDetail", ":", "couponHistoryDetailList", ")", "return", "null", ";", "List", "List", "couponHistoryDetailList", "=", "{", "}", "<", "CartPromotionItem", ">", "<", "SmsCouponHistoryDetail", ">", "memberCouponService", ".", "listCart", "if", "(", "cartPromotionItemList", ",", "1", ")", "(", ")", "{", "}", ".", "equals", "return", "couponHistoryDetail", ";", ".", "getId", "(", "couponId", ")", "couponHistoryDetail", ".", "getCoupon", "(", ")", "(", ")"], "metrics": {"cyclomatic_complexity": 3, "n_ast_nodes": 92, "ast_depth": 12, "n_identifiers": 10, "vocab_size": 31, "n_whitespaces": 103, "n_words": 29, "nloc": 9, "token_counts": 64}}
{"dataset_split": "train", "id": "mall@c824eac:mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java#739-745", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "c824eacdb7758fe19ce801b5bd18a2bd2f275991", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java", "language": "Java"}, "method": {"name": "calcTotalAmount", "qualified_name": "com.macro.mall.portal.service.impl.OmsPortalOrderServiceImpl#calcTotalAmount", "start_line": 739, "end_line": 745, "signature": "calcTotalAmount(List<OmsOrderItem> orderItemList)", "original_code": "private BigDecimal calcTotalAmount(List<OmsOrderItem> orderItemList) {\n        BigDecimal totalAmount = new BigDecimal(\"0\");\n        for (OmsOrderItem item : orderItemList) {\n            totalAmount = totalAmount.add(item.getProductPrice().multiply(new BigDecimal(item.getProductQuantity())));\n        }\n        return totalAmount;\n    }", "doc_comment": "/**\n     * \u8ba1\u7b97\u603b\u91d1\u989d\n     */"}, "code_tokens": ["BigDecimal", "calcTotalAmount", "private", "(", ")", "{", "}", "orderItemList", "BigDecimal", ";", "for", "(", "OmsOrderItem", "item", ":", "orderItemList", ")", "return", "totalAmount", ";", "List", "totalAmount", "=", "{", "}", "<", "OmsOrderItem", ">", "new", "BigDecimal", ";", "(", ")", "totalAmount", "=", "\"", "0", "\"", "totalAmount", ".", "add", "(", ")", ".", "multiply", "item", ".", "getProductPrice", "(", ")", "(", ")", "new", "BigDecimal", "(", ")", "item", ".", "getProductQuantity", "(", ")"], "metrics": {"cyclomatic_complexity": 2, "n_ast_nodes": 89, "ast_depth": 16, "n_identifiers": 8, "vocab_size": 27, "n_whitespaces": 71, "n_words": 27, "nloc": 7, "token_counts": 61}}
{"dataset_split": "train", "id": "mall@c824eac:mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java#750-759", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "c824eacdb7758fe19ce801b5bd18a2bd2f275991", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java", "language": "Java"}, "method": {"name": "lockStock", "qualified_name": "com.macro.mall.portal.service.impl.OmsPortalOrderServiceImpl#lockStock", "start_line": 750, "end_line": 759, "signature": "lockStock(List<CartPromotionItem> cartPromotionItemList)", "original_code": "private void lockStock(List<CartPromotionItem> cartPromotionItemList) {\n        for (CartPromotionItem cartPromotionItem : cartPromotionItemList) {\n            PmsSkuStock skuStock = skuStockMapper.selectByPrimaryKey(cartPromotionItem.getProductSkuId());\n            skuStock.setLockStock(skuStock.getLockStock() + cartPromotionItem.getQuantity());\n            int count = portalOrderDao.lockStockBySkuId(cartPromotionItem.getProductSkuId(),cartPromotionItem.getQuantity());\n            if(count==0){\n                Asserts.fail(\"\u5e93\u5b58\u4e0d\u8db3\uff0c\u65e0\u6cd5\u4e0b\u5355\");\n            }\n        }\n    }", "doc_comment": "/**\n     * \u9501\u5b9a\u4e0b\u5355\u5546\u54c1\u7684\u6240\u6709\u5e93\u5b58\n     */"}, "code_tokens": ["void", "lockStock", "private", "(", ")", "{", "}", "cartPromotionItemList", "for", "(", "CartPromotionItem", "cartPromotionItem", ":", "cartPromotionItemList", ")", "List", "{", "}", "<", "CartPromotionItem", ">", "PmsSkuStock", ";", ";", ";", "if", "skuStock", "=", "skuStock", ".", "setLockStock", "int", "count", "=", "(", ")", "{", "}", "skuStockMapper", ".", "selectByPrimaryKey", "(", ")", "portalOrderDao", ".", "lockStockBySkuId", "count", "==", "0", ";", "(", ")", "+", "(", ",", ")", "Asserts", ".", "fail", "cartPromotionItem", ".", "getProductSkuId", "skuStock", ".", "getLockStock", "cartPromotionItem", ".", "getQuantity", "cartPromotionItem", ".", "getProductSkuId", "cartPromotionItem", ".", "getQuantity", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "\"", "\u5e93\u5b58\u4e0d\u8db3\uff0c\u65e0\u6cd5\u4e0b\u5355", "\""], "metrics": {"cyclomatic_complexity": 3, "n_ast_nodes": 130, "ast_depth": 12, "n_identifiers": 15, "vocab_size": 39, "n_whitespaces": 122, "n_words": 37, "nloc": 10, "token_counts": 89}}
{"dataset_split": "train", "id": "mall@c824eac:mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java#764-774", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "c824eacdb7758fe19ce801b5bd18a2bd2f275991", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java", "language": "Java"}, "method": {"name": "hasStock", "qualified_name": "com.macro.mall.portal.service.impl.OmsPortalOrderServiceImpl#hasStock", "start_line": 764, "end_line": 774, "signature": "hasStock(List<CartPromotionItem> cartPromotionItemList)", "original_code": "private boolean hasStock(List<CartPromotionItem> cartPromotionItemList) {\n        for (CartPromotionItem cartPromotionItem : cartPromotionItemList) {\n            if (cartPromotionItem.getRealStock()==null //\u5224\u65ad\u771f\u5b9e\u5e93\u5b58\u662f\u5426\u4e3a\u7a7a\n                    ||cartPromotionItem.getRealStock() <= 0 //\u5224\u65ad\u771f\u5b9e\u5e93\u5b58\u662f\u5426\u5c0f\u4e8e0\n                    || cartPromotionItem.getRealStock() < cartPromotionItem.getQuantity()) //\u5224\u65ad\u771f\u5b9e\u5e93\u5b58\u662f\u5426\u5c0f\u4e8e\u4e0b\u5355\u7684\u6570\u91cf\n            {\n                return false;\n            }\n        }\n        return true;\n    }", "doc_comment": "/**\n     * \u5224\u65ad\u4e0b\u5355\u5546\u54c1\u662f\u5426\u90fd\u6709\u5e93\u5b58\n     */"}, "code_tokens": ["boolean", "hasStock", "private", "(", ")", "{", "}", "cartPromotionItemList", "for", "(", "CartPromotionItem", "cartPromotionItem", ":", "cartPromotionItemList", ")", "return", "true", ";", "List", "{", "}", "<", "CartPromotionItem", ">", "if", "//\u5224\u65ad\u771f\u5b9e\u5e93\u5b58\u662f\u5426\u5c0f\u4e8e\u4e0b\u5355\u7684\u6570\u91cf", "(", ")", "{", "}", "//\u5224\u65ad\u771f\u5b9e\u5e93\u5b58\u662f\u5426\u5c0f\u4e8e0", "||", "return", "false", ";", "//\u5224\u65ad\u771f\u5b9e\u5e93\u5b58\u662f\u5426\u4e3a\u7a7a", "||", "<", "==", "null", "<=", "0", "cartPromotionItem", ".", "getRealStock", "cartPromotionItem", ".", "getQuantity", "cartPromotionItem", ".", "getRealStock", "cartPromotionItem", ".", "getRealStock", "(", ")", "(", ")", "(", ")", "(", ")"], "metrics": {"cyclomatic_complexity": 3, "n_ast_nodes": 90, "ast_depth": 13, "n_identifiers": 5, "vocab_size": 31, "n_whitespaces": 150, "n_words": 28, "nloc": 11, "token_counts": 62}}
{"dataset_split": "train", "id": "mall@c824eac:mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java#779-792", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "c824eacdb7758fe19ce801b5bd18a2bd2f275991", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/service/impl/OmsPortalOrderServiceImpl.java", "language": "Java"}, "method": {"name": "calcCartAmount", "qualified_name": "com.macro.mall.portal.service.impl.OmsPortalOrderServiceImpl#calcCartAmount", "start_line": 779, "end_line": 792, "signature": "calcCartAmount(List<CartPromotionItem> cartPromotionItemList)", "original_code": "private ConfirmOrderResult.CalcAmount calcCartAmount(List<CartPromotionItem> cartPromotionItemList) {\n        ConfirmOrderResult.CalcAmount calcAmount = new ConfirmOrderResult.CalcAmount();\n        calcAmount.setFreightAmount(new BigDecimal(0));\n        BigDecimal totalAmount = new BigDecimal(\"0\");\n        BigDecimal promotionAmount = new BigDecimal(\"0\");\n        for (CartPromotionItem cartPromotionItem : cartPromotionItemList) {\n            totalAmount = totalAmount.add(cartPromotionItem.getPrice().multiply(new BigDecimal(cartPromotionItem.getQuantity())));\n            promotionAmount = promotionAmount.add(cartPromotionItem.getReduceAmount().multiply(new BigDecimal(cartPromotionItem.getQuantity())));\n        }\n        calcAmount.setTotalAmount(totalAmount);\n        calcAmount.setPromotionAmount(promotionAmount);\n        calcAmount.setPayAmount(totalAmount.subtract(promotionAmount));\n        return calcAmount;\n    }", "doc_comment": "/**\n     * \u8ba1\u7b97\u8d2d\u7269\u8f66\u4e2d\u5546\u54c1\u7684\u4ef7\u683c\n     */"}, "code_tokens": ["calcCartAmount", "private", "ConfirmOrderResult", ".", "CalcAmount", "(", ")", "{", "}", "cartPromotionItemList", ";", ";", "BigDecimal", ";", "BigDecimal", ";", "for", "(", "CartPromotionItem", "cartPromotionItem", ":", "cartPromotionItemList", ")", ";", ";", ";", "return", "calcAmount", ";", "List", "ConfirmOrderResult", ".", "CalcAmount", "calcAmount", "=", "calcAmount", ".", "setFreightAmount", "totalAmount", "=", "promotionAmount", "=", "{", "}", "calcAmount", ".", "setTotalAmount", "calcAmount", ".", "setPromotionAmount", "calcAmount", ".", "setPayAmount", "<", "CartPromotionItem", ">", "new", "(", ")", "new", "BigDecimal", "new", "BigDecimal", ";", ";", "(", "totalAmount", ")", "(", "promotionAmount", ")", "(", ")", "ConfirmOrderResult", ".", "CalcAmount", "(", ")", "new", "BigDecimal", "(", ")", "(", ")", "totalAmount", "=", "promotionAmount", "=", "totalAmount", ".", "subtract", "(", "0", ")", "\"", "0", "\"", "\"", "0", "\"", "totalAmount", ".", "add", "promotionAmount", ".", "add", "(", "promotionAmount", ")", "(", ")", "(", ")", ".", "multiply", ".", "multiply", "cartPromotionItem", ".", "getPrice", "(", ")", "cartPromotionItem", ".", "getReduceAmount", "(", ")", "(", ")", "new", "BigDecimal", "(", ")", "new", "BigDecimal", "(", ")", "(", ")", "cartPromotionItem", ".", "getQuantity", "cartPromotionItem", ".", "getQuantity", "(", ")", "(", ")"], "metrics": {"cyclomatic_complexity": 2, "n_ast_nodes": 217, "ast_depth": 16, "n_identifiers": 16, "vocab_size": 37, "n_whitespaces": 150, "n_words": 65, "nloc": 14, "token_counts": 149}}
{"dataset_split": "train", "id": "mall@782f0d4:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionSessionService.java#16-16", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "782f0d43aa9554b170160ad63cebdf79a4d6bb3f", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionSessionService.java", "language": "Java"}, "method": {"name": "create", "qualified_name": "com.macro.mall.service.SmsFlashPromotionSessionService#create", "start_line": 16, "end_line": 16, "signature": "create(SmsFlashPromotionSession promotionSession)", "original_code": "int create(SmsFlashPromotionSession promotionSession);", "doc_comment": "/**\n     * \u6dfb\u52a0\u573a\u6b21\n     */"}, "code_tokens": ["create", ";", "int", "(", ")", "SmsFlashPromotionSession", "promotionSession"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 12, "ast_depth": 5, "n_identifiers": 2, "vocab_size": 7, "n_whitespaces": 2, "n_words": 4, "nloc": 1, "token_counts": 7}}
{"dataset_split": "train", "id": "mall@782f0d4:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionSessionService.java#21-21", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "782f0d43aa9554b170160ad63cebdf79a4d6bb3f", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionSessionService.java", "language": "Java"}, "method": {"name": "update", "qualified_name": "com.macro.mall.service.SmsFlashPromotionSessionService#update", "start_line": 21, "end_line": 21, "signature": "update(Long id, SmsFlashPromotionSession promotionSession)", "original_code": "int update(Long id, SmsFlashPromotionSession promotionSession);", "doc_comment": "/**\n     * \u4fee\u6539\u573a\u6b21\n     */"}, "code_tokens": ["update", ";", "int", "(", ",", ")", "Long", "id", "SmsFlashPromotionSession", "promotionSession"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 16, "ast_depth": 5, "n_identifiers": 3, "vocab_size": 10, "n_whitespaces": 4, "n_words": 6, "nloc": 1, "token_counts": 10}}
{"dataset_split": "train", "id": "mall@782f0d4:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionSessionService.java#26-26", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "782f0d43aa9554b170160ad63cebdf79a4d6bb3f", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionSessionService.java", "language": "Java"}, "method": {"name": "updateStatus", "qualified_name": "com.macro.mall.service.SmsFlashPromotionSessionService#updateStatus", "start_line": 26, "end_line": 26, "signature": "updateStatus(Long id, Integer status)", "original_code": "int updateStatus(Long id, Integer status);", "doc_comment": "/**\n     * \u4fee\u6539\u573a\u6b21\u542f\u7528\u72b6\u6001\n     */"}, "code_tokens": ["updateStatus", ";", "int", "(", ",", ")", "Long", "id", "Integer", "status"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 16, "ast_depth": 5, "n_identifiers": 3, "vocab_size": 10, "n_whitespaces": 4, "n_words": 6, "nloc": 1, "token_counts": 10}}
{"dataset_split": "train", "id": "mall@782f0d4:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionSessionService.java#31-31", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "782f0d43aa9554b170160ad63cebdf79a4d6bb3f", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionSessionService.java", "language": "Java"}, "method": {"name": "delete", "qualified_name": "com.macro.mall.service.SmsFlashPromotionSessionService#delete", "start_line": 31, "end_line": 31, "signature": "delete(Long id)", "original_code": "int delete(Long id);", "doc_comment": "/**\n     * \u5220\u9664\u573a\u6b21\n     */"}, "code_tokens": ["delete", ";", "int", "(", ")", "Long", "id"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 12, "ast_depth": 5, "n_identifiers": 2, "vocab_size": 7, "n_whitespaces": 2, "n_words": 4, "nloc": 1, "token_counts": 7}}
{"dataset_split": "train", "id": "mall@782f0d4:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionSessionService.java#36-36", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "782f0d43aa9554b170160ad63cebdf79a4d6bb3f", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionSessionService.java", "language": "Java"}, "method": {"name": "getItem", "qualified_name": "com.macro.mall.service.SmsFlashPromotionSessionService#getItem", "start_line": 36, "end_line": 36, "signature": "getItem(Long id)", "original_code": "SmsFlashPromotionSession getItem(Long id);", "doc_comment": "/**\n     * \u83b7\u53d6\u573a\u6b21\u8be6\u60c5\n     */"}, "code_tokens": ["SmsFlashPromotionSession", "getItem", ";", "(", ")", "Long", "id"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 11, "ast_depth": 5, "n_identifiers": 2, "vocab_size": 7, "n_whitespaces": 2, "n_words": 4, "nloc": 1, "token_counts": 7}}
{"dataset_split": "train", "id": "mall@782f0d4:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionSessionService.java#41-41", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "782f0d43aa9554b170160ad63cebdf79a4d6bb3f", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionSessionService.java", "language": "Java"}, "method": {"name": "list", "qualified_name": "com.macro.mall.service.SmsFlashPromotionSessionService#list", "start_line": 41, "end_line": 41, "signature": "list()", "original_code": "List<SmsFlashPromotionSession> list();", "doc_comment": "/**\n     * \u6839\u636e\u542f\u7528\u72b6\u6001\u83b7\u53d6\u573a\u6b21\u5217\u8868\n     */"}, "code_tokens": ["list", ";", "List", "(", ")", "<", "SmsFlashPromotionSession", ">"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 13, "ast_depth": 5, "n_identifiers": 1, "vocab_size": 8, "n_whitespaces": 1, "n_words": 3, "nloc": 1, "token_counts": 8}}
{"dataset_split": "train", "id": "mall@782f0d4:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionSessionService.java#46-46", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "782f0d43aa9554b170160ad63cebdf79a4d6bb3f", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionSessionService.java", "language": "Java"}, "method": {"name": "selectList", "qualified_name": "com.macro.mall.service.SmsFlashPromotionSessionService#selectList", "start_line": 46, "end_line": 46, "signature": "selectList(Long flashPromotionId)", "original_code": "List<SmsFlashPromotionSessionDetail> selectList(Long flashPromotionId);", "doc_comment": "/**\n     * \u83b7\u53d6\u5168\u90e8\u53ef\u9009\u573a\u6b21\u53ca\u5176\u6570\u91cf\n     */"}, "code_tokens": ["selectList", ";", "List", "(", ")", "<", "SmsFlashPromotionSessionDetail", ">", "Long", "flashPromotionId"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 16, "ast_depth": 5, "n_identifiers": 2, "vocab_size": 10, "n_whitespaces": 2, "n_words": 5, "nloc": 1, "token_counts": 10}}
{"dataset_split": "train", "id": "mall@88f0d91:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionSessionService.java#16-16", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "88f0d910c5c90f8717eb9b275cc0a53305b529cf", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionSessionService.java", "language": "Java"}, "method": {"name": "create", "qualified_name": "com.macro.mall.service.SmsFlashPromotionSessionService#create", "start_line": 16, "end_line": 16, "signature": "create(SmsFlashPromotionSession promotionSession)", "original_code": "int create(SmsFlashPromotionSession promotionSession);", "doc_comment": "/**\n     * \u6dfb\u52a0\u573a\u6b21\n     */"}, "code_tokens": ["create", ";", "int", "(", ")", "SmsFlashPromotionSession", "promotionSession"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 12, "ast_depth": 5, "n_identifiers": 2, "vocab_size": 7, "n_whitespaces": 2, "n_words": 4, "nloc": 1, "token_counts": 7}}
{"dataset_split": "train", "id": "mall@88f0d91:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionSessionService.java#21-21", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "88f0d910c5c90f8717eb9b275cc0a53305b529cf", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionSessionService.java", "language": "Java"}, "method": {"name": "update", "qualified_name": "com.macro.mall.service.SmsFlashPromotionSessionService#update", "start_line": 21, "end_line": 21, "signature": "update(Long id, SmsFlashPromotionSession promotionSession)", "original_code": "int update(Long id, SmsFlashPromotionSession promotionSession);", "doc_comment": "/**\n     * \u4fee\u6539\u573a\u6b21\n     */"}, "code_tokens": ["update", ";", "int", "(", ",", ")", "Long", "id", "SmsFlashPromotionSession", "promotionSession"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 16, "ast_depth": 5, "n_identifiers": 3, "vocab_size": 10, "n_whitespaces": 4, "n_words": 6, "nloc": 1, "token_counts": 10}}
{"dataset_split": "train", "id": "mall@88f0d91:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionSessionService.java#26-26", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "88f0d910c5c90f8717eb9b275cc0a53305b529cf", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionSessionService.java", "language": "Java"}, "method": {"name": "updateStatus", "qualified_name": "com.macro.mall.service.SmsFlashPromotionSessionService#updateStatus", "start_line": 26, "end_line": 26, "signature": "updateStatus(Long id, Integer status)", "original_code": "int updateStatus(Long id, Integer status);", "doc_comment": "/**\n     * \u4fee\u6539\u573a\u6b21\u542f\u7528\u72b6\u6001\n     */"}, "code_tokens": ["updateStatus", ";", "int", "(", ",", ")", "Long", "id", "Integer", "status"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 16, "ast_depth": 5, "n_identifiers": 3, "vocab_size": 10, "n_whitespaces": 4, "n_words": 6, "nloc": 1, "token_counts": 10}}
{"dataset_split": "train", "id": "mall@88f0d91:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionSessionService.java#31-31", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "88f0d910c5c90f8717eb9b275cc0a53305b529cf", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionSessionService.java", "language": "Java"}, "method": {"name": "delete", "qualified_name": "com.macro.mall.service.SmsFlashPromotionSessionService#delete", "start_line": 31, "end_line": 31, "signature": "delete(Long id)", "original_code": "int delete(Long id);", "doc_comment": "/**\n     * \u5220\u9664\u573a\u6b21\n     */"}, "code_tokens": ["delete", ";", "int", "(", ")", "Long", "id"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 12, "ast_depth": 5, "n_identifiers": 2, "vocab_size": 7, "n_whitespaces": 2, "n_words": 4, "nloc": 1, "token_counts": 7}}
{"dataset_split": "train", "id": "mall@88f0d91:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionSessionService.java#36-36", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "88f0d910c5c90f8717eb9b275cc0a53305b529cf", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionSessionService.java", "language": "Java"}, "method": {"name": "getItem", "qualified_name": "com.macro.mall.service.SmsFlashPromotionSessionService#getItem", "start_line": 36, "end_line": 36, "signature": "getItem(Long id)", "original_code": "SmsFlashPromotionSession getItem(Long id);", "doc_comment": "/**\n     * \u83b7\u53d6\u573a\u6b21\u8be6\u60c5\n     */"}, "code_tokens": ["SmsFlashPromotionSession", "getItem", ";", "(", ")", "Long", "id"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 11, "ast_depth": 5, "n_identifiers": 2, "vocab_size": 7, "n_whitespaces": 2, "n_words": 4, "nloc": 1, "token_counts": 7}}
{"dataset_split": "train", "id": "mall@88f0d91:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionSessionService.java#41-41", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "88f0d910c5c90f8717eb9b275cc0a53305b529cf", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionSessionService.java", "language": "Java"}, "method": {"name": "list", "qualified_name": "com.macro.mall.service.SmsFlashPromotionSessionService#list", "start_line": 41, "end_line": 41, "signature": "list()", "original_code": "List<SmsFlashPromotionSession> list();", "doc_comment": "/**\n     * \u83b7\u53d6\u5168\u90e8\u573a\u6b21\u5217\u8868\n     */"}, "code_tokens": ["list", ";", "List", "(", ")", "<", "SmsFlashPromotionSession", ">"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 13, "ast_depth": 5, "n_identifiers": 1, "vocab_size": 8, "n_whitespaces": 1, "n_words": 3, "nloc": 1, "token_counts": 8}}
{"dataset_split": "train", "id": "mall@88f0d91:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionSessionService.java#46-46", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "88f0d910c5c90f8717eb9b275cc0a53305b529cf", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionSessionService.java", "language": "Java"}, "method": {"name": "selectList", "qualified_name": "com.macro.mall.service.SmsFlashPromotionSessionService#selectList", "start_line": 46, "end_line": 46, "signature": "selectList(Long flashPromotionId)", "original_code": "List<SmsFlashPromotionSessionDetail> selectList(Long flashPromotionId);", "doc_comment": "/**\n     * \u83b7\u53d6\u5168\u90e8\u53ef\u9009\u573a\u6b21\u53ca\u5176\u6570\u91cf\n     */"}, "code_tokens": ["selectList", ";", "List", "(", ")", "<", "SmsFlashPromotionSessionDetail", ">", "Long", "flashPromotionId"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 16, "ast_depth": 5, "n_identifiers": 2, "vocab_size": 10, "n_whitespaces": 2, "n_words": 5, "nloc": 1, "token_counts": 10}}
{"dataset_split": "train", "id": "mall@037314f:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionProductRelationService.java#17-18", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "037314f9a244b3338022e23ec41e2c462fa8208d", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionProductRelationService.java", "language": "Java"}, "method": {"name": "create", "qualified_name": "com.macro.mall.service.SmsFlashPromotionProductRelationService#create", "start_line": 17, "end_line": 18, "signature": "create(List<SmsFlashPromotionProductRelation> relationList)", "original_code": "@Transactional\n    int create(List<SmsFlashPromotionProductRelation> relationList);", "doc_comment": "/**\n     * \u6279\u91cf\u6dfb\u52a0\u5173\u8054\n     */"}, "code_tokens": ["create", ";", "int", "(", ")", "@", "Transactional", "relationList", "List", "<", "SmsFlashPromotionProductRelation", ">"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 21, "ast_depth": 7, "n_identifiers": 3, "vocab_size": 12, "n_whitespaces": 7, "n_words": 6, "nloc": 2, "token_counts": 12}}
{"dataset_split": "train", "id": "mall@037314f:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionProductRelationService.java#23-23", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "037314f9a244b3338022e23ec41e2c462fa8208d", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionProductRelationService.java", "language": "Java"}, "method": {"name": "update", "qualified_name": "com.macro.mall.service.SmsFlashPromotionProductRelationService#update", "start_line": 23, "end_line": 23, "signature": "update(Long id, SmsFlashPromotionProductRelation relation)", "original_code": "int update(Long id, SmsFlashPromotionProductRelation relation);", "doc_comment": "/**\n     * \u4fee\u6539\u5173\u8054\u4fe1\u606f\n     */"}, "code_tokens": ["update", ";", "int", "(", ",", ")", "Long", "id", "SmsFlashPromotionProductRelation", "relation"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 16, "ast_depth": 5, "n_identifiers": 3, "vocab_size": 10, "n_whitespaces": 4, "n_words": 6, "nloc": 1, "token_counts": 10}}
{"dataset_split": "train", "id": "mall@037314f:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionProductRelationService.java#28-28", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "037314f9a244b3338022e23ec41e2c462fa8208d", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionProductRelationService.java", "language": "Java"}, "method": {"name": "delete", "qualified_name": "com.macro.mall.service.SmsFlashPromotionProductRelationService#delete", "start_line": 28, "end_line": 28, "signature": "delete(Long id)", "original_code": "int delete(Long id);", "doc_comment": "/**\n     * \u5220\u9664\u5173\u8054\n     */"}, "code_tokens": ["delete", ";", "int", "(", ")", "Long", "id"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 12, "ast_depth": 5, "n_identifiers": 2, "vocab_size": 7, "n_whitespaces": 2, "n_words": 4, "nloc": 1, "token_counts": 7}}
{"dataset_split": "train", "id": "mall@037314f:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionProductRelationService.java#33-33", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "037314f9a244b3338022e23ec41e2c462fa8208d", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionProductRelationService.java", "language": "Java"}, "method": {"name": "getItem", "qualified_name": "com.macro.mall.service.SmsFlashPromotionProductRelationService#getItem", "start_line": 33, "end_line": 33, "signature": "getItem(Long id)", "original_code": "SmsFlashPromotionProductRelation getItem(Long id);", "doc_comment": "/**\n     * \u83b7\u53d6\u5173\u8054\u8be6\u60c5\n     */"}, "code_tokens": ["SmsFlashPromotionProductRelation", "getItem", ";", "(", ")", "Long", "id"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 11, "ast_depth": 5, "n_identifiers": 2, "vocab_size": 7, "n_whitespaces": 2, "n_words": 4, "nloc": 1, "token_counts": 7}}
{"dataset_split": "train", "id": "mall@037314f:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionProductRelationService.java#41-41", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "037314f9a244b3338022e23ec41e2c462fa8208d", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionProductRelationService.java", "language": "Java"}, "method": {"name": "list", "qualified_name": "com.macro.mall.service.SmsFlashPromotionProductRelationService#list", "start_line": 41, "end_line": 41, "signature": "list(Long flashPromotionId, Long flashPromotionSessionId, Integer pageSize, Integer pageNum)", "original_code": "List<SmsFlashPromotionProduct> list(Long flashPromotionId, Long flashPromotionSessionId, Integer pageSize, Integer pageNum);", "doc_comment": "/**\n     * \u5206\u9875\u67e5\u8be2\u76f8\u5173\u5546\u54c1\u53ca\u9650\u65f6\u8d2d\u4fc3\u9500\u4fe1\u606f\n     *\n     * @param flashPromotionId        \u9650\u65f6\u8d2did\n     * @param flashPromotionSessionId \u9650\u65f6\u8d2d\u573a\u6b21id\n     */"}, "code_tokens": ["list", ";", "List", "(", ",", ",", ",", ")", "<", "SmsFlashPromotionProduct", ">", "Long", "flashPromotionId", "Long", "flashPromotionSessionId", "Integer", "pageSize", "Integer", "pageNum"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 28, "ast_depth": 5, "n_identifiers": 5, "vocab_size": 15, "n_whitespaces": 8, "n_words": 11, "nloc": 1, "token_counts": 19}}
{"dataset_split": "train", "id": "mall@037314f:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionProductRelationService.java#48-48", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "037314f9a244b3338022e23ec41e2c462fa8208d", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionProductRelationService.java", "language": "Java"}, "method": {"name": "getCount", "qualified_name": "com.macro.mall.service.SmsFlashPromotionProductRelationService#getCount", "start_line": 48, "end_line": 48, "signature": "getCount(Long flashPromotionId,Long flashPromotionSessionId)", "original_code": "long getCount(Long flashPromotionId,Long flashPromotionSessionId);", "doc_comment": "/**\n     * \u6839\u636e\u9650\u65f6\u8d2d\u548c\u573a\u6b21id\u83b7\u53d6\u5546\u54c1\u5173\u7cfb\u6570\u91cf\n     * @param flashPromotionId        \u9650\u65f6\u8d2did\n     * @param flashPromotionSessionId \u9650\u65f6\u8d2d\u573a\u6b21id\n     */"}, "code_tokens": ["getCount", ";", "long", "(", ",", ")", "Long", "flashPromotionId", "Long", "flashPromotionSessionId"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 16, "ast_depth": 5, "n_identifiers": 3, "vocab_size": 9, "n_whitespaces": 3, "n_words": 6, "nloc": 1, "token_counts": 10}}
{"dataset_split": "train", "id": "mall@5b14c5f:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionProductRelationService.java#17-18", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "5b14c5fc45f0eff0bbc6fa3947635e4bfced711a", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionProductRelationService.java", "language": "Java"}, "method": {"name": "create", "qualified_name": "com.macro.mall.service.SmsFlashPromotionProductRelationService#create", "start_line": 17, "end_line": 18, "signature": "create(List<SmsFlashPromotionProductRelation> relationList)", "original_code": "@Transactional\n    int create(List<SmsFlashPromotionProductRelation> relationList);", "doc_comment": "/**\n     * \u6279\u91cf\u6dfb\u52a0\u5173\u8054\n     */"}, "code_tokens": ["create", ";", "int", "(", ")", "@", "Transactional", "relationList", "List", "<", "SmsFlashPromotionProductRelation", ">"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 21, "ast_depth": 7, "n_identifiers": 3, "vocab_size": 12, "n_whitespaces": 7, "n_words": 6, "nloc": 2, "token_counts": 12}}
{"dataset_split": "train", "id": "mall@5b14c5f:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionProductRelationService.java#23-23", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "5b14c5fc45f0eff0bbc6fa3947635e4bfced711a", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionProductRelationService.java", "language": "Java"}, "method": {"name": "update", "qualified_name": "com.macro.mall.service.SmsFlashPromotionProductRelationService#update", "start_line": 23, "end_line": 23, "signature": "update(Long id, SmsFlashPromotionProductRelation relation)", "original_code": "int update(Long id, SmsFlashPromotionProductRelation relation);", "doc_comment": "/**\n     * \u4fee\u6539\u5173\u8054\u4fe1\u606f\n     */"}, "code_tokens": ["update", ";", "int", "(", ",", ")", "Long", "id", "SmsFlashPromotionProductRelation", "relation"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 16, "ast_depth": 5, "n_identifiers": 3, "vocab_size": 10, "n_whitespaces": 4, "n_words": 6, "nloc": 1, "token_counts": 10}}
{"dataset_split": "train", "id": "mall@5b14c5f:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionProductRelationService.java#28-28", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "5b14c5fc45f0eff0bbc6fa3947635e4bfced711a", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionProductRelationService.java", "language": "Java"}, "method": {"name": "delete", "qualified_name": "com.macro.mall.service.SmsFlashPromotionProductRelationService#delete", "start_line": 28, "end_line": 28, "signature": "delete(Long id)", "original_code": "int delete(Long id);", "doc_comment": "/**\n     * \u5220\u9664\u5173\u8054\n     */"}, "code_tokens": ["delete", ";", "int", "(", ")", "Long", "id"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 12, "ast_depth": 5, "n_identifiers": 2, "vocab_size": 7, "n_whitespaces": 2, "n_words": 4, "nloc": 1, "token_counts": 7}}
{"dataset_split": "train", "id": "mall@5b14c5f:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionProductRelationService.java#33-33", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "5b14c5fc45f0eff0bbc6fa3947635e4bfced711a", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionProductRelationService.java", "language": "Java"}, "method": {"name": "getItem", "qualified_name": "com.macro.mall.service.SmsFlashPromotionProductRelationService#getItem", "start_line": 33, "end_line": 33, "signature": "getItem(Long id)", "original_code": "SmsFlashPromotionProductRelation getItem(Long id);", "doc_comment": "/**\n     * \u83b7\u53d6\u5173\u8054\u8be6\u60c5\n     */"}, "code_tokens": ["SmsFlashPromotionProductRelation", "getItem", ";", "(", ")", "Long", "id"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 11, "ast_depth": 5, "n_identifiers": 2, "vocab_size": 7, "n_whitespaces": 2, "n_words": 4, "nloc": 1, "token_counts": 7}}
{"dataset_split": "train", "id": "mall@5b14c5f:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionProductRelationService.java#41-41", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "5b14c5fc45f0eff0bbc6fa3947635e4bfced711a", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionProductRelationService.java", "language": "Java"}, "method": {"name": "list", "qualified_name": "com.macro.mall.service.SmsFlashPromotionProductRelationService#list", "start_line": 41, "end_line": 41, "signature": "list(Long flashPromotionId, Long flashPromotionSessionId, Integer pageSize, Integer pageNum)", "original_code": "List<SmsFlashPromotionProduct> list(Long flashPromotionId, Long flashPromotionSessionId, Integer pageSize, Integer pageNum);", "doc_comment": "/**\n     * \u6839\u636e\u9650\u65f6\u8d2d\u548c\u573a\u6b21id\u5206\u9875\u67e5\u8be2\u9650\u65f6\u8d2d\u5546\u54c1\u4fe1\u606f\n     *\n     * @param flashPromotionId        \u9650\u65f6\u8d2did\n     * @param flashPromotionSessionId \u9650\u65f6\u8d2d\u573a\u6b21id\n     */"}, "code_tokens": ["list", ";", "List", "(", ",", ",", ",", ")", "<", "SmsFlashPromotionProduct", ">", "Long", "flashPromotionId", "Long", "flashPromotionSessionId", "Integer", "pageSize", "Integer", "pageNum"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 28, "ast_depth": 5, "n_identifiers": 5, "vocab_size": 15, "n_whitespaces": 8, "n_words": 11, "nloc": 1, "token_counts": 19}}
{"dataset_split": "train", "id": "mall@5b14c5f:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionProductRelationService.java#48-48", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "5b14c5fc45f0eff0bbc6fa3947635e4bfced711a", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionProductRelationService.java", "language": "Java"}, "method": {"name": "getCount", "qualified_name": "com.macro.mall.service.SmsFlashPromotionProductRelationService#getCount", "start_line": 48, "end_line": 48, "signature": "getCount(Long flashPromotionId,Long flashPromotionSessionId)", "original_code": "long getCount(Long flashPromotionId,Long flashPromotionSessionId);", "doc_comment": "/**\n     * \u6839\u636e\u9650\u65f6\u8d2d\u548c\u573a\u6b21id\u83b7\u53d6\u5546\u54c1\u5173\u7cfb\u6570\u91cf\n     * @param flashPromotionId        \u9650\u65f6\u8d2did\n     * @param flashPromotionSessionId \u9650\u65f6\u8d2d\u573a\u6b21id\n     */"}, "code_tokens": ["getCount", ";", "long", "(", ",", ")", "Long", "flashPromotionId", "Long", "flashPromotionSessionId"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 16, "ast_depth": 5, "n_identifiers": 3, "vocab_size": 9, "n_whitespaces": 3, "n_words": 6, "nloc": 1, "token_counts": 10}}
{"dataset_split": "train", "id": "mall@f37b8c3:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionService.java#15-15", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "f37b8c3645479039199ceab1041a7d047b0b1926", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionService.java", "language": "Java"}, "method": {"name": "create", "qualified_name": "com.macro.mall.service.SmsFlashPromotionService#create", "start_line": 15, "end_line": 15, "signature": "create(SmsFlashPromotion flashPromotion)", "original_code": "int create(SmsFlashPromotion flashPromotion);", "doc_comment": "/**\n     * \u6dfb\u52a0\u6d3b\u52a8\n     */"}, "code_tokens": ["create", ";", "int", "(", ")", "SmsFlashPromotion", "flashPromotion"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 12, "ast_depth": 5, "n_identifiers": 2, "vocab_size": 7, "n_whitespaces": 2, "n_words": 4, "nloc": 1, "token_counts": 7}}
{"dataset_split": "train", "id": "mall@f37b8c3:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionService.java#20-20", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "f37b8c3645479039199ceab1041a7d047b0b1926", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionService.java", "language": "Java"}, "method": {"name": "update", "qualified_name": "com.macro.mall.service.SmsFlashPromotionService#update", "start_line": 20, "end_line": 20, "signature": "update(Long id, SmsFlashPromotion flashPromotion)", "original_code": "int update(Long id, SmsFlashPromotion flashPromotion);", "doc_comment": "/**\n     * \u4fee\u6539\u6307\u5b9a\u6d3b\u52a8\n     */"}, "code_tokens": ["update", ";", "int", "(", ",", ")", "Long", "id", "SmsFlashPromotion", "flashPromotion"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 16, "ast_depth": 5, "n_identifiers": 3, "vocab_size": 10, "n_whitespaces": 4, "n_words": 6, "nloc": 1, "token_counts": 10}}
{"dataset_split": "train", "id": "mall@f37b8c3:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionService.java#25-25", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "f37b8c3645479039199ceab1041a7d047b0b1926", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionService.java", "language": "Java"}, "method": {"name": "delete", "qualified_name": "com.macro.mall.service.SmsFlashPromotionService#delete", "start_line": 25, "end_line": 25, "signature": "delete(Long id)", "original_code": "int delete(Long id);", "doc_comment": "/**\n     * \u5220\u9664\u5355\u4e2a\u6d3b\u52a8\n     */"}, "code_tokens": ["delete", ";", "int", "(", ")", "Long", "id"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 12, "ast_depth": 5, "n_identifiers": 2, "vocab_size": 7, "n_whitespaces": 2, "n_words": 4, "nloc": 1, "token_counts": 7}}
{"dataset_split": "train", "id": "mall@f37b8c3:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionService.java#30-30", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "f37b8c3645479039199ceab1041a7d047b0b1926", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionService.java", "language": "Java"}, "method": {"name": "updateStatus", "qualified_name": "com.macro.mall.service.SmsFlashPromotionService#updateStatus", "start_line": 30, "end_line": 30, "signature": "updateStatus(Long id, Integer status)", "original_code": "int updateStatus(Long id, Integer status);", "doc_comment": "/**\n     * \u4fee\u6539\u4e0a\u4e0b\u7ebf\u72b6\u6001\n     */"}, "code_tokens": ["updateStatus", ";", "int", "(", ",", ")", "Long", "id", "Integer", "status"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 16, "ast_depth": 5, "n_identifiers": 3, "vocab_size": 10, "n_whitespaces": 4, "n_words": 6, "nloc": 1, "token_counts": 10}}
{"dataset_split": "train", "id": "mall@f37b8c3:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionService.java#35-35", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "f37b8c3645479039199ceab1041a7d047b0b1926", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionService.java", "language": "Java"}, "method": {"name": "getItem", "qualified_name": "com.macro.mall.service.SmsFlashPromotionService#getItem", "start_line": 35, "end_line": 35, "signature": "getItem(Long id)", "original_code": "SmsFlashPromotion getItem(Long id);", "doc_comment": "/**\n     * \u83b7\u53d6\u6d3b\u52a8\u8be6\u60c5\n     */"}, "code_tokens": ["SmsFlashPromotion", "getItem", ";", "(", ")", "Long", "id"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 11, "ast_depth": 5, "n_identifiers": 2, "vocab_size": 7, "n_whitespaces": 2, "n_words": 4, "nloc": 1, "token_counts": 7}}
{"dataset_split": "train", "id": "mall@f37b8c3:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionService.java#40-40", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "f37b8c3645479039199ceab1041a7d047b0b1926", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionService.java", "language": "Java"}, "method": {"name": "list", "qualified_name": "com.macro.mall.service.SmsFlashPromotionService#list", "start_line": 40, "end_line": 40, "signature": "list(String keyword, Integer pageSize, Integer pageNum)", "original_code": "List<SmsFlashPromotion> list(String keyword, Integer pageSize, Integer pageNum);", "doc_comment": "/**\n     * \u6839\u636e\u5173\u952e\u5b57\u5206\u9875\u67e5\u8be2\u6d3b\u52a8\n     */"}, "code_tokens": ["list", ";", "List", "(", ",", ",", ")", "<", "SmsFlashPromotion", ">", "String", "keyword", "Integer", "pageSize", "Integer", "pageNum"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 24, "ast_depth": 5, "n_identifiers": 4, "vocab_size": 14, "n_whitespaces": 6, "n_words": 9, "nloc": 1, "token_counts": 16}}
{"dataset_split": "train", "id": "mall@f1f7b1a:mall-admin/src/main/java/com/macro/mall/service/SmsHomeBrandService.java#16-17", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "f1f7b1a08a7a49cd40eb15ec2d079093afd504c7", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsHomeBrandService.java", "language": "Java"}, "method": {"name": "create", "qualified_name": "com.macro.mall.service.SmsHomeBrandService#create", "start_line": 16, "end_line": 17, "signature": "create(List<SmsHomeBrand> homeBrandList)", "original_code": "@Transactional\n    int create(List<SmsHomeBrand> homeBrandList);", "doc_comment": "/**\n     * \u6dfb\u52a0\u54c1\u724c\u63a8\u8350\n     */"}, "code_tokens": ["create", ";", "int", "(", ")", "@", "Transactional", "homeBrandList", "List", "<", "SmsHomeBrand", ">"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 21, "ast_depth": 7, "n_identifiers": 3, "vocab_size": 12, "n_whitespaces": 7, "n_words": 6, "nloc": 2, "token_counts": 12}}
{"dataset_split": "train", "id": "mall@f1f7b1a:mall-admin/src/main/java/com/macro/mall/service/SmsHomeBrandService.java#22-22", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "f1f7b1a08a7a49cd40eb15ec2d079093afd504c7", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsHomeBrandService.java", "language": "Java"}, "method": {"name": "updateSort", "qualified_name": "com.macro.mall.service.SmsHomeBrandService#updateSort", "start_line": 22, "end_line": 22, "signature": "updateSort(Long id, Integer sort)", "original_code": "int updateSort(Long id, Integer sort);", "doc_comment": "/**\n     * \u4fee\u6539\u54c1\u724c\u63a8\u8350\u6392\u5e8f\n     */"}, "code_tokens": ["updateSort", ";", "int", "(", ",", ")", "Long", "id", "Integer", "sort"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 16, "ast_depth": 5, "n_identifiers": 3, "vocab_size": 10, "n_whitespaces": 4, "n_words": 6, "nloc": 1, "token_counts": 10}}
{"dataset_split": "train", "id": "mall@f1f7b1a:mall-admin/src/main/java/com/macro/mall/service/SmsHomeBrandService.java#27-27", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "f1f7b1a08a7a49cd40eb15ec2d079093afd504c7", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsHomeBrandService.java", "language": "Java"}, "method": {"name": "delete", "qualified_name": "com.macro.mall.service.SmsHomeBrandService#delete", "start_line": 27, "end_line": 27, "signature": "delete(List<Long> ids)", "original_code": "int delete(List<Long> ids);", "doc_comment": "/**\n     * \u6279\u91cf\u5220\u9664\u54c1\u724c\u63a8\u8350\n     */"}, "code_tokens": ["delete", ";", "int", "(", ")", "ids", "List", "<", "Long", ">"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 17, "ast_depth": 7, "n_identifiers": 2, "vocab_size": 10, "n_whitespaces": 2, "n_words": 5, "nloc": 1, "token_counts": 10}}
{"dataset_split": "train", "id": "mall@f1f7b1a:mall-admin/src/main/java/com/macro/mall/service/SmsHomeBrandService.java#32-32", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "f1f7b1a08a7a49cd40eb15ec2d079093afd504c7", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsHomeBrandService.java", "language": "Java"}, "method": {"name": "updateRecommendStatus", "qualified_name": "com.macro.mall.service.SmsHomeBrandService#updateRecommendStatus", "start_line": 32, "end_line": 32, "signature": "updateRecommendStatus(List<Long> ids, Integer recommendStatus)", "original_code": "int updateRecommendStatus(List<Long> ids, Integer recommendStatus);", "doc_comment": "/**\n     * \u6279\u91cf\u66f4\u65b0\u63a8\u8350\u72b6\u6001\n     */"}, "code_tokens": ["updateRecommendStatus", ";", "int", "(", ",", ")", "ids", "Integer", "recommendStatus", "List", "<", "Long", ">"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 21, "ast_depth": 7, "n_identifiers": 3, "vocab_size": 13, "n_whitespaces": 4, "n_words": 7, "nloc": 1, "token_counts": 13}}
{"dataset_split": "train", "id": "mall@f1f7b1a:mall-admin/src/main/java/com/macro/mall/service/SmsHomeBrandService.java#37-37", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "f1f7b1a08a7a49cd40eb15ec2d079093afd504c7", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsHomeBrandService.java", "language": "Java"}, "method": {"name": "list", "qualified_name": "com.macro.mall.service.SmsHomeBrandService#list", "start_line": 37, "end_line": 37, "signature": "list(String brandName, Integer recommendStatus, Integer pageSize, Integer pageNum)", "original_code": "List<SmsHomeBrand> list(String brandName, Integer recommendStatus, Integer pageSize, Integer pageNum);", "doc_comment": "/**\n     * \u5206\u9875\u67e5\u8be2\u54c1\u724c\u63a8\u8350\n     */"}, "code_tokens": ["list", ";", "List", "(", ",", ",", ",", ")", "<", "SmsHomeBrand", ">", "String", "brandName", "Integer", "recommendStatus", "Integer", "pageSize", "Integer", "pageNum"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 28, "ast_depth": 5, "n_identifiers": 5, "vocab_size": 15, "n_whitespaces": 8, "n_words": 11, "nloc": 1, "token_counts": 19}}
{"dataset_split": "train", "id": "mall@9176504:mall-admin/src/main/java/com/macro/mall/service/SmsHomeNewProductService.java#16-17", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "9176504425a36b4d349b14fbaf68aec5278194ec", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsHomeNewProductService.java", "language": "Java"}, "method": {"name": "create", "qualified_name": "com.macro.mall.service.SmsHomeNewProductService#create", "start_line": 16, "end_line": 17, "signature": "create(List<SmsHomeNewProduct> homeNewProductList)", "original_code": "@Transactional\n    int create(List<SmsHomeNewProduct> homeNewProductList);", "doc_comment": "/**\n     * \u6dfb\u52a0\u65b0\u54c1\u63a8\u8350\n     */"}, "code_tokens": ["create", ";", "int", "(", ")", "@", "Transactional", "homeNewProductList", "List", "<", "SmsHomeNewProduct", ">"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 21, "ast_depth": 7, "n_identifiers": 3, "vocab_size": 12, "n_whitespaces": 7, "n_words": 6, "nloc": 2, "token_counts": 12}}
{"dataset_split": "train", "id": "mall@9176504:mall-admin/src/main/java/com/macro/mall/service/SmsHomeNewProductService.java#22-22", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "9176504425a36b4d349b14fbaf68aec5278194ec", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsHomeNewProductService.java", "language": "Java"}, "method": {"name": "updateSort", "qualified_name": "com.macro.mall.service.SmsHomeNewProductService#updateSort", "start_line": 22, "end_line": 22, "signature": "updateSort(Long id, Integer sort)", "original_code": "int updateSort(Long id, Integer sort);", "doc_comment": "/**\n     * \u4fee\u6539\u65b0\u54c1\u63a8\u8350\u6392\u5e8f\n     */"}, "code_tokens": ["updateSort", ";", "int", "(", ",", ")", "Long", "id", "Integer", "sort"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 16, "ast_depth": 5, "n_identifiers": 3, "vocab_size": 10, "n_whitespaces": 4, "n_words": 6, "nloc": 1, "token_counts": 10}}
{"dataset_split": "train", "id": "mall@9176504:mall-admin/src/main/java/com/macro/mall/service/SmsHomeNewProductService.java#27-27", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "9176504425a36b4d349b14fbaf68aec5278194ec", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsHomeNewProductService.java", "language": "Java"}, "method": {"name": "delete", "qualified_name": "com.macro.mall.service.SmsHomeNewProductService#delete", "start_line": 27, "end_line": 27, "signature": "delete(List<Long> ids)", "original_code": "int delete(List<Long> ids);", "doc_comment": "/**\n     * \u6279\u91cf\u5220\u9664\u65b0\u54c1\u63a8\u8350\n     */"}, "code_tokens": ["delete", ";", "int", "(", ")", "ids", "List", "<", "Long", ">"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 17, "ast_depth": 7, "n_identifiers": 2, "vocab_size": 10, "n_whitespaces": 2, "n_words": 5, "nloc": 1, "token_counts": 10}}
{"dataset_split": "train", "id": "mall@9176504:mall-admin/src/main/java/com/macro/mall/service/SmsHomeNewProductService.java#32-32", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "9176504425a36b4d349b14fbaf68aec5278194ec", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsHomeNewProductService.java", "language": "Java"}, "method": {"name": "updateRecommendStatus", "qualified_name": "com.macro.mall.service.SmsHomeNewProductService#updateRecommendStatus", "start_line": 32, "end_line": 32, "signature": "updateRecommendStatus(List<Long> ids, Integer recommendStatus)", "original_code": "int updateRecommendStatus(List<Long> ids, Integer recommendStatus);", "doc_comment": "/**\n     * \u6279\u91cf\u66f4\u65b0\u65b0\u54c1\u63a8\u8350\u72b6\u6001\n     */"}, "code_tokens": ["updateRecommendStatus", ";", "int", "(", ",", ")", "ids", "Integer", "recommendStatus", "List", "<", "Long", ">"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 21, "ast_depth": 7, "n_identifiers": 3, "vocab_size": 13, "n_whitespaces": 4, "n_words": 7, "nloc": 1, "token_counts": 13}}
{"dataset_split": "train", "id": "mall@9176504:mall-admin/src/main/java/com/macro/mall/service/SmsHomeNewProductService.java#37-37", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "9176504425a36b4d349b14fbaf68aec5278194ec", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsHomeNewProductService.java", "language": "Java"}, "method": {"name": "list", "qualified_name": "com.macro.mall.service.SmsHomeNewProductService#list", "start_line": 37, "end_line": 37, "signature": "list(String productName, Integer recommendStatus, Integer pageSize, Integer pageNum)", "original_code": "List<SmsHomeNewProduct> list(String productName, Integer recommendStatus, Integer pageSize, Integer pageNum);", "doc_comment": "/**\n     * \u5206\u9875\u67e5\u8be2\u65b0\u54c1\u63a8\u8350\n     */"}, "code_tokens": ["list", ";", "List", "(", ",", ",", ",", ")", "<", "SmsHomeNewProduct", ">", "String", "productName", "Integer", "recommendStatus", "Integer", "pageSize", "Integer", "pageNum"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 28, "ast_depth": 5, "n_identifiers": 5, "vocab_size": 15, "n_whitespaces": 8, "n_words": 11, "nloc": 1, "token_counts": 19}}
{"dataset_split": "train", "id": "mall@cb6c595:mall-admin/src/main/java/com/macro/mall/service/SmsHomeRecommendProductService.java#16-17", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "cb6c595484b02ca26c2f9b8df6960afc4ce8c2d0", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsHomeRecommendProductService.java", "language": "Java"}, "method": {"name": "create", "qualified_name": "com.macro.mall.service.SmsHomeRecommendProductService#create", "start_line": 16, "end_line": 17, "signature": "create(List<SmsHomeRecommendProduct> homeRecommendProductList)", "original_code": "@Transactional\n    int create(List<SmsHomeRecommendProduct> homeRecommendProductList);", "doc_comment": "/**\n     * \u6dfb\u52a0\u4eba\u6c14\u63a8\u8350\n     */"}, "code_tokens": ["create", ";", "int", "(", ")", "@", "Transactional", "homeRecommendProductList", "List", "<", "SmsHomeRecommendProduct", ">"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 21, "ast_depth": 7, "n_identifiers": 3, "vocab_size": 12, "n_whitespaces": 7, "n_words": 6, "nloc": 2, "token_counts": 12}}
{"dataset_split": "train", "id": "mall@cb6c595:mall-admin/src/main/java/com/macro/mall/service/SmsHomeRecommendProductService.java#22-22", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "cb6c595484b02ca26c2f9b8df6960afc4ce8c2d0", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsHomeRecommendProductService.java", "language": "Java"}, "method": {"name": "updateSort", "qualified_name": "com.macro.mall.service.SmsHomeRecommendProductService#updateSort", "start_line": 22, "end_line": 22, "signature": "updateSort(Long id, Integer sort)", "original_code": "int updateSort(Long id, Integer sort);", "doc_comment": "/**\n     * \u4fee\u6539\u4eba\u6c14\u63a8\u8350\u6392\u5e8f\n     */"}, "code_tokens": ["updateSort", ";", "int", "(", ",", ")", "Long", "id", "Integer", "sort"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 16, "ast_depth": 5, "n_identifiers": 3, "vocab_size": 10, "n_whitespaces": 4, "n_words": 6, "nloc": 1, "token_counts": 10}}
{"dataset_split": "train", "id": "mall@cb6c595:mall-admin/src/main/java/com/macro/mall/service/SmsHomeRecommendProductService.java#27-27", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "cb6c595484b02ca26c2f9b8df6960afc4ce8c2d0", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsHomeRecommendProductService.java", "language": "Java"}, "method": {"name": "delete", "qualified_name": "com.macro.mall.service.SmsHomeRecommendProductService#delete", "start_line": 27, "end_line": 27, "signature": "delete(List<Long> ids)", "original_code": "int delete(List<Long> ids);", "doc_comment": "/**\n     * \u6279\u91cf\u5220\u9664\u4eba\u6c14\u63a8\u8350\n     */"}, "code_tokens": ["delete", ";", "int", "(", ")", "ids", "List", "<", "Long", ">"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 17, "ast_depth": 7, "n_identifiers": 2, "vocab_size": 10, "n_whitespaces": 2, "n_words": 5, "nloc": 1, "token_counts": 10}}
{"dataset_split": "train", "id": "mall@cb6c595:mall-admin/src/main/java/com/macro/mall/service/SmsHomeRecommendProductService.java#32-32", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "cb6c595484b02ca26c2f9b8df6960afc4ce8c2d0", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsHomeRecommendProductService.java", "language": "Java"}, "method": {"name": "updateRecommendStatus", "qualified_name": "com.macro.mall.service.SmsHomeRecommendProductService#updateRecommendStatus", "start_line": 32, "end_line": 32, "signature": "updateRecommendStatus(List<Long> ids, Integer recommendStatus)", "original_code": "int updateRecommendStatus(List<Long> ids, Integer recommendStatus);", "doc_comment": "/**\n     * \u6279\u91cf\u66f4\u65b0\u4eba\u6c14\u63a8\u8350\u72b6\u6001\n     */"}, "code_tokens": ["updateRecommendStatus", ";", "int", "(", ",", ")", "ids", "Integer", "recommendStatus", "List", "<", "Long", ">"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 21, "ast_depth": 7, "n_identifiers": 3, "vocab_size": 13, "n_whitespaces": 4, "n_words": 7, "nloc": 1, "token_counts": 13}}
{"dataset_split": "train", "id": "mall@cb6c595:mall-admin/src/main/java/com/macro/mall/service/SmsHomeRecommendProductService.java#37-37", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "cb6c595484b02ca26c2f9b8df6960afc4ce8c2d0", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsHomeRecommendProductService.java", "language": "Java"}, "method": {"name": "list", "qualified_name": "com.macro.mall.service.SmsHomeRecommendProductService#list", "start_line": 37, "end_line": 37, "signature": "list(String productName, Integer recommendStatus, Integer pageSize, Integer pageNum)", "original_code": "List<SmsHomeRecommendProduct> list(String productName, Integer recommendStatus, Integer pageSize, Integer pageNum);", "doc_comment": "/**\n     * \u5206\u9875\u67e5\u8be2\u4eba\u6c14\u63a8\u8350\n     */"}, "code_tokens": ["list", ";", "List", "(", ",", ",", ",", ")", "<", "SmsHomeRecommendProduct", ">", "String", "productName", "Integer", "recommendStatus", "Integer", "pageSize", "Integer", "pageNum"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 28, "ast_depth": 5, "n_identifiers": 5, "vocab_size": 15, "n_whitespaces": 8, "n_words": 11, "nloc": 1, "token_counts": 19}}
{"dataset_split": "train", "id": "mall@5fb63b0:mall-admin/src/main/java/com/macro/mall/service/SmsHomeRecommendSubjectService.java#16-17", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "5fb63b01deeac7d272db488ceb00fda1d1b4dd8b", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsHomeRecommendSubjectService.java", "language": "Java"}, "method": {"name": "create", "qualified_name": "com.macro.mall.service.SmsHomeRecommendSubjectService#create", "start_line": 16, "end_line": 17, "signature": "create(List<SmsHomeRecommendSubject> recommendSubjectList)", "original_code": "@Transactional\n    int create(List<SmsHomeRecommendSubject> recommendSubjectList);", "doc_comment": "/**\n     * \u6dfb\u52a0\u4e13\u9898\u63a8\u8350\n     */"}, "code_tokens": ["create", ";", "int", "(", ")", "@", "Transactional", "recommendSubjectList", "List", "<", "SmsHomeRecommendSubject", ">"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 21, "ast_depth": 7, "n_identifiers": 3, "vocab_size": 12, "n_whitespaces": 7, "n_words": 6, "nloc": 2, "token_counts": 12}}
{"dataset_split": "train", "id": "mall@5fb63b0:mall-admin/src/main/java/com/macro/mall/service/SmsHomeRecommendSubjectService.java#22-22", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "5fb63b01deeac7d272db488ceb00fda1d1b4dd8b", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsHomeRecommendSubjectService.java", "language": "Java"}, "method": {"name": "updateSort", "qualified_name": "com.macro.mall.service.SmsHomeRecommendSubjectService#updateSort", "start_line": 22, "end_line": 22, "signature": "updateSort(Long id, Integer sort)", "original_code": "int updateSort(Long id, Integer sort);", "doc_comment": "/**\n     * \u4fee\u6539\u4e13\u9898\u63a8\u8350\u6392\u5e8f\n     */"}, "code_tokens": ["updateSort", ";", "int", "(", ",", ")", "Long", "id", "Integer", "sort"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 16, "ast_depth": 5, "n_identifiers": 3, "vocab_size": 10, "n_whitespaces": 4, "n_words": 6, "nloc": 1, "token_counts": 10}}
{"dataset_split": "train", "id": "mall@5fb63b0:mall-admin/src/main/java/com/macro/mall/service/SmsHomeRecommendSubjectService.java#27-27", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "5fb63b01deeac7d272db488ceb00fda1d1b4dd8b", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsHomeRecommendSubjectService.java", "language": "Java"}, "method": {"name": "delete", "qualified_name": "com.macro.mall.service.SmsHomeRecommendSubjectService#delete", "start_line": 27, "end_line": 27, "signature": "delete(List<Long> ids)", "original_code": "int delete(List<Long> ids);", "doc_comment": "/**\n     * \u6279\u91cf\u5220\u9664\u4e13\u9898\u63a8\u8350\n     */"}, "code_tokens": ["delete", ";", "int", "(", ")", "ids", "List", "<", "Long", ">"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 17, "ast_depth": 7, "n_identifiers": 2, "vocab_size": 10, "n_whitespaces": 2, "n_words": 5, "nloc": 1, "token_counts": 10}}
{"dataset_split": "train", "id": "mall@5fb63b0:mall-admin/src/main/java/com/macro/mall/service/SmsHomeRecommendSubjectService.java#32-32", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "5fb63b01deeac7d272db488ceb00fda1d1b4dd8b", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsHomeRecommendSubjectService.java", "language": "Java"}, "method": {"name": "updateRecommendStatus", "qualified_name": "com.macro.mall.service.SmsHomeRecommendSubjectService#updateRecommendStatus", "start_line": 32, "end_line": 32, "signature": "updateRecommendStatus(List<Long> ids, Integer recommendStatus)", "original_code": "int updateRecommendStatus(List<Long> ids, Integer recommendStatus);", "doc_comment": "/**\n     * \u6279\u91cf\u66f4\u65b0\u4e13\u9898\u63a8\u8350\u72b6\u6001\n     */"}, "code_tokens": ["updateRecommendStatus", ";", "int", "(", ",", ")", "ids", "Integer", "recommendStatus", "List", "<", "Long", ">"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 21, "ast_depth": 7, "n_identifiers": 3, "vocab_size": 13, "n_whitespaces": 4, "n_words": 7, "nloc": 1, "token_counts": 13}}
{"dataset_split": "train", "id": "mall@5fb63b0:mall-admin/src/main/java/com/macro/mall/service/SmsHomeRecommendSubjectService.java#37-37", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "5fb63b01deeac7d272db488ceb00fda1d1b4dd8b", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsHomeRecommendSubjectService.java", "language": "Java"}, "method": {"name": "list", "qualified_name": "com.macro.mall.service.SmsHomeRecommendSubjectService#list", "start_line": 37, "end_line": 37, "signature": "list(String subjectName, Integer recommendStatus, Integer pageSize, Integer pageNum)", "original_code": "List<SmsHomeRecommendSubject> list(String subjectName, Integer recommendStatus, Integer pageSize, Integer pageNum);", "doc_comment": "/**\n     * \u5206\u9875\u67e5\u8be2\u4e13\u9898\u63a8\u8350\n     */"}, "code_tokens": ["list", ";", "List", "(", ",", ",", ",", ")", "<", "SmsHomeRecommendSubject", ">", "String", "subjectName", "Integer", "recommendStatus", "Integer", "pageSize", "Integer", "pageNum"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 28, "ast_depth": 5, "n_identifiers": 5, "vocab_size": 15, "n_whitespaces": 8, "n_words": 11, "nloc": 1, "token_counts": 19}}
{"dataset_split": "train", "id": "mall@82944a4:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionService.java#15-15", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "82944a4d18fe7c60b2718f5b06c7912c9dfff1cd", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionService.java", "language": "Java"}, "method": {"name": "create", "qualified_name": "com.macro.mall.service.SmsFlashPromotionService#create", "start_line": 15, "end_line": 15, "signature": "create(SmsFlashPromotion flashPromotion)", "original_code": "int create(SmsFlashPromotion flashPromotion);", "doc_comment": "/**\n     * \u6dfb\u52a0\u6d3b\u52a8\n     */"}, "code_tokens": ["create", ";", "int", "(", ")", "SmsFlashPromotion", "flashPromotion"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 12, "ast_depth": 5, "n_identifiers": 2, "vocab_size": 7, "n_whitespaces": 2, "n_words": 4, "nloc": 1, "token_counts": 7}}
{"dataset_split": "train", "id": "mall@82944a4:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionService.java#20-20", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "82944a4d18fe7c60b2718f5b06c7912c9dfff1cd", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionService.java", "language": "Java"}, "method": {"name": "update", "qualified_name": "com.macro.mall.service.SmsFlashPromotionService#update", "start_line": 20, "end_line": 20, "signature": "update(Long id, SmsFlashPromotion flashPromotion)", "original_code": "int update(Long id, SmsFlashPromotion flashPromotion);", "doc_comment": "/**\n     * \u4fee\u6539\u6307\u5b9a\u6d3b\u52a8\n     */"}, "code_tokens": ["update", ";", "int", "(", ",", ")", "Long", "id", "SmsFlashPromotion", "flashPromotion"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 16, "ast_depth": 5, "n_identifiers": 3, "vocab_size": 10, "n_whitespaces": 4, "n_words": 6, "nloc": 1, "token_counts": 10}}
{"dataset_split": "train", "id": "mall@82944a4:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionService.java#25-25", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "82944a4d18fe7c60b2718f5b06c7912c9dfff1cd", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionService.java", "language": "Java"}, "method": {"name": "delete", "qualified_name": "com.macro.mall.service.SmsFlashPromotionService#delete", "start_line": 25, "end_line": 25, "signature": "delete(Long id)", "original_code": "int delete(Long id);", "doc_comment": "/**\n     * \u5220\u9664\u5355\u4e2a\u6d3b\u52a8\n     */"}, "code_tokens": ["delete", ";", "int", "(", ")", "Long", "id"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 12, "ast_depth": 5, "n_identifiers": 2, "vocab_size": 7, "n_whitespaces": 2, "n_words": 4, "nloc": 1, "token_counts": 7}}
{"dataset_split": "train", "id": "mall@82944a4:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionService.java#30-30", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "82944a4d18fe7c60b2718f5b06c7912c9dfff1cd", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionService.java", "language": "Java"}, "method": {"name": "updateStatus", "qualified_name": "com.macro.mall.service.SmsFlashPromotionService#updateStatus", "start_line": 30, "end_line": 30, "signature": "updateStatus(Long id, Integer status)", "original_code": "int updateStatus(Long id, Integer status);", "doc_comment": "/**\n     * \u4fee\u6539\u6d3b\u52a8\u4e0a\u4e0b\u7ebf\u72b6\u6001\n     */"}, "code_tokens": ["updateStatus", ";", "int", "(", ",", ")", "Long", "id", "Integer", "status"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 16, "ast_depth": 5, "n_identifiers": 3, "vocab_size": 10, "n_whitespaces": 4, "n_words": 6, "nloc": 1, "token_counts": 10}}
{"dataset_split": "train", "id": "mall@82944a4:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionService.java#35-35", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "82944a4d18fe7c60b2718f5b06c7912c9dfff1cd", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionService.java", "language": "Java"}, "method": {"name": "getItem", "qualified_name": "com.macro.mall.service.SmsFlashPromotionService#getItem", "start_line": 35, "end_line": 35, "signature": "getItem(Long id)", "original_code": "SmsFlashPromotion getItem(Long id);", "doc_comment": "/**\n     * \u83b7\u53d6\u6d3b\u52a8\u8be6\u60c5\n     */"}, "code_tokens": ["SmsFlashPromotion", "getItem", ";", "(", ")", "Long", "id"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 11, "ast_depth": 5, "n_identifiers": 2, "vocab_size": 7, "n_whitespaces": 2, "n_words": 4, "nloc": 1, "token_counts": 7}}
{"dataset_split": "train", "id": "mall@82944a4:mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionService.java#40-40", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "82944a4d18fe7c60b2718f5b06c7912c9dfff1cd", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsFlashPromotionService.java", "language": "Java"}, "method": {"name": "list", "qualified_name": "com.macro.mall.service.SmsFlashPromotionService#list", "start_line": 40, "end_line": 40, "signature": "list(String keyword, Integer pageSize, Integer pageNum)", "original_code": "List<SmsFlashPromotion> list(String keyword, Integer pageSize, Integer pageNum);", "doc_comment": "/**\n     * \u6839\u636e\u5173\u952e\u5b57\u5206\u9875\u67e5\u8be2\u6d3b\u52a8\n     */"}, "code_tokens": ["list", ";", "List", "(", ",", ",", ")", "<", "SmsFlashPromotion", ">", "String", "keyword", "Integer", "pageSize", "Integer", "pageNum"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 24, "ast_depth": 5, "n_identifiers": 4, "vocab_size": 14, "n_whitespaces": 6, "n_words": 9, "nloc": 1, "token_counts": 16}}
{"dataset_split": "train", "id": "mall@6bea1cb:mall-admin/src/main/java/com/macro/mall/service/SmsHomeAdvertiseService.java#15-15", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "6bea1cbb9793f03c7ab08063a4435b94941892ef", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsHomeAdvertiseService.java", "language": "Java"}, "method": {"name": "create", "qualified_name": "com.macro.mall.service.SmsHomeAdvertiseService#create", "start_line": 15, "end_line": 15, "signature": "create(SmsHomeAdvertise advertise)", "original_code": "int create(SmsHomeAdvertise advertise);", "doc_comment": "/**\n     * \u6dfb\u52a0\u5e7f\u544a\n     */"}, "code_tokens": ["create", ";", "int", "(", ")", "SmsHomeAdvertise", "advertise"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 12, "ast_depth": 5, "n_identifiers": 2, "vocab_size": 7, "n_whitespaces": 2, "n_words": 4, "nloc": 1, "token_counts": 7}}
{"dataset_split": "train", "id": "mall@6bea1cb:mall-admin/src/main/java/com/macro/mall/service/SmsHomeAdvertiseService.java#20-20", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "6bea1cbb9793f03c7ab08063a4435b94941892ef", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsHomeAdvertiseService.java", "language": "Java"}, "method": {"name": "delete", "qualified_name": "com.macro.mall.service.SmsHomeAdvertiseService#delete", "start_line": 20, "end_line": 20, "signature": "delete(List<Long> ids)", "original_code": "int delete(List<Long> ids);", "doc_comment": "/**\n     * \u6279\u91cf\u5220\u9664\u5e7f\u544a\n     */"}, "code_tokens": ["delete", ";", "int", "(", ")", "ids", "List", "<", "Long", ">"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 17, "ast_depth": 7, "n_identifiers": 2, "vocab_size": 10, "n_whitespaces": 2, "n_words": 5, "nloc": 1, "token_counts": 10}}
{"dataset_split": "train", "id": "mall@6bea1cb:mall-admin/src/main/java/com/macro/mall/service/SmsHomeAdvertiseService.java#25-25", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "6bea1cbb9793f03c7ab08063a4435b94941892ef", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsHomeAdvertiseService.java", "language": "Java"}, "method": {"name": "updateStatus", "qualified_name": "com.macro.mall.service.SmsHomeAdvertiseService#updateStatus", "start_line": 25, "end_line": 25, "signature": "updateStatus(Long id, Integer status)", "original_code": "int updateStatus(Long id, Integer status);", "doc_comment": "/**\n     * \u4fee\u6539\u5e7f\u544a\u4e0a\u3001\u4e0b\u7ebf\u72b6\u6001\n     */"}, "code_tokens": ["updateStatus", ";", "int", "(", ",", ")", "Long", "id", "Integer", "status"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 16, "ast_depth": 5, "n_identifiers": 3, "vocab_size": 10, "n_whitespaces": 4, "n_words": 6, "nloc": 1, "token_counts": 10}}
{"dataset_split": "train", "id": "mall@6bea1cb:mall-admin/src/main/java/com/macro/mall/service/SmsHomeAdvertiseService.java#30-30", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "6bea1cbb9793f03c7ab08063a4435b94941892ef", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsHomeAdvertiseService.java", "language": "Java"}, "method": {"name": "getItem", "qualified_name": "com.macro.mall.service.SmsHomeAdvertiseService#getItem", "start_line": 30, "end_line": 30, "signature": "getItem(Long id)", "original_code": "SmsHomeAdvertise getItem(Long id);", "doc_comment": "/**\n     * \u83b7\u53d6\u5e7f\u544a\u8be6\u60c5\n     */"}, "code_tokens": ["SmsHomeAdvertise", "getItem", ";", "(", ")", "Long", "id"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 11, "ast_depth": 5, "n_identifiers": 2, "vocab_size": 7, "n_whitespaces": 2, "n_words": 4, "nloc": 1, "token_counts": 7}}
{"dataset_split": "train", "id": "mall@6bea1cb:mall-admin/src/main/java/com/macro/mall/service/SmsHomeAdvertiseService.java#35-35", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "6bea1cbb9793f03c7ab08063a4435b94941892ef", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsHomeAdvertiseService.java", "language": "Java"}, "method": {"name": "update", "qualified_name": "com.macro.mall.service.SmsHomeAdvertiseService#update", "start_line": 35, "end_line": 35, "signature": "update(Long id, SmsHomeAdvertise advertise)", "original_code": "int update(Long id, SmsHomeAdvertise advertise);", "doc_comment": "/**\n     * \u66f4\u65b0\u5e7f\u544a\n     */"}, "code_tokens": ["update", ";", "int", "(", ",", ")", "Long", "id", "SmsHomeAdvertise", "advertise"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 16, "ast_depth": 5, "n_identifiers": 3, "vocab_size": 10, "n_whitespaces": 4, "n_words": 6, "nloc": 1, "token_counts": 10}}
{"dataset_split": "train", "id": "mall@6bea1cb:mall-admin/src/main/java/com/macro/mall/service/SmsHomeAdvertiseService.java#40-40", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "6bea1cbb9793f03c7ab08063a4435b94941892ef", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsHomeAdvertiseService.java", "language": "Java"}, "method": {"name": "list", "qualified_name": "com.macro.mall.service.SmsHomeAdvertiseService#list", "start_line": 40, "end_line": 40, "signature": "list(String name, Integer type, String endTime, Integer pageSize, Integer pageNum)", "original_code": "List<SmsHomeAdvertise> list(String name, Integer type, String endTime, Integer pageSize, Integer pageNum);", "doc_comment": "/**\n     * \u5206\u9875\u67e5\u8be2\u5e7f\u544a\n     */"}, "code_tokens": ["list", ";", "List", "(", ",", ",", ",", ",", ")", "<", "SmsHomeAdvertise", ">", "String", "name", "Integer", "type", "String", "endTime", "Integer", "pageSize", "Integer", "pageNum"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 32, "ast_depth": 5, "n_identifiers": 6, "vocab_size": 16, "n_whitespaces": 10, "n_words": 13, "nloc": 1, "token_counts": 22}}
{"dataset_split": "train", "id": "mall@8a6579d:mall-admin/src/main/java/com/macro/mall/service/SmsHomeBrandService.java#16-17", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "8a6579db7f145ac6c145d719eae9b47b5dbc5819", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsHomeBrandService.java", "language": "Java"}, "method": {"name": "create", "qualified_name": "com.macro.mall.service.SmsHomeBrandService#create", "start_line": 16, "end_line": 17, "signature": "create(List<SmsHomeBrand> homeBrandList)", "original_code": "@Transactional\n    int create(List<SmsHomeBrand> homeBrandList);", "doc_comment": "/**\n     * \u6dfb\u52a0\u54c1\u724c\u63a8\u8350\n     */"}, "code_tokens": ["create", ";", "int", "(", ")", "@", "Transactional", "homeBrandList", "List", "<", "SmsHomeBrand", ">"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 21, "ast_depth": 7, "n_identifiers": 3, "vocab_size": 12, "n_whitespaces": 7, "n_words": 6, "nloc": 2, "token_counts": 12}}
{"dataset_split": "train", "id": "mall@8a6579d:mall-admin/src/main/java/com/macro/mall/service/SmsHomeBrandService.java#22-22", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "8a6579db7f145ac6c145d719eae9b47b5dbc5819", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsHomeBrandService.java", "language": "Java"}, "method": {"name": "updateSort", "qualified_name": "com.macro.mall.service.SmsHomeBrandService#updateSort", "start_line": 22, "end_line": 22, "signature": "updateSort(Long id, Integer sort)", "original_code": "int updateSort(Long id, Integer sort);", "doc_comment": "/**\n     * \u4fee\u6539\u54c1\u724c\u63a8\u8350\u6392\u5e8f\n     */"}, "code_tokens": ["updateSort", ";", "int", "(", ",", ")", "Long", "id", "Integer", "sort"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 16, "ast_depth": 5, "n_identifiers": 3, "vocab_size": 10, "n_whitespaces": 4, "n_words": 6, "nloc": 1, "token_counts": 10}}
{"dataset_split": "train", "id": "mall@8a6579d:mall-admin/src/main/java/com/macro/mall/service/SmsHomeBrandService.java#27-27", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "8a6579db7f145ac6c145d719eae9b47b5dbc5819", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsHomeBrandService.java", "language": "Java"}, "method": {"name": "delete", "qualified_name": "com.macro.mall.service.SmsHomeBrandService#delete", "start_line": 27, "end_line": 27, "signature": "delete(List<Long> ids)", "original_code": "int delete(List<Long> ids);", "doc_comment": "/**\n     * \u6279\u91cf\u5220\u9664\u54c1\u724c\u63a8\u8350\n     */"}, "code_tokens": ["delete", ";", "int", "(", ")", "ids", "List", "<", "Long", ">"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 17, "ast_depth": 7, "n_identifiers": 2, "vocab_size": 10, "n_whitespaces": 2, "n_words": 5, "nloc": 1, "token_counts": 10}}
{"dataset_split": "train", "id": "mall@8a6579d:mall-admin/src/main/java/com/macro/mall/service/SmsHomeBrandService.java#32-32", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "8a6579db7f145ac6c145d719eae9b47b5dbc5819", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsHomeBrandService.java", "language": "Java"}, "method": {"name": "updateRecommendStatus", "qualified_name": "com.macro.mall.service.SmsHomeBrandService#updateRecommendStatus", "start_line": 32, "end_line": 32, "signature": "updateRecommendStatus(List<Long> ids, Integer recommendStatus)", "original_code": "int updateRecommendStatus(List<Long> ids, Integer recommendStatus);", "doc_comment": "/**\n     * \u6279\u91cf\u66f4\u65b0\u54c1\u724c\u63a8\u8350\u72b6\u6001\n     */"}, "code_tokens": ["updateRecommendStatus", ";", "int", "(", ",", ")", "ids", "Integer", "recommendStatus", "List", "<", "Long", ">"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 21, "ast_depth": 7, "n_identifiers": 3, "vocab_size": 13, "n_whitespaces": 4, "n_words": 7, "nloc": 1, "token_counts": 13}}
{"dataset_split": "train", "id": "mall@8a6579d:mall-admin/src/main/java/com/macro/mall/service/SmsHomeBrandService.java#37-37", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "8a6579db7f145ac6c145d719eae9b47b5dbc5819", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/SmsHomeBrandService.java", "language": "Java"}, "method": {"name": "list", "qualified_name": "com.macro.mall.service.SmsHomeBrandService#list", "start_line": 37, "end_line": 37, "signature": "list(String brandName, Integer recommendStatus, Integer pageSize, Integer pageNum)", "original_code": "List<SmsHomeBrand> list(String brandName, Integer recommendStatus, Integer pageSize, Integer pageNum);", "doc_comment": "/**\n     * \u5206\u9875\u67e5\u8be2\u54c1\u724c\u63a8\u8350\n     */"}, "code_tokens": ["list", ";", "List", "(", ",", ",", ",", ")", "<", "SmsHomeBrand", ">", "String", "brandName", "Integer", "recommendStatus", "Integer", "pageSize", "Integer", "pageNum"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 28, "ast_depth": 5, "n_identifiers": 5, "vocab_size": 15, "n_whitespaces": 8, "n_words": 11, "nloc": 1, "token_counts": 19}}
{"dataset_split": "train", "id": "mall@bbd593e:mall-admin/src/main/java/com/macro/mall/service/UmsAdminCacheService.java#16-16", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "bbd593e869ec571287eda0613a2b9107c4fa81f8", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/UmsAdminCacheService.java", "language": "Java"}, "method": {"name": "delAdmin", "qualified_name": "com.macro.mall.service.UmsAdminCacheService#delAdmin", "start_line": 16, "end_line": 16, "signature": "delAdmin(Long adminId)", "original_code": "void delAdmin(Long adminId);", "doc_comment": "/**\n     * \u5220\u9664\u540e\u53f0\u7528\u6237\u7f13\u5b58\n     */"}, "code_tokens": ["void", "delAdmin", ";", "(", ")", "Long", "adminId"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 11, "ast_depth": 5, "n_identifiers": 2, "vocab_size": 7, "n_whitespaces": 2, "n_words": 4, "nloc": 1, "token_counts": 7}}
{"dataset_split": "train", "id": "mall@bbd593e:mall-admin/src/main/java/com/macro/mall/service/UmsAdminCacheService.java#21-21", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "bbd593e869ec571287eda0613a2b9107c4fa81f8", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/UmsAdminCacheService.java", "language": "Java"}, "method": {"name": "delResourceList", "qualified_name": "com.macro.mall.service.UmsAdminCacheService#delResourceList", "start_line": 21, "end_line": 21, "signature": "delResourceList(Long adminId)", "original_code": "void delResourceList(Long adminId);", "doc_comment": "/**\n     * \u5220\u9664\u540e\u53f0\u7528\u6237\u8d44\u6e90\u5217\u8868\u7f13\u5b58\n     */"}, "code_tokens": ["void", "delResourceList", ";", "(", ")", "Long", "adminId"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 11, "ast_depth": 5, "n_identifiers": 2, "vocab_size": 7, "n_whitespaces": 2, "n_words": 4, "nloc": 1, "token_counts": 7}}
{"dataset_split": "train", "id": "mall@bbd593e:mall-admin/src/main/java/com/macro/mall/service/UmsAdminCacheService.java#26-26", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "bbd593e869ec571287eda0613a2b9107c4fa81f8", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/UmsAdminCacheService.java", "language": "Java"}, "method": {"name": "delResourceListByRole", "qualified_name": "com.macro.mall.service.UmsAdminCacheService#delResourceListByRole", "start_line": 26, "end_line": 26, "signature": "delResourceListByRole(Long roleId)", "original_code": "void delResourceListByRole(Long roleId);", "doc_comment": "/**\n     * \u5f53\u89d2\u8272\u76f8\u5173\u8d44\u6e90\u4fe1\u606f\u6539\u53d8\u65f6\u5220\u9664\u76f8\u5173\u540e\u53f0\u7528\u6237\u7f13\u5b58\n     */"}, "code_tokens": ["void", "delResourceListByRole", ";", "(", ")", "Long", "roleId"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 11, "ast_depth": 5, "n_identifiers": 2, "vocab_size": 7, "n_whitespaces": 2, "n_words": 4, "nloc": 1, "token_counts": 7}}
{"dataset_split": "train", "id": "mall@bbd593e:mall-admin/src/main/java/com/macro/mall/service/UmsAdminCacheService.java#31-31", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "bbd593e869ec571287eda0613a2b9107c4fa81f8", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/UmsAdminCacheService.java", "language": "Java"}, "method": {"name": "delResourceListByRoleIds", "qualified_name": "com.macro.mall.service.UmsAdminCacheService#delResourceListByRoleIds", "start_line": 31, "end_line": 31, "signature": "delResourceListByRoleIds(List<Long> roleIds)", "original_code": "void delResourceListByRoleIds(List<Long> roleIds);", "doc_comment": "/**\n     * \u5f53\u89d2\u8272\u76f8\u5173\u8d44\u6e90\u4fe1\u606f\u6539\u53d8\u65f6\u5220\u9664\u76f8\u5173\u540e\u53f0\u7528\u6237\u7f13\u5b58\n     */"}, "code_tokens": ["void", "delResourceListByRoleIds", ";", "(", ")", "roleIds", "List", "<", "Long", ">"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 16, "ast_depth": 7, "n_identifiers": 2, "vocab_size": 10, "n_whitespaces": 2, "n_words": 5, "nloc": 1, "token_counts": 10}}
{"dataset_split": "train", "id": "mall@bbd593e:mall-admin/src/main/java/com/macro/mall/service/UmsAdminCacheService.java#36-36", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "bbd593e869ec571287eda0613a2b9107c4fa81f8", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/UmsAdminCacheService.java", "language": "Java"}, "method": {"name": "delResourceListByResource", "qualified_name": "com.macro.mall.service.UmsAdminCacheService#delResourceListByResource", "start_line": 36, "end_line": 36, "signature": "delResourceListByResource(Long resourceId)", "original_code": "void delResourceListByResource(Long resourceId);", "doc_comment": "/**\n     * \u5f53\u8d44\u6e90\u4fe1\u606f\u6539\u53d8\u65f6\uff0c\u5220\u9664\u8d44\u6e90\u76f8\u5173\u540e\u53f0\u7528\u6237\u7f13\u5b58\n     */"}, "code_tokens": ["void", "delResourceListByResource", ";", "(", ")", "Long", "resourceId"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 11, "ast_depth": 5, "n_identifiers": 2, "vocab_size": 7, "n_whitespaces": 2, "n_words": 4, "nloc": 1, "token_counts": 7}}
{"dataset_split": "train", "id": "mall@bbd593e:mall-admin/src/main/java/com/macro/mall/service/UmsAdminCacheService.java#41-41", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "bbd593e869ec571287eda0613a2b9107c4fa81f8", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/UmsAdminCacheService.java", "language": "Java"}, "method": {"name": "getAdmin", "qualified_name": "com.macro.mall.service.UmsAdminCacheService#getAdmin", "start_line": 41, "end_line": 41, "signature": "getAdmin(String username)", "original_code": "UmsAdmin getAdmin(String username);", "doc_comment": "/**\n     * \u83b7\u53d6\u7f13\u5b58\u540e\u53f0\u7528\u6237\u4fe1\u606f\n     */"}, "code_tokens": ["UmsAdmin", "getAdmin", ";", "(", ")", "String", "username"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 11, "ast_depth": 5, "n_identifiers": 2, "vocab_size": 7, "n_whitespaces": 2, "n_words": 4, "nloc": 1, "token_counts": 7}}
{"dataset_split": "train", "id": "mall@bbd593e:mall-admin/src/main/java/com/macro/mall/service/UmsAdminCacheService.java#46-46", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "bbd593e869ec571287eda0613a2b9107c4fa81f8", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/UmsAdminCacheService.java", "language": "Java"}, "method": {"name": "setAdmin", "qualified_name": "com.macro.mall.service.UmsAdminCacheService#setAdmin", "start_line": 46, "end_line": 46, "signature": "setAdmin(UmsAdmin admin)", "original_code": "void setAdmin(UmsAdmin admin);", "doc_comment": "/**\n     * \u8bbe\u7f6e\u7f13\u5b58\u540e\u53f0\u7528\u6237\u4fe1\u606f\n     */"}, "code_tokens": ["void", "setAdmin", ";", "(", ")", "UmsAdmin", "admin"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 11, "ast_depth": 5, "n_identifiers": 2, "vocab_size": 7, "n_whitespaces": 2, "n_words": 4, "nloc": 1, "token_counts": 7}}
{"dataset_split": "train", "id": "mall@bbd593e:mall-admin/src/main/java/com/macro/mall/service/UmsAdminCacheService.java#51-51", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "bbd593e869ec571287eda0613a2b9107c4fa81f8", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/UmsAdminCacheService.java", "language": "Java"}, "method": {"name": "getResourceList", "qualified_name": "com.macro.mall.service.UmsAdminCacheService#getResourceList", "start_line": 51, "end_line": 51, "signature": "getResourceList(Long adminId)", "original_code": "List<UmsResource> getResourceList(Long adminId);", "doc_comment": "/**\n     * \u83b7\u53d6\u7f13\u5b58\u540e\u53f0\u7528\u6237\u8d44\u6e90\u5217\u8868\n     */"}, "code_tokens": ["getResourceList", ";", "List", "(", ")", "<", "UmsResource", ">", "Long", "adminId"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 16, "ast_depth": 5, "n_identifiers": 2, "vocab_size": 10, "n_whitespaces": 2, "n_words": 5, "nloc": 1, "token_counts": 10}}
{"dataset_split": "train", "id": "mall@bbd593e:mall-admin/src/main/java/com/macro/mall/service/UmsAdminCacheService.java#56-56", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "bbd593e869ec571287eda0613a2b9107c4fa81f8", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/UmsAdminCacheService.java", "language": "Java"}, "method": {"name": "setResourceList", "qualified_name": "com.macro.mall.service.UmsAdminCacheService#setResourceList", "start_line": 56, "end_line": 56, "signature": "setResourceList(Long adminId, List<UmsResource> resourceList)", "original_code": "void setResourceList(Long adminId, List<UmsResource> resourceList);", "doc_comment": "/**\n     * \u8bbe\u7f6e\u7f13\u5b58\u540e\u53f0\u7528\u6237\u8d44\u6e90\u5217\u8868\n     */"}, "code_tokens": ["void", "setResourceList", ";", "(", ",", ")", "Long", "adminId", "resourceList", "List", "<", "UmsResource", ">"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 20, "ast_depth": 7, "n_identifiers": 3, "vocab_size": 13, "n_whitespaces": 4, "n_words": 7, "nloc": 1, "token_counts": 13}}
{"dataset_split": "train", "id": "mall@83fe3e7:mall-admin/src/main/java/com/macro/mall/service/impl/UmsAdminServiceImpl.java#60-76", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "83fe3e707b99d135deb9de071ce87fe4b07c563f", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/impl/UmsAdminServiceImpl.java", "language": "Java"}, "method": {"name": "getAdminByUsername", "qualified_name": "com.macro.mall.service.impl.UmsAdminServiceImpl#getAdminByUsername", "start_line": 60, "end_line": 76, "signature": "getAdminByUsername(String username)", "original_code": "@Override\n    public UmsAdmin getAdminByUsername(String username) {\n        //\u5148\u4ece\u7f13\u5b58\u4e2d\u83b7\u53d6\u6570\u636e\n        UmsAdmin admin = getCacheService().getAdmin(username);\n        if (admin != null) return admin;\n        //\u7f13\u5b58\u4e2d\u6ca1\u6709\u518d\u4ece\u6570\u636e\u5e93\u4e2d\u83b7\u53d6\n        UmsAdminExample example = new UmsAdminExample();\n        example.createCriteria().andUsernameEqualTo(username);\n        List<UmsAdmin> adminList = adminMapper.selectByExample(example);\n        if (adminList != null && adminList.size() > 0) {\n            admin = adminList.get(0);\n            //\u5c06\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u5b58\u5165\u7f13\u5b58\u4e2d\n            getCacheService().setAdmin(admin);\n            return admin;\n        }\n        return null;\n    }", "doc_comment": ""}, "code_tokens": ["UmsAdmin", "getAdminByUsername", "public", "(", ")", "{", "//\u5148\u4ece\u7f13\u5b58\u4e2d\u83b7\u53d6\u6570\u636e", "//\u7f13\u5b58\u4e2d\u6ca1\u6709\u518d\u4ece\u6570\u636e\u5e93\u4e2d\u83b7\u53d6", "}", "@", "Override", "String", "username", "UmsAdmin", ";", "if", "UmsAdminExample", ";", ";", ";", "if", "return", "null", ";", "admin", "=", "(", ")", "return", "admin", ";", "example", "=", ".", "andUsernameEqualTo", "List", "adminList", "=", "(", ")", "{", "//\u5c06\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u5b58\u5165\u7f13\u5b58\u4e2d", "}", ".", "getAdmin", "admin", "!=", "null", "new", "UmsAdminExample", "example", ".", "createCriteria", "(", "username", ")", "<", "UmsAdmin", ">", "adminMapper", ".", "selectByExample", "&&", ";", ";", "return", "admin", ";", "getCacheService", "(", "username", ")", "(", ")", "(", ")", "(", "example", ")", "adminList", "!=", "null", ">", "0", "admin", "=", ".", "setAdmin", "(", ")", "adminList", ".", "size", "adminList", ".", "get", "getCacheService", "(", "admin", ")", "(", ")", "(", "0", ")", "(", ")"], "metrics": {"cyclomatic_complexity": 4, "n_ast_nodes": 158, "ast_depth": 10, "n_identifiers": 15, "vocab_size": 40, "n_whitespaces": 183, "n_words": 50, "nloc": 17, "token_counts": 107}}
{"dataset_split": "train", "id": "mall@83fe3e7:mall-admin/src/main/java/com/macro/mall/service/impl/UmsAdminServiceImpl.java#78-96", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "83fe3e707b99d135deb9de071ce87fe4b07c563f", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/impl/UmsAdminServiceImpl.java", "language": "Java"}, "method": {"name": "register", "qualified_name": "com.macro.mall.service.impl.UmsAdminServiceImpl#register", "start_line": 78, "end_line": 96, "signature": "register(UmsAdminParam umsAdminParam)", "original_code": "@Override\n    public UmsAdmin register(UmsAdminParam umsAdminParam) {\n        UmsAdmin umsAdmin = new UmsAdmin();\n        BeanUtils.copyProperties(umsAdminParam, umsAdmin);\n        umsAdmin.setCreateTime(new Date());\n        umsAdmin.setStatus(1);\n        //\u67e5\u8be2\u662f\u5426\u6709\u76f8\u540c\u7528\u6237\u540d\u7684\u7528\u6237\n        UmsAdminExample example = new UmsAdminExample();\n        example.createCriteria().andUsernameEqualTo(umsAdmin.getUsername());\n        List<UmsAdmin> umsAdminList = adminMapper.selectByExample(example);\n        if (umsAdminList.size() > 0) {\n            return null;\n        }\n        //\u5c06\u5bc6\u7801\u8fdb\u884c\u52a0\u5bc6\u64cd\u4f5c\n        String encodePassword = passwordEncoder.encode(umsAdmin.getPassword());\n        umsAdmin.setPassword(encodePassword);\n        adminMapper.insert(umsAdmin);\n        return umsAdmin;\n    }", "doc_comment": ""}, "code_tokens": ["UmsAdmin", "register", "public", "(", ")", "{", "//\u67e5\u8be2\u662f\u5426\u6709\u76f8\u540c\u7528\u6237\u540d\u7684\u7528\u6237", "//\u5c06\u5bc6\u7801\u8fdb\u884c\u52a0\u5bc6\u64cd\u4f5c", "}", "@", "Override", "UmsAdminParam", "umsAdminParam", "UmsAdmin", ";", ";", ";", ";", "UmsAdminExample", ";", ";", ";", "if", "String", ";", ";", ";", "return", "umsAdmin", ";", "umsAdmin", "=", "BeanUtils", ".", "copyProperties", "umsAdmin", ".", "setCreateTime", "umsAdmin", ".", "setStatus", "example", "=", ".", "andUsernameEqualTo", "List", "umsAdminList", "=", "(", ")", "{", "}", "encodePassword", "=", "umsAdmin", ".", "setPassword", "adminMapper", ".", "insert", "new", "UmsAdmin", "(", "umsAdminParam", ",", "umsAdmin", ")", "(", ")", "(", "1", ")", "new", "UmsAdminExample", "example", ".", "createCriteria", "(", ")", "<", "UmsAdmin", ">", "adminMapper", ".", "selectByExample", ">", "0", "return", "null", ";", "passwordEncoder", ".", "encode", "(", "encodePassword", ")", "(", "umsAdmin", ")", "(", ")", "new", "Date", "(", ")", "(", ")", "umsAdmin", ".", "getUsername", "(", "example", ")", "umsAdminList", ".", "size", "(", ")", "(", ")", "(", ")", "(", ")", "umsAdmin", ".", "getPassword", "(", ")"], "metrics": {"cyclomatic_complexity": 2, "n_ast_nodes": 188, "ast_depth": 10, "n_identifiers": 22, "vocab_size": 48, "n_whitespaces": 184, "n_words": 58, "nloc": 19, "token_counts": 129}}
{"dataset_split": "train", "id": "mall@83fe3e7:mall-admin/src/main/java/com/macro/mall/service/impl/UmsAdminServiceImpl.java#98-119", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "83fe3e707b99d135deb9de071ce87fe4b07c563f", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/impl/UmsAdminServiceImpl.java", "language": "Java"}, "method": {"name": "login", "qualified_name": "com.macro.mall.service.impl.UmsAdminServiceImpl#login", "start_line": 98, "end_line": 119, "signature": "login(String username, String password)", "original_code": "@Override\n    public String login(String username, String password) {\n        String token = null;\n        //\u5bc6\u7801\u9700\u8981\u5ba2\u6237\u7aef\u52a0\u5bc6\u540e\u4f20\u9012\n        try {\n            UserDetails userDetails = loadUserByUsername(username);\n            if(!passwordEncoder.matches(password,userDetails.getPassword())){\n                Asserts.fail(\"\u5bc6\u7801\u4e0d\u6b63\u786e\");\n            }\n            if(!userDetails.isEnabled()){\n                Asserts.fail(\"\u5e10\u53f7\u5df2\u88ab\u7981\u7528\");\n            }\n            UsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken(userDetails, null, userDetails.getAuthorities());\n            SecurityContextHolder.getContext().setAuthentication(authentication);\n            token = jwtTokenUtil.generateToken(userDetails);\n//            updateLoginTimeByUsername(username);\n            insertLoginLog(username);\n        } catch (AuthenticationException e) {\n            LOGGER.warn(\"\u767b\u5f55\u5f02\u5e38:{}\", e.getMessage());\n        }\n        return token;\n    }", "doc_comment": ""}, "code_tokens": ["String", "login", "public", "(", ",", ")", "{", "//\u5bc6\u7801\u9700\u8981\u5ba2\u6237\u7aef\u52a0\u5bc6\u540e\u4f20\u9012", "}", "@", "Override", "String", "username", "String", "password", "String", ";", "try", "return", "token", ";", "token", "=", "null", "{", "//            updateLoginTimeByUsername(username);", "}", "catch", "(", ")", "UserDetails", ";", "if", "if", "UsernamePasswordAuthenticationToken", ";", ";", ";", ";", "e", "{", "}", "userDetails", "=", "(", ")", "{", "}", "(", ")", "{", "}", "authentication", "=", ".", "setAuthentication", "token", "=", "insertLoginLog", "AuthenticationException", ";", "loadUserByUsername", "!", ";", "!", ";", "new", "UsernamePasswordAuthenticationToken", "SecurityContextHolder", ".", "getContext", "(", "authentication", ")", "jwtTokenUtil", ".", "generateToken", "(", "username", ")", "LOGGER", ".", "warn", "(", "username", ")", "passwordEncoder", ".", "matches", "Asserts", ".", "fail", "userDetails", ".", "isEnabled", "Asserts", ".", "fail", "(", "userDetails", ",", "null", ",", ")", "(", ")", "(", "userDetails", ")", "(", ",", ")", "(", "password", ",", ")", "(", ")", "(", ")", "(", ")", "userDetails", ".", "getAuthorities", "\"", "\u767b\u5f55\u5f02\u5e38:{}", "\"", "e", ".", "getMessage", "userDetails", ".", "getPassword", "\"", "\u5bc6\u7801\u4e0d\u6b63\u786e", "\"", "\"", "\u5e10\u53f7\u5df2\u88ab\u7981\u7528", "\"", "(", ")", "(", ")", "(", ")"], "metrics": {"cyclomatic_complexity": 4, "n_ast_nodes": 213, "ast_depth": 13, "n_identifiers": 25, "vocab_size": 52, "n_whitespaces": 268, "n_words": 62, "nloc": 22, "token_counts": 146}}
{"dataset_split": "train", "id": "mall@83fe3e7:mall-admin/src/main/java/com/macro/mall/service/impl/UmsAdminServiceImpl.java#125-135", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "83fe3e707b99d135deb9de071ce87fe4b07c563f", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/impl/UmsAdminServiceImpl.java", "language": "Java"}, "method": {"name": "insertLoginLog", "qualified_name": "com.macro.mall.service.impl.UmsAdminServiceImpl#insertLoginLog", "start_line": 125, "end_line": 135, "signature": "insertLoginLog(String username)", "original_code": "private void insertLoginLog(String username) {\n        UmsAdmin admin = getAdminByUsername(username);\n        if(admin==null) return;\n        UmsAdminLoginLog loginLog = new UmsAdminLoginLog();\n        loginLog.setAdminId(admin.getId());\n        loginLog.setCreateTime(new Date());\n        ServletRequestAttributes attributes = (ServletRequestAttributes) RequestContextHolder.getRequestAttributes();\n        HttpServletRequest request = attributes.getRequest();\n        loginLog.setIp(RequestUtil.getRequestIp(request));\n        loginLogMapper.insert(loginLog);\n    }", "doc_comment": "/**\n     * \u6dfb\u52a0\u767b\u5f55\u8bb0\u5f55\n     * @param username \u7528\u6237\u540d\n     */"}, "code_tokens": ["void", "insertLoginLog", "private", "(", ")", "{", "}", "String", "username", "UmsAdmin", ";", "if", "UmsAdminLoginLog", ";", ";", ";", "ServletRequestAttributes", ";", "HttpServletRequest", ";", ";", ";", "admin", "=", "(", ")", "return", ";", "loginLog", "=", "loginLog", ".", "setAdminId", "loginLog", ".", "setCreateTime", "attributes", "=", "request", "=", "loginLog", ".", "setIp", "loginLogMapper", ".", "insert", "getAdminByUsername", "admin", "==", "null", "new", "UmsAdminLoginLog", "(", ")", "(", ")", "(", "ServletRequestAttributes", ")", "attributes", ".", "getRequest", "(", ")", "(", "loginLog", ")", "(", "username", ")", "(", ")", "admin", ".", "getId", "new", "Date", "RequestContextHolder", ".", "getRequestAttributes", "(", ")", "RequestUtil", ".", "getRequestIp", "(", ")", "(", ")", "(", ")", "(", "request", ")"], "metrics": {"cyclomatic_complexity": 2, "n_ast_nodes": 139, "ast_depth": 9, "n_identifiers": 18, "vocab_size": 38, "n_whitespaces": 106, "n_words": 42, "nloc": 11, "token_counts": 94}}
{"dataset_split": "train", "id": "mall@83fe3e7:mall-admin/src/main/java/com/macro/mall/service/impl/UmsAdminServiceImpl.java#140-146", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "83fe3e707b99d135deb9de071ce87fe4b07c563f", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/impl/UmsAdminServiceImpl.java", "language": "Java"}, "method": {"name": "updateLoginTimeByUsername", "qualified_name": "com.macro.mall.service.impl.UmsAdminServiceImpl#updateLoginTimeByUsername", "start_line": 140, "end_line": 146, "signature": "updateLoginTimeByUsername(String username)", "original_code": "private void updateLoginTimeByUsername(String username) {\n        UmsAdmin record = new UmsAdmin();\n        record.setLoginTime(new Date());\n        UmsAdminExample example = new UmsAdminExample();\n        example.createCriteria().andUsernameEqualTo(username);\n        adminMapper.updateByExampleSelective(record, example);\n    }", "doc_comment": "/**\n     * \u6839\u636e\u7528\u6237\u540d\u4fee\u6539\u767b\u5f55\u65f6\u95f4\n     */"}, "code_tokens": ["void", "updateLoginTimeByUsername", "private", "(", ")", "{", "}", "String", "username", "UmsAdmin", ";", ";", "UmsAdminExample", ";", ";", ";", "record", "=", "record", ".", "setLoginTime", "example", "=", ".", "andUsernameEqualTo", "adminMapper", ".", "updateByExampleSelective", "new", "UmsAdmin", "(", ")", "new", "UmsAdminExample", "example", ".", "createCriteria", "(", "username", ")", "(", "record", ",", "example", ")", "(", ")", "new", "Date", "(", ")", "(", ")", "(", ")"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 82, "ast_depth": 9, "n_identifiers": 9, "vocab_size": 24, "n_whitespaces": 64, "n_words": 25, "nloc": 7, "token_counts": 55}}
{"dataset_split": "train", "id": "mall@83fe3e7:mall-admin/src/main/java/com/macro/mall/service/impl/UmsAdminServiceImpl.java#148-151", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "83fe3e707b99d135deb9de071ce87fe4b07c563f", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/impl/UmsAdminServiceImpl.java", "language": "Java"}, "method": {"name": "refreshToken", "qualified_name": "com.macro.mall.service.impl.UmsAdminServiceImpl#refreshToken", "start_line": 148, "end_line": 151, "signature": "refreshToken(String oldToken)", "original_code": "@Override\n    public String refreshToken(String oldToken) {\n        return jwtTokenUtil.refreshHeadToken(oldToken);\n    }", "doc_comment": ""}, "code_tokens": ["String", "refreshToken", "public", "(", ")", "{", "}", "@", "Override", "String", "oldToken", "return", ";", "jwtTokenUtil", ".", "refreshHeadToken", "(", "oldToken", ")"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 29, "ast_depth": 7, "n_identifiers": 5, "vocab_size": 15, "n_whitespaces": 24, "n_words": 10, "nloc": 4, "token_counts": 19}}
{"dataset_split": "train", "id": "mall@83fe3e7:mall-admin/src/main/java/com/macro/mall/service/impl/UmsAdminServiceImpl.java#153-156", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "83fe3e707b99d135deb9de071ce87fe4b07c563f", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/impl/UmsAdminServiceImpl.java", "language": "Java"}, "method": {"name": "getItem", "qualified_name": "com.macro.mall.service.impl.UmsAdminServiceImpl#getItem", "start_line": 153, "end_line": 156, "signature": "getItem(Long id)", "original_code": "@Override\n    public UmsAdmin getItem(Long id) {\n        return adminMapper.selectByPrimaryKey(id);\n    }", "doc_comment": ""}, "code_tokens": ["UmsAdmin", "getItem", "public", "(", ")", "{", "}", "@", "Override", "Long", "id", "return", ";", "adminMapper", ".", "selectByPrimaryKey", "(", "id", ")"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 29, "ast_depth": 7, "n_identifiers": 5, "vocab_size": 16, "n_whitespaces": 24, "n_words": 10, "nloc": 4, "token_counts": 19}}
{"dataset_split": "train", "id": "mall@83fe3e7:mall-admin/src/main/java/com/macro/mall/service/impl/UmsAdminServiceImpl.java#158-168", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "83fe3e707b99d135deb9de071ce87fe4b07c563f", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/impl/UmsAdminServiceImpl.java", "language": "Java"}, "method": {"name": "list", "qualified_name": "com.macro.mall.service.impl.UmsAdminServiceImpl#list", "start_line": 158, "end_line": 168, "signature": "list(String keyword, Integer pageSize, Integer pageNum)", "original_code": "@Override\n    public List<UmsAdmin> list(String keyword, Integer pageSize, Integer pageNum) {\n        PageHelper.startPage(pageNum, pageSize);\n        UmsAdminExample example = new UmsAdminExample();\n        UmsAdminExample.Criteria criteria = example.createCriteria();\n        if (!StrUtil.isEmpty(keyword)) {\n            criteria.andUsernameLike(\"%\" + keyword + \"%\");\n            example.or(example.createCriteria().andNickNameLike(\"%\" + keyword + \"%\"));\n        }\n        return adminMapper.selectByExample(example);\n    }", "doc_comment": ""}, "code_tokens": ["list", "public", "List", "(", ",", ",", ")", "{", "}", "@", "Override", "<", "UmsAdmin", ">", "String", "keyword", "Integer", "pageSize", "Integer", "pageNum", ";", "UmsAdminExample", ";", ";", "if", "return", ";", "PageHelper", ".", "startPage", "example", "=", "UmsAdminExample", ".", "Criteria", "criteria", "=", "(", ")", "{", "}", "adminMapper", ".", "selectByExample", "(", "pageNum", ",", "pageSize", ")", "new", "UmsAdminExample", "example", ".", "createCriteria", "!", ";", ";", "(", "example", ")", "(", ")", "(", ")", "StrUtil", ".", "isEmpty", "criteria", ".", "andUsernameLike", "example", ".", "or", "(", "keyword", ")", "(", ")", "(", ")", "+", ".", "andNickNameLike", "+", "keyword", "\"", "%", "\"", "example", ".", "createCriteria", "(", ")", "\"", "%", "\"", "(", ")", "+", "+", "keyword", "\"", "%", "\"", "\"", "%", "\""], "metrics": {"cyclomatic_complexity": 2, "n_ast_nodes": 157, "ast_depth": 14, "n_identifiers": 17, "vocab_size": 42, "n_whitespaces": 117, "n_words": 41, "nloc": 11, "token_counts": 107}}
{"dataset_split": "train", "id": "mall@83fe3e7:mall-admin/src/main/java/com/macro/mall/service/impl/UmsAdminServiceImpl.java#170-188", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "83fe3e707b99d135deb9de071ce87fe4b07c563f", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/impl/UmsAdminServiceImpl.java", "language": "Java"}, "method": {"name": "update", "qualified_name": "com.macro.mall.service.impl.UmsAdminServiceImpl#update", "start_line": 170, "end_line": 188, "signature": "update(Long id, UmsAdmin admin)", "original_code": "@Override\n    public int update(Long id, UmsAdmin admin) {\n        admin.setId(id);\n        UmsAdmin rawAdmin = adminMapper.selectByPrimaryKey(id);\n        if(rawAdmin.getPassword().equals(admin.getPassword())){\n            //\u4e0e\u539f\u52a0\u5bc6\u5bc6\u7801\u76f8\u540c\u7684\u4e0d\u9700\u8981\u4fee\u6539\n            admin.setPassword(null);\n        }else{\n            //\u4e0e\u539f\u52a0\u5bc6\u5bc6\u7801\u4e0d\u540c\u7684\u9700\u8981\u52a0\u5bc6\u4fee\u6539\n            if(StrUtil.isEmpty(admin.getPassword())){\n                admin.setPassword(null);\n            }else{\n                admin.setPassword(passwordEncoder.encode(admin.getPassword()));\n            }\n        }\n        int count = adminMapper.updateByPrimaryKeySelective(admin);\n        getCacheService().delAdmin(id);\n        return count;\n    }", "doc_comment": ""}, "code_tokens": ["update", "public", "int", "(", ",", ")", "{", "}", "@", "Override", "Long", "id", "UmsAdmin", "admin", ";", "UmsAdmin", ";", "if", "else", ";", ";", "return", "count", ";", "admin", ".", "setId", "rawAdmin", "=", "(", ")", "{", "//\u4e0e\u539f\u52a0\u5bc6\u5bc6\u7801\u76f8\u540c\u7684\u4e0d\u9700\u8981\u4fee\u6539", "}", "{", "//\u4e0e\u539f\u52a0\u5bc6\u5bc6\u7801\u4e0d\u540c\u7684\u9700\u8981\u52a0\u5bc6\u4fee\u6539", "}", "int", "count", "=", ".", "delAdmin", "(", "id", ")", "adminMapper", ".", "selectByPrimaryKey", ".", "equals", ";", "if", "else", "adminMapper", ".", "updateByPrimaryKeySelective", "getCacheService", "(", "id", ")", "(", "id", ")", "rawAdmin", ".", "getPassword", "(", ")", "admin", ".", "setPassword", "(", ")", "{", "}", "{", "}", "(", "admin", ")", "(", ")", "(", ")", "admin", ".", "getPassword", "(", "null", ")", "StrUtil", ".", "isEmpty", ";", ";", "(", ")", "(", ")", "admin", ".", "setPassword", "admin", ".", "setPassword", "admin", ".", "getPassword", "(", "null", ")", "(", ")", "(", ")", "passwordEncoder", ".", "encode", "(", ")", "admin", ".", "getPassword", "(", ")"], "metrics": {"cyclomatic_complexity": 3, "n_ast_nodes": 183, "ast_depth": 15, "n_identifiers": 19, "vocab_size": 38, "n_whitespaces": 207, "n_words": 53, "nloc": 19, "token_counts": 125}}
{"dataset_split": "train", "id": "mall@83fe3e7:mall-admin/src/main/java/com/macro/mall/service/impl/UmsAdminServiceImpl.java#190-196", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "83fe3e707b99d135deb9de071ce87fe4b07c563f", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/impl/UmsAdminServiceImpl.java", "language": "Java"}, "method": {"name": "delete", "qualified_name": "com.macro.mall.service.impl.UmsAdminServiceImpl#delete", "start_line": 190, "end_line": 196, "signature": "delete(Long id)", "original_code": "@Override\n    public int delete(Long id) {\n        int count = adminMapper.deleteByPrimaryKey(id);\n        getCacheService().delAdmin(id);\n        getCacheService().delResourceList(id);\n        return count;\n    }", "doc_comment": ""}, "code_tokens": ["delete", "public", "int", "(", ")", "{", "}", "@", "Override", "Long", "id", ";", ";", ";", "return", "count", ";", "int", "count", "=", ".", "delAdmin", ".", "delResourceList", "adminMapper", ".", "deleteByPrimaryKey", "getCacheService", "(", "id", ")", "getCacheService", "(", "id", ")", "(", "id", ")", "(", ")", "(", ")"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 66, "ast_depth": 8, "n_identifiers": 9, "vocab_size": 21, "n_whitespaces": 54, "n_words": 19, "nloc": 7, "token_counts": 42}}
{"dataset_split": "train", "id": "mall@83fe3e7:mall-admin/src/main/java/com/macro/mall/service/impl/UmsAdminServiceImpl.java#198-218", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "83fe3e707b99d135deb9de071ce87fe4b07c563f", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/impl/UmsAdminServiceImpl.java", "language": "Java"}, "method": {"name": "updateRole", "qualified_name": "com.macro.mall.service.impl.UmsAdminServiceImpl#updateRole", "start_line": 198, "end_line": 218, "signature": "updateRole(Long adminId, List<Long> roleIds)", "original_code": "@Override\n    public int updateRole(Long adminId, List<Long> roleIds) {\n        int count = roleIds == null ? 0 : roleIds.size();\n        //\u5148\u5220\u9664\u539f\u6765\u7684\u5173\u7cfb\n        UmsAdminRoleRelationExample adminRoleRelationExample = new UmsAdminRoleRelationExample();\n        adminRoleRelationExample.createCriteria().andAdminIdEqualTo(adminId);\n        adminRoleRelationMapper.deleteByExample(adminRoleRelationExample);\n        //\u5efa\u7acb\u65b0\u5173\u7cfb\n        if (!CollectionUtils.isEmpty(roleIds)) {\n            List<UmsAdminRoleRelation> list = new ArrayList<>();\n            for (Long roleId : roleIds) {\n                UmsAdminRoleRelation roleRelation = new UmsAdminRoleRelation();\n                roleRelation.setAdminId(adminId);\n                roleRelation.setRoleId(roleId);\n                list.add(roleRelation);\n            }\n            adminRoleRelationDao.insertList(list);\n        }\n        getCacheService().delResourceList(adminId);\n        return count;\n    }", "doc_comment": ""}, "code_tokens": ["updateRole", "public", "int", "(", ",", ")", "{", "//\u5148\u5220\u9664\u539f\u6765\u7684\u5173\u7cfb", "//\u5efa\u7acb\u65b0\u5173\u7cfb", "}", "@", "Override", "Long", "adminId", "roleIds", ";", "UmsAdminRoleRelationExample", ";", ";", ";", "if", ";", "return", "count", ";", "List", "int", "count", "=", "adminRoleRelationExample", "=", ".", "andAdminIdEqualTo", "adminRoleRelationMapper", ".", "deleteByExample", "(", ")", "{", "}", ".", "delResourceList", "<", "Long", ">", "?", "0", ":", "new", "UmsAdminRoleRelationExample", "adminRoleRelationExample", ".", "createCriteria", "(", "adminId", ")", "(", "adminRoleRelationExample", ")", "!", ";", "for", "(", "Long", "roleId", ":", "roleIds", ")", ";", "getCacheService", "(", "adminId", ")", "roleIds", "==", "null", "roleIds", ".", "size", "(", ")", "(", ")", "CollectionUtils", ".", "isEmpty", "List", "list", "=", "{", "}", "adminRoleRelationDao", ".", "insertList", "(", ")", "(", ")", "(", "roleIds", ")", "<", "UmsAdminRoleRelation", ">", "new", "UmsAdminRoleRelation", ";", ";", ";", ";", "(", "list", ")", "ArrayList", "(", ")", "roleRelation", "=", "roleRelation", ".", "setAdminId", "roleRelation", ".", "setRoleId", "list", ".", "add", "<", ">", "new", "UmsAdminRoleRelation", "(", "adminId", ")", "(", "roleId", ")", "(", "roleRelation", ")", "(", ")"], "metrics": {"cyclomatic_complexity": 3, "n_ast_nodes": 210, "ast_depth": 12, "n_identifiers": 23, "vocab_size": 53, "n_whitespaces": 255, "n_words": 63, "nloc": 21, "token_counts": 142}}
{"dataset_split": "train", "id": "mall@83fe3e7:mall-admin/src/main/java/com/macro/mall/service/impl/UmsAdminServiceImpl.java#220-223", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "83fe3e707b99d135deb9de071ce87fe4b07c563f", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/impl/UmsAdminServiceImpl.java", "language": "Java"}, "method": {"name": "getRoleList", "qualified_name": "com.macro.mall.service.impl.UmsAdminServiceImpl#getRoleList", "start_line": 220, "end_line": 223, "signature": "getRoleList(Long adminId)", "original_code": "@Override\n    public List<UmsRole> getRoleList(Long adminId) {\n        return adminRoleRelationDao.getRoleList(adminId);\n    }", "doc_comment": ""}, "code_tokens": ["getRoleList", "public", "List", "(", ")", "{", "}", "@", "Override", "<", "UmsRole", ">", "Long", "adminId", "return", ";", "adminRoleRelationDao", ".", "getRoleList", "(", "adminId", ")"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 34, "ast_depth": 7, "n_identifiers": 4, "vocab_size": 18, "n_whitespaces": 24, "n_words": 11, "nloc": 4, "token_counts": 22}}
{"dataset_split": "train", "id": "mall@83fe3e7:mall-admin/src/main/java/com/macro/mall/service/impl/UmsAdminServiceImpl.java#225-239", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "83fe3e707b99d135deb9de071ce87fe4b07c563f", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/impl/UmsAdminServiceImpl.java", "language": "Java"}, "method": {"name": "getResourceList", "qualified_name": "com.macro.mall.service.impl.UmsAdminServiceImpl#getResourceList", "start_line": 225, "end_line": 239, "signature": "getResourceList(Long adminId)", "original_code": "@Override\n    public List<UmsResource> getResourceList(Long adminId) {\n        //\u5148\u4ece\u7f13\u5b58\u4e2d\u83b7\u53d6\u6570\u636e\n        List<UmsResource> resourceList = getCacheService().getResourceList(adminId);\n        if(CollUtil.isNotEmpty(resourceList)){\n            return  resourceList;\n        }\n        //\u7f13\u5b58\u4e2d\u6ca1\u6709\u4ece\u6570\u636e\u5e93\u4e2d\u83b7\u53d6\n        resourceList = adminRoleRelationDao.getResourceList(adminId);\n        if(CollUtil.isNotEmpty(resourceList)){\n            //\u5c06\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u5b58\u5165\u7f13\u5b58\u4e2d\n            getCacheService().setResourceList(adminId,resourceList);\n        }\n        return resourceList;\n    }", "doc_comment": ""}, "code_tokens": ["getResourceList", "public", "List", "(", ")", "{", "//\u5148\u4ece\u7f13\u5b58\u4e2d\u83b7\u53d6\u6570\u636e", "//\u7f13\u5b58\u4e2d\u6ca1\u6709\u4ece\u6570\u636e\u5e93\u4e2d\u83b7\u53d6", "}", "@", "Override", "<", "UmsResource", ">", "Long", "adminId", ";", "if", ";", "if", "return", "resourceList", ";", "List", "resourceList", "=", "(", ")", "{", "}", "resourceList", "=", "(", ")", "{", "//\u5c06\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\u5b58\u5165\u7f13\u5b58\u4e2d", "}", "<", "UmsResource", ">", ".", "getResourceList", "CollUtil", ".", "isNotEmpty", "return", "resourceList", ";", "adminRoleRelationDao", ".", "getResourceList", "CollUtil", ".", "isNotEmpty", ";", "getCacheService", "(", "adminId", ")", "(", "resourceList", ")", "(", "adminId", ")", "(", "resourceList", ")", ".", "setResourceList", "(", ")", "getCacheService", "(", "adminId", ",", "resourceList", ")", "(", ")"], "metrics": {"cyclomatic_complexity": 3, "n_ast_nodes": 118, "ast_depth": 10, "n_identifiers": 9, "vocab_size": 29, "n_whitespaces": 142, "n_words": 36, "nloc": 15, "token_counts": 80}}
{"dataset_split": "train", "id": "mall@83fe3e7:mall-admin/src/main/java/com/macro/mall/service/impl/UmsAdminServiceImpl.java#241-262", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "83fe3e707b99d135deb9de071ce87fe4b07c563f", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/impl/UmsAdminServiceImpl.java", "language": "Java"}, "method": {"name": "updatePassword", "qualified_name": "com.macro.mall.service.impl.UmsAdminServiceImpl#updatePassword", "start_line": 241, "end_line": 262, "signature": "updatePassword(UpdateAdminPasswordParam param)", "original_code": "@Override\n    public int updatePassword(UpdateAdminPasswordParam param) {\n        if(StrUtil.isEmpty(param.getUsername())\n                ||StrUtil.isEmpty(param.getOldPassword())\n                ||StrUtil.isEmpty(param.getNewPassword())){\n            return -1;\n        }\n        UmsAdminExample example = new UmsAdminExample();\n        example.createCriteria().andUsernameEqualTo(param.getUsername());\n        List<UmsAdmin> adminList = adminMapper.selectByExample(example);\n        if(CollUtil.isEmpty(adminList)){\n            return -2;\n        }\n        UmsAdmin umsAdmin = adminList.get(0);\n        if(!passwordEncoder.matches(param.getOldPassword(),umsAdmin.getPassword())){\n            return -3;\n        }\n        umsAdmin.setPassword(passwordEncoder.encode(param.getNewPassword()));\n        adminMapper.updateByPrimaryKey(umsAdmin);\n        getCacheService().delAdmin(umsAdmin.getId());\n        return 1;\n    }", "doc_comment": ""}, "code_tokens": ["updatePassword", "public", "int", "(", ")", "{", "}", "@", "Override", "UpdateAdminPasswordParam", "param", "if", "UmsAdminExample", ";", ";", ";", "if", "UmsAdmin", ";", "if", ";", ";", ";", "return", "1", ";", "(", ")", "{", "}", "example", "=", ".", "andUsernameEqualTo", "List", "adminList", "=", "(", ")", "{", "}", "umsAdmin", "=", "(", ")", "{", "}", "umsAdmin", ".", "setPassword", "adminMapper", ".", "updateByPrimaryKey", ".", "delAdmin", "||", "return", ";", "new", "UmsAdminExample", "example", ".", "createCriteria", "(", ")", "<", "UmsAdmin", ">", "adminMapper", ".", "selectByExample", "CollUtil", ".", "isEmpty", "return", ";", "adminList", ".", "get", "!", "return", ";", "(", ")", "(", "umsAdmin", ")", "getCacheService", "(", ")", "||", "StrUtil", ".", "isEmpty", "-", "1", "(", ")", "(", ")", "param", ".", "getUsername", "(", "example", ")", "(", "adminList", ")", "-", "2", "(", "0", ")", "passwordEncoder", ".", "matches", "-", "3", "passwordEncoder", ".", "encode", "(", ")", "umsAdmin", ".", "getId", "StrUtil", ".", "isEmpty", "StrUtil", ".", "isEmpty", "(", ")", "(", ")", "(", ",", ")", "(", ")", "(", ")", "(", ")", "(", ")", "param", ".", "getNewPassword", "param", ".", "getOldPassword", "umsAdmin", ".", "getPassword", "param", ".", "getNewPassword", "param", ".", "getUsername", "param", ".", "getOldPassword", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")", "(", ")"], "metrics": {"cyclomatic_complexity": 6, "n_ast_nodes": 263, "ast_depth": 12, "n_identifiers": 26, "vocab_size": 53, "n_whitespaces": 227, "n_words": 71, "nloc": 22, "token_counts": 178}}
{"dataset_split": "train", "id": "mall@83fe3e7:mall-admin/src/main/java/com/macro/mall/service/impl/UmsAdminServiceImpl.java#264-273", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "83fe3e707b99d135deb9de071ce87fe4b07c563f", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/impl/UmsAdminServiceImpl.java", "language": "Java"}, "method": {"name": "loadUserByUsername", "qualified_name": "com.macro.mall.service.impl.UmsAdminServiceImpl#loadUserByUsername", "start_line": 264, "end_line": 273, "signature": "loadUserByUsername(String username)", "original_code": "@Override\n    public UserDetails loadUserByUsername(String username){\n        //\u83b7\u53d6\u7528\u6237\u4fe1\u606f\n        UmsAdmin admin = getAdminByUsername(username);\n        if (admin != null) {\n            List<UmsResource> resourceList = getResourceList(admin.getId());\n            return new AdminUserDetails(admin,resourceList);\n        }\n        throw new UsernameNotFoundException(\"\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef\");\n    }", "doc_comment": ""}, "code_tokens": ["UserDetails", "loadUserByUsername", "public", "(", ")", "{", "//\u83b7\u53d6\u7528\u6237\u4fe1\u606f", "}", "@", "Override", "String", "username", "UmsAdmin", ";", "if", "throw", ";", "admin", "=", "(", ")", "{", "}", "new", "UsernameNotFoundException", "getAdminByUsername", "admin", "!=", "null", ";", "return", ";", "(", ")", "(", "username", ")", "List", "resourceList", "=", "new", "AdminUserDetails", "\"", "\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef", "\"", "<", "UmsResource", ">", "getResourceList", "(", "admin", ",", "resourceList", ")", "(", ")", "admin", ".", "getId", "(", ")"], "metrics": {"cyclomatic_complexity": 2, "n_ast_nodes": 91, "ast_depth": 12, "n_identifiers": 8, "vocab_size": 36, "n_whitespaces": 98, "n_words": 29, "nloc": 10, "token_counts": 61}}
{"dataset_split": "train", "id": "mall@83fe3e7:mall-admin/src/main/java/com/macro/mall/service/impl/UmsAdminServiceImpl.java#275-278", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "83fe3e707b99d135deb9de071ce87fe4b07c563f", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/impl/UmsAdminServiceImpl.java", "language": "Java"}, "method": {"name": "getCacheService", "qualified_name": "com.macro.mall.service.impl.UmsAdminServiceImpl#getCacheService", "start_line": 275, "end_line": 278, "signature": "getCacheService()", "original_code": "@Override\n    public UmsAdminCacheService getCacheService() {\n        return SpringUtil.getBean(UmsAdminCacheService.class);\n    }", "doc_comment": ""}, "code_tokens": ["UmsAdminCacheService", "getCacheService", "public", "(", ")", "{", "}", "@", "Override", "return", ";", "SpringUtil", ".", "getBean", "(", ")", "UmsAdminCacheService", ".", "class"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 29, "ast_depth": 8, "n_identifiers": 4, "vocab_size": 15, "n_whitespaces": 23, "n_words": 9, "nloc": 4, "token_counts": 19}}
{"dataset_split": "train", "id": "mall@83fe3e7:mall-admin/src/main/java/com/macro/mall/service/impl/UmsAdminServiceImpl.java#280-286", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "83fe3e707b99d135deb9de071ce87fe4b07c563f", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/impl/UmsAdminServiceImpl.java", "language": "Java"}, "method": {"name": "logout", "qualified_name": "com.macro.mall.service.impl.UmsAdminServiceImpl#logout", "start_line": 280, "end_line": 286, "signature": "logout(String username)", "original_code": "@Override\n    public void logout(String username) {\n        //\u6e05\u7a7a\u7f13\u5b58\u4e2d\u7684\u7528\u6237\u76f8\u5173\u6570\u636e\n        UmsAdmin admin = getCacheService().getAdmin(username);\n        getCacheService().delAdmin(admin.getId());\n        getCacheService().delResourceList(admin.getId());\n    }", "doc_comment": ""}, "code_tokens": ["void", "logout", "public", "(", ")", "{", "//\u6e05\u7a7a\u7f13\u5b58\u4e2d\u7684\u7528\u6237\u76f8\u5173\u6570\u636e", "}", "@", "Override", "String", "username", "UmsAdmin", ";", ";", ";", "admin", "=", ".", "delAdmin", ".", "delResourceList", ".", "getAdmin", "getCacheService", "(", ")", "getCacheService", "(", ")", "getCacheService", "(", "username", ")", "(", ")", "admin", ".", "getId", "(", ")", "admin", ".", "getId", "(", ")", "(", ")", "(", ")"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 77, "ast_depth": 9, "n_identifiers": 9, "vocab_size": 22, "n_whitespaces": 53, "n_words": 20, "nloc": 7, "token_counts": 50}}
{"dataset_split": "train", "id": "mall@2066a55:mall-admin/src/main/java/com/macro/mall/service/impl/UmsMenuServiceImpl.java#25-30", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "2066a5521202a94621f57c29bad3949152ffb1a0", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/impl/UmsMenuServiceImpl.java", "language": "Java"}, "method": {"name": "create", "qualified_name": "com.macro.mall.service.impl.UmsMenuServiceImpl#create", "start_line": 25, "end_line": 30, "signature": "create(UmsMenu umsMenu)", "original_code": "@Override\n    public int create(UmsMenu umsMenu) {\n        umsMenu.setCreateTime(new Date());\n        updateLevel(umsMenu);\n        return menuMapper.insert(umsMenu);\n    }", "doc_comment": ""}, "code_tokens": ["create", "public", "int", "(", ")", "{", "}", "@", "Override", "UmsMenu", "umsMenu", ";", ";", "return", ";", "umsMenu", ".", "setCreateTime", "updateLevel", "menuMapper", ".", "insert", "(", ")", "(", "umsMenu", ")", "(", "umsMenu", ")", "new", "Date", "(", ")"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 53, "ast_depth": 9, "n_identifiers": 7, "vocab_size": 20, "n_whitespaces": 43, "n_words": 16, "nloc": 6, "token_counts": 34}}
{"dataset_split": "train", "id": "mall@2066a55:mall-admin/src/main/java/com/macro/mall/service/impl/UmsMenuServiceImpl.java#35-48", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "2066a5521202a94621f57c29bad3949152ffb1a0", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/impl/UmsMenuServiceImpl.java", "language": "Java"}, "method": {"name": "updateLevel", "qualified_name": "com.macro.mall.service.impl.UmsMenuServiceImpl#updateLevel", "start_line": 35, "end_line": 48, "signature": "updateLevel(UmsMenu umsMenu)", "original_code": "private void updateLevel(UmsMenu umsMenu) {\n        if (umsMenu.getParentId() == 0) {\n            //\u6ca1\u6709\u7236\u83dc\u5355\u65f6\u4e3a\u4e00\u7ea7\u83dc\u5355\n            umsMenu.setLevel(0);\n        } else {\n            //\u6709\u7236\u83dc\u5355\u65f6\u4e3a\u7236\u83dc\u5355\u7684level+1\n            UmsMenu parentMenu = menuMapper.selectByPrimaryKey(umsMenu.getParentId());\n            if (parentMenu != null) {\n                umsMenu.setLevel(parentMenu.getLevel() + 1);\n            } else {\n                umsMenu.setLevel(0);\n            }\n        }\n    }", "doc_comment": "/**\n     * \u4fee\u6539\u83dc\u5355\u5c42\u7ea7\n     */"}, "code_tokens": ["void", "updateLevel", "private", "(", ")", "{", "}", "UmsMenu", "umsMenu", "if", "else", "(", ")", "{", "//\u6ca1\u6709\u7236\u83dc\u5355\u65f6\u4e3a\u4e00\u7ea7\u83dc\u5355", "}", "{", "//\u6709\u7236\u83dc\u5355\u65f6\u4e3a\u7236\u83dc\u5355\u7684level+1", "}", "==", "0", ";", "UmsMenu", ";", "if", "else", "umsMenu", ".", "getParentId", "umsMenu", ".", "setLevel", "parentMenu", "=", "(", ")", "{", "}", "{", "}", "(", ")", "(", "0", ")", "menuMapper", ".", "selectByPrimaryKey", "parentMenu", "!=", "null", ";", ";", "(", ")", "umsMenu", ".", "setLevel", "umsMenu", ".", "setLevel", "umsMenu", ".", "getParentId", "(", ")", "(", "0", ")", "(", ")", "+", "1", "parentMenu", ".", "getLevel", "(", ")"], "metrics": {"cyclomatic_complexity": 3, "n_ast_nodes": 114, "ast_depth": 14, "n_identifiers": 8, "vocab_size": 28, "n_whitespaces": 178, "n_words": 34, "nloc": 14, "token_counts": 78}}
{"dataset_split": "train", "id": "mall@2066a55:mall-admin/src/main/java/com/macro/mall/service/impl/UmsMenuServiceImpl.java#50-55", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "2066a5521202a94621f57c29bad3949152ffb1a0", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/impl/UmsMenuServiceImpl.java", "language": "Java"}, "method": {"name": "update", "qualified_name": "com.macro.mall.service.impl.UmsMenuServiceImpl#update", "start_line": 50, "end_line": 55, "signature": "update(Long id, UmsMenu umsMenu)", "original_code": "@Override\n    public int update(Long id, UmsMenu umsMenu) {\n        umsMenu.setId(id);\n        updateLevel(umsMenu);\n        return menuMapper.updateByPrimaryKeySelective(umsMenu);\n    }", "doc_comment": ""}, "code_tokens": ["update", "public", "int", "(", ",", ")", "{", "}", "@", "Override", "Long", "id", "UmsMenu", "umsMenu", ";", ";", "return", ";", "umsMenu", ".", "setId", "updateLevel", "menuMapper", ".", "updateByPrimaryKeySelective", "(", "id", ")", "(", "umsMenu", ")", "(", "umsMenu", ")"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 52, "ast_depth": 7, "n_identifiers": 8, "vocab_size": 21, "n_whitespaces": 44, "n_words": 17, "nloc": 6, "token_counts": 34}}
{"dataset_split": "train", "id": "mall@2066a55:mall-admin/src/main/java/com/macro/mall/service/impl/UmsMenuServiceImpl.java#57-60", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "2066a5521202a94621f57c29bad3949152ffb1a0", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/impl/UmsMenuServiceImpl.java", "language": "Java"}, "method": {"name": "getItem", "qualified_name": "com.macro.mall.service.impl.UmsMenuServiceImpl#getItem", "start_line": 57, "end_line": 60, "signature": "getItem(Long id)", "original_code": "@Override\n    public UmsMenu getItem(Long id) {\n        return menuMapper.selectByPrimaryKey(id);\n    }", "doc_comment": ""}, "code_tokens": ["UmsMenu", "getItem", "public", "(", ")", "{", "}", "@", "Override", "Long", "id", "return", ";", "menuMapper", ".", "selectByPrimaryKey", "(", "id", ")"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 29, "ast_depth": 7, "n_identifiers": 5, "vocab_size": 16, "n_whitespaces": 24, "n_words": 10, "nloc": 4, "token_counts": 19}}
{"dataset_split": "train", "id": "mall@2066a55:mall-admin/src/main/java/com/macro/mall/service/impl/UmsMenuServiceImpl.java#62-65", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "2066a5521202a94621f57c29bad3949152ffb1a0", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/impl/UmsMenuServiceImpl.java", "language": "Java"}, "method": {"name": "delete", "qualified_name": "com.macro.mall.service.impl.UmsMenuServiceImpl#delete", "start_line": 62, "end_line": 65, "signature": "delete(Long id)", "original_code": "@Override\n    public int delete(Long id) {\n        return menuMapper.deleteByPrimaryKey(id);\n    }", "doc_comment": ""}, "code_tokens": ["delete", "public", "int", "(", ")", "{", "}", "@", "Override", "Long", "id", "return", ";", "menuMapper", ".", "deleteByPrimaryKey", "(", "id", ")"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 30, "ast_depth": 7, "n_identifiers": 5, "vocab_size": 16, "n_whitespaces": 24, "n_words": 10, "nloc": 4, "token_counts": 19}}
{"dataset_split": "train", "id": "mall@2066a55:mall-admin/src/main/java/com/macro/mall/service/impl/UmsMenuServiceImpl.java#67-74", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "2066a5521202a94621f57c29bad3949152ffb1a0", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/impl/UmsMenuServiceImpl.java", "language": "Java"}, "method": {"name": "list", "qualified_name": "com.macro.mall.service.impl.UmsMenuServiceImpl#list", "start_line": 67, "end_line": 74, "signature": "list(Long parentId, Integer pageSize, Integer pageNum)", "original_code": "@Override\n    public List<UmsMenu> list(Long parentId, Integer pageSize, Integer pageNum) {\n        PageHelper.startPage(pageNum, pageSize);\n        UmsMenuExample example = new UmsMenuExample();\n        example.setOrderByClause(\"sort desc\");\n        example.createCriteria().andParentIdEqualTo(parentId);\n        return menuMapper.selectByExample(example);\n    }", "doc_comment": ""}, "code_tokens": ["list", "public", "List", "(", ",", ",", ")", "{", "}", "@", "Override", "<", "UmsMenu", ">", "Long", "parentId", "Integer", "pageSize", "Integer", "pageNum", ";", "UmsMenuExample", ";", ";", ";", "return", ";", "PageHelper", ".", "startPage", "example", "=", "example", ".", "setOrderByClause", ".", "andParentIdEqualTo", "menuMapper", ".", "selectByExample", "(", "pageNum", ",", "pageSize", ")", "new", "UmsMenuExample", "(", ")", "example", ".", "createCriteria", "(", "parentId", ")", "(", "example", ")", "(", ")", "\"", "sort desc", "\"", "(", ")"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 95, "ast_depth": 8, "n_identifiers": 13, "vocab_size": 34, "n_whitespaces": 70, "n_words": 31, "nloc": 8, "token_counts": 65}}
{"dataset_split": "train", "id": "mall@2066a55:mall-admin/src/main/java/com/macro/mall/service/impl/UmsMenuServiceImpl.java#76-84", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "2066a5521202a94621f57c29bad3949152ffb1a0", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/impl/UmsMenuServiceImpl.java", "language": "Java"}, "method": {"name": "treeList", "qualified_name": "com.macro.mall.service.impl.UmsMenuServiceImpl#treeList", "start_line": 76, "end_line": 84, "signature": "treeList()", "original_code": "@Override\n    public List<UmsMenuNode> treeList() {\n        List<UmsMenu> menuList = menuMapper.selectByExample(new UmsMenuExample());\n        List<UmsMenuNode> result = menuList.stream()\n                .filter(menu -> menu.getParentId().equals(0L))\n                .map(menu -> covertMenuNode(menu, menuList))\n                .collect(Collectors.toList());\n        return result;\n    }", "doc_comment": ""}, "code_tokens": ["treeList", "public", "List", "(", ")", "{", "}", "@", "Override", "<", "UmsMenuNode", ">", ";", ";", "return", "result", ";", "List", "menuList", "=", "List", "result", "=", "<", "UmsMenu", ">", "menuMapper", ".", "selectByExample", "<", "UmsMenuNode", ">", ".", "collect", "(", ")", ".", "map", "(", ")", "new", "UmsMenuExample", ".", "filter", "(", ")", "Collectors", ".", "toList", "(", ")", "menuList", ".", "stream", "(", ")", "menu", "->", "(", ")", "(", ")", "menu", "->", "covertMenuNode", ".", "equals", "(", "menu", ",", "menuList", ")", "menu", ".", "getParentId", "(", "0L", ")", "(", ")"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 119, "ast_depth": 14, "n_identifiers": 16, "vocab_size": 36, "n_whitespaces": 104, "n_words": 33, "nloc": 9, "token_counts": 80}}
{"dataset_split": "train", "id": "mall@2066a55:mall-admin/src/main/java/com/macro/mall/service/impl/UmsMenuServiceImpl.java#86-92", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "2066a5521202a94621f57c29bad3949152ffb1a0", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/impl/UmsMenuServiceImpl.java", "language": "Java"}, "method": {"name": "updateHidden", "qualified_name": "com.macro.mall.service.impl.UmsMenuServiceImpl#updateHidden", "start_line": 86, "end_line": 92, "signature": "updateHidden(Long id, Integer hidden)", "original_code": "@Override\n    public int updateHidden(Long id, Integer hidden) {\n        UmsMenu umsMenu = new UmsMenu();\n        umsMenu.setId(id);\n        umsMenu.setHidden(hidden);\n        return menuMapper.updateByPrimaryKeySelective(umsMenu);\n    }", "doc_comment": ""}, "code_tokens": ["updateHidden", "public", "int", "(", ",", ")", "{", "}", "@", "Override", "Long", "id", "Integer", "hidden", "UmsMenu", ";", ";", ";", "return", ";", "umsMenu", "=", "umsMenu", ".", "setId", "umsMenu", ".", "setHidden", "menuMapper", ".", "updateByPrimaryKeySelective", "new", "UmsMenu", "(", "id", ")", "(", "hidden", ")", "(", "umsMenu", ")", "(", ")"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 66, "ast_depth": 8, "n_identifiers": 9, "vocab_size": 25, "n_whitespaces": 57, "n_words": 22, "nloc": 7, "token_counts": 44}}
{"dataset_split": "train", "id": "mall@2066a55:mall-admin/src/main/java/com/macro/mall/service/impl/UmsMenuServiceImpl.java#97-105", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "2066a5521202a94621f57c29bad3949152ffb1a0", "license": "apache-2.0"}, "file": {"path": "mall-admin/src/main/java/com/macro/mall/service/impl/UmsMenuServiceImpl.java", "language": "Java"}, "method": {"name": "covertMenuNode", "qualified_name": "com.macro.mall.service.impl.UmsMenuServiceImpl#covertMenuNode", "start_line": 97, "end_line": 105, "signature": "covertMenuNode(UmsMenu menu, List<UmsMenu> menuList)", "original_code": "private UmsMenuNode covertMenuNode(UmsMenu menu, List<UmsMenu> menuList) {\n        UmsMenuNode node = new UmsMenuNode();\n        BeanUtils.copyProperties(menu, node);\n        List<UmsMenuNode> children = menuList.stream()\n                .filter(subMenu -> subMenu.getParentId().equals(menu.getId()))\n                .map(subMenu -> covertMenuNode(subMenu, menuList)).collect(Collectors.toList());\n        node.setChildren(children);\n        return node;\n    }", "doc_comment": "/**\n     * \u5c06UmsMenu\u8f6c\u5316\u4e3aUmsMenuNode\u5e76\u8bbe\u7f6echildren\u5c5e\u6027\n     */"}, "code_tokens": ["UmsMenuNode", "covertMenuNode", "private", "(", ",", ")", "{", "}", "UmsMenu", "menu", "menuList", "UmsMenuNode", ";", ";", ";", ";", "return", "node", ";", "List", "node", "=", "BeanUtils", ".", "copyProperties", "List", "children", "=", "node", ".", "setChildren", "<", "UmsMenu", ">", "new", "UmsMenuNode", "(", "menu", ",", "node", ")", "<", "UmsMenuNode", ">", ".", "collect", "(", "children", ")", "(", ")", ".", "map", "(", ")", ".", "filter", "(", ")", "Collectors", ".", "toList", "menuList", ".", "stream", "(", ")", "subMenu", "->", "(", ")", "(", ")", "subMenu", "->", "covertMenuNode", ".", "equals", "(", "subMenu", ",", "menuList", ")", "subMenu", ".", "getParentId", "(", ")", "(", ")", "menu", ".", "getId", "(", ")"], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 139, "ast_depth": 15, "n_identifiers": 18, "vocab_size": 35, "n_whitespaces": 104, "n_words": 41, "nloc": 9, "token_counts": 95}}
{"dataset_split": "train", "id": "mall@7a1ca5d:mall-portal/src/main/java/com/macro/mall/portal/config/GlobalCorsConfig.java#19-33", "repo": {"name": "mall", "url": "https://github.com/macrozheng/mall", "commit_sha": "7a1ca5d112a4009d55ba4bb192b2e99d93cea822", "license": "apache-2.0"}, "file": {"path": "mall-portal/src/main/java/com/macro/mall/portal/config/GlobalCorsConfig.java", "language": "Java"}, "method": {"name": "corsFilter", "qualified_name": "com.macro.mall.portal.config.GlobalCorsConfig#corsFilter", "start_line": 19, "end_line": 33, "signature": "corsFilter()", "original_code": "@Bean\n    public CorsFilter corsFilter() {\n        CorsConfiguration config = new CorsConfiguration();\n        //\u5141\u8bb8\u6240\u6709\u57df\u540d\u8fdb\u884c\u8de8\u57df\u8c03\u7528\n        config.addAllowedOriginPattern(\"*\");\n        //\u5141\u8bb8\u8de8\u57df\u53d1\u9001cookie\n        config.setAllowCredentials(true);\n        //\u653e\u884c\u5168\u90e8\u539f\u59cb\u5934\u4fe1\u606f\n        config.addAllowedHeader(\"*\");\n        //\u5141\u8bb8\u6240\u6709\u8bf7\u6c42\u65b9\u6cd5\u8de8\u57df\u8c03\u7528\n        config.addAllowedMethod(\"*\");\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration(\"/**\", config);\n        return new CorsFilter(source);\n    }", "doc_comment": "/**\n     * \u5141\u8bb8\u8de8\u57df\u8c03\u7528\u7684\u8fc7\u6ee4\u5668\n     */"}, "code_tokens": ["CorsFilter", "corsFilter", "public", "(", ")", "{", "//\u5141\u8bb8\u6240\u6709\u57df\u540d\u8fdb\u884c\u8de8\u57df\u8c03\u7528", "//\u5141\u8bb8\u8de8\u57df\u53d1\u9001cookie", "//\u653e\u884c\u5168\u90e8\u539f\u59cb\u5934\u4fe1\u606f", "//\u5141\u8bb8\u6240\u6709\u8bf7\u6c42\u65b9\u6cd5\u8de8\u57df\u8c03\u7528", "}", "@", "Bean", "CorsConfiguration", ";", ";", ";", ";", ";", "UrlBasedCorsConfigurationSource", ";", ";", "return", ";", "config", "=", "config", ".", "addAllowedOriginPattern", "config", ".", "setAllowCredentials", "config", ".", "addAllowedHeader", "config", ".", "addAllowedMethod", "source", "=", "source", ".", "registerCorsConfiguration", "new", "CorsFilter", "new", "CorsConfiguration", "(", ")", "(", "true", ")", "(", ")", "(", ")", "new", "UrlBasedCorsConfigurationSource", "(", ",", "config", ")", "(", "source", ")", "(", ")", "\"", "*", "\"", "\"", "*", "\"", "\"", "*", "\"", "(", ")", "\"", "/**", "\""], "metrics": {"cyclomatic_complexity": 1, "n_ast_nodes": 117, "ast_depth": 8, "n_identifiers": 9, "vocab_size": 32, "n_whitespaces": 132, "n_words": 32, "nloc": 15, "token_counts": 81}}
